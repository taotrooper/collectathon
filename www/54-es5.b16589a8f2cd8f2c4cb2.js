!function(){function e(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function i(e,i){for(var n=0;n<i.length;n++){var t=i[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{bzNi:function(n,t,o){"use strict";o.r(t),o.d(t,"ItemPageModule",(function(){return O}));var b=o("ofXK"),r=o("3Pt+"),c=o("TEn/"),a=o("tyNb"),s=o("mrSG"),l=o("fXoL"),u=o("Epai"),d=o("rgD0"),p=o("cLkV"),f=o("SXrq"),m=o("qKCK"),h=o("Tjrf"),g=o("z0C6"),y=o("/WS/");function I(e,i){if(1&e){var n=l.Mb();l.Lb(0,"ion-button",17),l.Tb("click",(function(){return l.ec(n),l.Vb().goToEditItem()})),l.ic(1,"Editar"),l.Kb()}}function L(e,i){if(1&e){var n=l.Mb();l.Lb(0,"ion-button",18),l.Tb("click",(function(){return l.ec(n),l.Vb().deleteItem()})),l.ic(1,"Eliminar"),l.Kb()}}function K(e,i){if(1&e){var n=l.Mb();l.Lb(0,"ion-chip"),l.Jb(1,"ion-icon",19),l.Lb(2,"a",20),l.Jb(3,"app-persona",21),l.Kb(),l.Lb(4,"ion-icon",22),l.Tb("click",(function(){l.ec(n);var e=i.$implicit;return l.Vb().removePerson(e.PersonID,e.Role)})),l.Kb(),l.Kb()}if(2&e){var t=i.$implicit;l.yb(2),l.ac("href","/person/",t.PersonID,"",l.fc),l.yb(1),l.Zb("Names",t.Names),l.Zb("LastNames",t.LastNames),l.Zb("Role",t.Role)}}function v(e,i){if(1&e&&(l.Lb(0,"ion-chip"),l.Jb(1,"ion-icon",23),l.Lb(2,"ion-label"),l.Lb(3,"strong"),l.ic(4,"Serie: "),l.Kb(),l.Lb(5,"a",20),l.ic(6),l.Kb(),l.Kb(),l.Kb()),2&e){var n=l.Vb();l.yb(5),l.ac("href","/series/",n.series,"",l.fc),l.yb(1),l.jc(n.seriesName)}}function k(e,i){if(1&e&&(l.Lb(0,"ion-chip"),l.Jb(1,"ion-icon",24),l.Lb(2,"ion-label"),l.Jb(3,"strong"),l.Lb(4,"a",20),l.ic(5),l.Kb(),l.Kb(),l.Kb()),2&e){var n=l.Vb();l.yb(4),l.ac("href","/genre/",n.genreID1,"",l.fc),l.yb(1),l.jc(n.genreName1)}}function D(e,i){if(1&e&&(l.Lb(0,"ion-chip"),l.Jb(1,"ion-icon",24),l.Lb(2,"ion-label"),l.Jb(3,"strong"),l.Lb(4,"a",20),l.ic(5),l.Kb(),l.Kb(),l.Kb()),2&e){var n=l.Vb();l.yb(4),l.ac("href","/genre/",n.genreID2,"",l.fc),l.yb(1),l.jc(n.genreName2)}}function N(e,i){if(1&e&&(l.Lb(0,"ion-chip"),l.Jb(1,"ion-icon",24),l.Lb(2,"ion-label"),l.Jb(3,"strong"),l.Lb(4,"a",20),l.ic(5),l.Kb(),l.Kb(),l.Kb()),2&e){var n=l.Vb();l.yb(4),l.ac("href","/genre/",n.genreID3,"",l.fc),l.yb(1),l.jc(n.genreName3)}}function w(e,i){1&e&&(l.Lb(0,"ion-item-sliding"),l.Lb(1,"ion-label"),l.ic(2,"No existen ediciones para este \xedtem."),l.Kb(),l.Kb())}function E(e,i){if(1&e&&(l.Lb(0,"ion-col"),l.Lb(1,"div"),l.Lb(2,"ion-button",25),l.ic(3,"Ver detalle"),l.Kb(),l.Kb(),l.Jb(4,"app-detail-book",26),l.Kb()),2&e){var n=l.Vb().$implicit;l.yb(2),l.ac("href","/edition/book/",n.EditionID,""),l.yb(2),l.Yb("id",n.EditionID)}}function C(e,i){if(1&e&&(l.Lb(0,"ion-col"),l.Lb(1,"div"),l.Lb(2,"ion-button",25),l.ic(3,"Ver detalle"),l.Kb(),l.Kb(),l.Jb(4,"app-detail-music",26),l.Kb()),2&e){var n=l.Vb().$implicit;l.yb(2),l.ac("href","/edition/music/",n.EditionID,""),l.yb(2),l.Yb("id",n.EditionID)}}function Y(e,i){if(1&e&&(l.Lb(0,"ion-col"),l.Lb(1,"div"),l.Lb(2,"ion-button",25),l.ic(3,"Ver detalle"),l.Kb(),l.Kb(),l.Jb(4,"app-detail-video",26),l.Kb()),2&e){var n=l.Vb().$implicit;l.yb(2),l.ac("href","/edition/video/",n.EditionID,""),l.yb(2),l.Yb("id",n.EditionID)}}function J(e,i){if(1&e&&(l.Lb(0,"ion-col"),l.Lb(1,"div"),l.Lb(2,"ion-button",25),l.ic(3,"Ver detalle"),l.Kb(),l.Kb(),l.Jb(4,"app-detail-game",26),l.Kb()),2&e){var n=l.Vb().$implicit;l.yb(2),l.ac("href","/edition/game/",n.EditionID,""),l.yb(2),l.Yb("id",n.EditionID)}}function V(e,i){if(1&e&&(l.Lb(0,"ion-col"),l.Lb(1,"div"),l.Lb(2,"ion-button",25),l.ic(3,"Ver detalle"),l.Kb(),l.Kb(),l.Jb(4,"app-detail-comic",26),l.Kb()),2&e){var n=l.Vb().$implicit;l.yb(2),l.ac("href","/edition/comic/",n.EditionID,""),l.yb(2),l.Yb("id",n.EditionID)}}function T(e,i){if(1&e&&(l.Lb(0,"ion-item-sliding"),l.Lb(1,"ion-item",6),l.Lb(2,"ion-grid"),l.Lb(3,"ion-row"),l.hc(4,E,5,2,"ion-col",14),l.hc(5,C,5,2,"ion-col",14),l.hc(6,Y,5,2,"ion-col",14),l.hc(7,J,5,2,"ion-col",14),l.hc(8,V,5,2,"ion-col",14),l.Kb(),l.Kb(),l.Kb(),l.Kb()),2&e){var n=l.Vb();l.yb(4),l.Yb("ngIf","book"===n.type),l.yb(1),l.Yb("ngIf","music"===n.type),l.yb(1),l.Yb("ngIf","video"===n.type),l.yb(1),l.Yb("ngIf","game"===n.type),l.yb(1),l.Yb("ngIf","comic"===n.type)}}var x,P,j,F=[{path:"",component:(x=function(){function n(i,t,o,b,r,c){e(this,n),this.http=i,this.navCtrl=t,this.route=o,this.router=b,this.alertCtrl=r,this.modalController=c,this.id=this.route.snapshot.params.id,this.type=this.route.snapshot.params.type,this.userID=i.getUserID(),this.getItem(),this.getEditions(),console.log("id: "+this.id+", type: "+this.type+", userID: "+this.userID)}var t,o,b;return t=n,(o=[{key:"getItem",value:function(){var e=this;this.http.getItem(this.id).subscribe((function(i){e.item=i,console.log(e.item),e.typeName=e.http.getItemTypeName(e.type),e.typeIcon=e.http.getItemTypeIcon(i.ItemType),console.log(e.typeIcon),e.itemName=i.ItemName,e.series=i.SeriesID,e.seriesName=i.SeriesName,e.genreID1=i.GenreID1,e.genreName1=i.GenreName1,e.genreID2=i.GenreID2,e.genreName2=i.GenreName2,e.genreID3=i.GenreID3,e.genreName3=i.GenreName3,e.people=i.People,e.creatorUser=i.CreatorUserID,console.log("creator user:",e.creatorUser)}),(function(e){console.error(e)}))}},{key:"getEditions",value:function(){var e=this;this.ediciones=[],this.http.getEditionsOfItem(this.id,this.type).subscribe((function(i){e.ediciones=i.body,e.itemCount=i.itemCount,console.log("ediciones ",e.ediciones)}),(function(i){console.error(i),e.itemCount=0}))}},{key:"goToEditItem",value:function(){this.navCtrl.navigateForward("/edit-item/"+this.id)}},{key:"goToEditEdition",value:function(e){this.navCtrl.navigateForward("/edit-"+this.type+"/"+e)}},{key:"goToNewEdition",value:function(){this.navCtrl.navigateForward("/create-"+this.type+"/"+this.id)}},{key:"deleteItem",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertCtrl.create({header:"Confirmar",message:"\xbfSeguro que deseas eliminar permanentemente el item y todas sus ediciones?",buttons:[{text:"Aceptar",handler:function(){n.http.deleteItem(n.id,n.type)}},{text:"Cancelar",role:"cancel",handler:function(){console.log("Cancelar")}}]});case 2:return i=e.sent,e.next=5,i.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"addPerson",value:function(){console.log("A\xf1adir persona"),this.navCtrl.navigateForward("/add-person/"+this.type+"/"+this.id)}},{key:"removePerson",value:function(e,i){var n=this;console.log("Borrar persona ",e),this.http.removePersonToItem(e,this.id,i).subscribe((function(e){n.http.presentToast(e.body.Message),200==e.status&&(n.people=[],n.getItem())}),(function(e){return console.log(e),e}))}},{key:"ngOnInit",value:function(){}}])&&i(t.prototype,o),b&&i(t,b),n}(),x.\u0275fac=function(e){return new(e||x)(l.Ib(u.a),l.Ib(c.U),l.Ib(a.a),l.Ib(a.g),l.Ib(c.b),l.Ib(c.T))},x.\u0275cmp=l.Cb({type:x,selectors:[["app-item"]],decls:40,vars:15,consts:[[3,"translucent"],["color","primary"],["slot","start"],["defaultHref","/myitems"],["slot","end"],[3,"fullscreen"],[1,"ion-card"],[1,"ion-text-wrap",2,"margin-left","5px"],[2,"margin","0 5px",3,"name"],["top","","expand","inline",3,"click",4,"ngIf"],["top","","expand","inline","color","danger",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"click"],["name","person-add"],[4,"ngIf"],["type","item",3,"id"],["expand","full",3,"click"],["top","","expand","inline",3,"click"],["top","","expand","inline","color","danger",3,"click"],["name","person"],[1,"chiplink",3,"href"],[3,"Names","LastNames","Role"],["name","close",3,"click"],["name","pricetag"],["name","bookmark"],[3,"href"],[3,"id"]],template:function(e,i){1&e&&(l.Lb(0,"ion-header",0),l.Lb(1,"ion-toolbar",1),l.Lb(2,"ion-buttons",2),l.Jb(3,"ion-back-button",3),l.Kb(),l.Lb(4,"ion-buttons",4),l.Jb(5,"ion-menu-button"),l.Kb(),l.Lb(6,"ion-title"),l.ic(7),l.Kb(),l.Kb(),l.Kb(),l.Lb(8,"ion-content",5),l.Lb(9,"ion-list"),l.Lb(10,"ion-item-sliding"),l.Lb(11,"ion-item",6),l.Lb(12,"ion-grid"),l.Lb(13,"ion-row"),l.Lb(14,"ion-label",7),l.Lb(15,"h1"),l.Jb(16,"ion-icon",8),l.Lb(17,"strong"),l.ic(18),l.Kb(),l.Kb(),l.Lb(19,"div"),l.hc(20,I,2,0,"ion-button",9),l.hc(21,L,2,0,"ion-button",10),l.Kb(),l.Kb(),l.Kb(),l.Lb(22,"ion-row"),l.hc(23,K,5,4,"ion-chip",11),l.Lb(24,"ion-chip",12),l.Tb("click",(function(){return i.addPerson()})),l.Jb(25,"ion-icon",13),l.Lb(26,"ion-label"),l.ic(27,"Agregar"),l.Kb(),l.Kb(),l.Kb(),l.Lb(28,"ion-row"),l.hc(29,v,7,2,"ion-chip",14),l.hc(30,k,6,2,"ion-chip",14),l.hc(31,D,6,2,"ion-chip",14),l.hc(32,N,6,2,"ion-chip",14),l.Kb(),l.Lb(33,"ion-row"),l.Jb(34,"app-website-list",15),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.hc(35,w,3,0,"ion-item-sliding",14),l.hc(36,T,9,5,"ion-item-sliding",11),l.Lb(37,"ion-item-sliding"),l.Lb(38,"ion-button",16),l.Tb("click",(function(){return i.goToNewEdition()})),l.ic(39,"Nueva edici\xf3n"),l.Kb(),l.Kb(),l.Kb(),l.Kb()),2&e&&(l.Yb("translucent",!0),l.yb(7),l.jc(i.itemName),l.yb(1),l.Yb("fullscreen",!0),l.yb(8),l.Zb("name",i.typeIcon),l.yb(2),l.jc(i.itemName),l.yb(2),l.Yb("ngIf",i.userID==i.creatorUser),l.yb(1),l.Yb("ngIf",i.userID==i.creatorUser),l.yb(2),l.Yb("ngForOf",i.people),l.yb(6),l.Yb("ngIf",i.series>0),l.yb(1),l.Yb("ngIf",i.genreID1>0),l.yb(1),l.Yb("ngIf",i.genreID2>0),l.yb(1),l.Yb("ngIf",i.genreID3>0),l.yb(2),l.Yb("id",i.id),l.yb(1),l.Yb("ngIf",i.itemCount<=0),l.yb(1),l.Yb("ngForOf",i.ediciones))},directives:[c.q,c.P,c.i,c.f,c.g,c.C,c.N,c.m,c.A,c.y,c.v,c.p,c.F,c.z,c.r,b.i,b.h,c.k,d.a,c.h,p.a,c.l,f.a,m.a,h.a,g.a,y.a],styles:[""]}),x)}],G=((P=function i(){e(this,i)}).\u0275mod=l.Gb({type:P}),P.\u0275inj=l.Fb({factory:function(e){return new(e||P)},imports:[[a.i.forChild(F)],a.i]}),P),S=o("F5SU"),U=o("j1ZV"),O=((j=function i(){e(this,i)}).\u0275mod=l.Gb({type:j}),j.\u0275inj=l.Fb({factory:function(e){return new(e||j)},imports:[[b.b,r.g,c.Q,G,S.CreateWebsitePageModule,U.a]]}),j)}}])}();