(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{GNsj:function(e,o,t){"use strict";t.r(o),t.d(o,"AddPersonPageModule",(function(){return I}));var i=t("ofXK"),n=t("3Pt+"),s=t("TEn/"),r=t("tyNb"),c=t("fXoL"),a=t("Epai"),l=t("cLkV");function b(e,o){1&e&&(c.Lb(0,"span"),c.ic(1,", "),c.Kb())}function p(e,o){if(1&e&&(c.Lb(0,"ion-select-option",17),c.ic(1),c.hc(2,b,2,0,"span",11),c.ic(3),c.Kb()),2&e){const e=o.$implicit;c.Yb("value",e.PersonID),c.yb(1),c.kc(" ",e.LastNames,""),c.yb(1),c.Yb("ngIf",e.LastNames&&e.Names),c.yb(1),c.kc("",e.Names," ")}}function u(e,o){1&e&&(c.Lb(0,"div"),c.Lb(1,"ion-select-option",18),c.ic(2,"Autor"),c.Kb(),c.Lb(3,"ion-select-option",19),c.ic(4,"Ilustrador"),c.Kb(),c.Kb())}function d(e,o){1&e&&(c.Lb(0,"div"),c.Lb(1,"ion-select-option",20),c.ic(2,"Actor principal"),c.Kb(),c.Lb(3,"ion-select-option",21),c.ic(4,"Actor secundario"),c.Kb(),c.Lb(5,"ion-select-option",22),c.ic(6,"Director"),c.Kb(),c.Lb(7,"ion-select-option",23),c.ic(8,"Productor"),c.Kb(),c.Lb(9,"ion-select-option",24),c.ic(10,"Guionista"),c.Kb(),c.Lb(11,"ion-select-option",25),c.ic(12,"Compositor"),c.Kb(),c.Lb(13,"ion-select-option",26),c.ic(14,"Creador"),c.Kb(),c.Lb(15,"ion-select-option",27),c.ic(16,"Artista"),c.Kb(),c.Lb(17,"ion-select-option",28),c.ic(18,"Narrador"),c.Kb(),c.Lb(19,"ion-select-option",29),c.ic(20,"Presentador"),c.Kb(),c.Kb())}function f(e,o){1&e&&(c.Lb(0,"div"),c.Lb(1,"ion-select-option",27),c.ic(2,"Artista"),c.Kb(),c.Kb())}function m(e,o){1&e&&(c.Lb(0,"div"),c.Lb(1,"ion-select-option",22),c.ic(2,"Director"),c.Kb(),c.Lb(3,"ion-select-option",23),c.ic(4,"Productor"),c.Kb(),c.Lb(5,"ion-select-option",30),c.ic(6,"Escritor"),c.Kb(),c.Lb(7,"ion-select-option",25),c.ic(8,"Compositor"),c.Kb(),c.Lb(9,"ion-select-option",31),c.ic(10,"Actor"),c.Kb(),c.Kb())}function h(e,o){1&e&&(c.Lb(0,"div"),c.Lb(1,"ion-select-option",30),c.ic(2,"Escritor"),c.Kb(),c.Lb(3,"ion-select-option",19),c.ic(4,"Ilustrador"),c.Kb(),c.Lb(5,"ion-select-option",32),c.ic(6,"Mangaka"),c.Kb(),c.Kb())}function L(e,o){1&e&&(c.Lb(0,"ion-item",5),c.ic(1,"No hay personas a\xfan."),c.Kb())}function K(e,o){if(1&e){const e=c.Mb();c.Lb(0,"ion-item",5),c.Lb(1,"ion-chip"),c.Jb(2,"app-persona",33),c.Lb(3,"button",34),c.Tb("click",(function(){c.ec(e);const t=o.$implicit;return c.Vb().removePerson(t)})),c.ic(4,"x"),c.Kb(),c.Kb(),c.Kb()}if(2&e){const e=o.$implicit;c.yb(2),c.Zb("Names",e.Names),c.Zb("LastNames",e.LastNames),c.Zb("Role",e.Role)}}const v=[{path:"",component:(()=>{class e{constructor(e,o,t,i,s){this.http=e,this.navCtrl=o,this.route=t,this.router=i,this.formBuilder=s,this.peopleadded=[],this.isSubmitted=!1,this.formpeople=null,this.item=this.route.snapshot.params.item,this.type=this.route.snapshot.params.type,this.formpeople=new n.e({PersonID:new n.b,Names:new n.b,LastNames:new n.b,Role:new n.b}),this.getPersonList()}ngOnInit(){this.formpeople=this.formBuilder.group({PersonID:[null,n.n.required],Names:[null],LastNames:[null],Role:[null,n.n.required]})}ionViewWillEnter(){this.getPersonList()}getPersonList(){this.people=[],this.http.getPersonList().subscribe(e=>{this.people=e.body,this.people=this.people.filter(e=>e.CreatorUserID>0),console.log("People:",this.people)},e=>{console.error(e)})}addSelect(){if(this.isSubmitted=!0,!this.formpeople.valid)return console.log("Please provide all the required values!"),!1;if(this.formpeople.value.PersonID>0){if(console.log(this.formpeople.value.PersonID),!this.peopleadded.find(e=>e.PersonID==this.formpeople.value.PersonID&&e.Role==this.formpeople.value.Role)){var e=this.people.find(e=>e.PersonID==this.formpeople.value.PersonID);this.peopleadded.push({PersonID:e.PersonID,Names:e.Names,LastNames:e.LastNames,Role:this.formpeople.value.Role})}console.log("people:"+this.peopleadded)}this.formpeople.reset()}newPerson(){this.navCtrl.navigateForward("/create-person")}removePerson(e){this.peopleadded.splice(this.peopleadded.findIndex(o=>o===e),1),console.log("people:"+this.peopleadded)}get errorControl(){return this.formpeople.controls}compareFn(e,o){return e&&o?e.id===o.id:e===o}process(){this.peopleadded.forEach(e=>{this.http.addPersonToItem(e,this.item).subscribe(e=>{console.log("A\xf1adida persona ",e.body.PersonID)},e=>{console.log(e)})}),this.navCtrl.navigateForward("/item/"+this.type+"/"+this.item)}}return e.\u0275fac=function(o){return new(o||e)(c.Ib(a.a),c.Ib(s.U),c.Ib(r.a),c.Ib(r.g),c.Ib(n.a))},e.\u0275cmp=c.Cb({type:e,selectors:[["app-add-person"]],decls:37,vars:12,consts:[["color","primary"],["slot","start"],[3,"defaultHref"],["padding","",3,"fullscreen"],["novalidate","",3,"formGroup","ngSubmit"],["lines","full"],["position","stacked"],["okText","Aceptar","cancelText","Cancelar","interface","alert","placeholder","Seleccionar","formControlName","PersonID","type","text"],[3,"value",4,"ngFor","ngForOf"],[2,"color","red"],["okText","Aceptar","cancelText","Cancelar","interface","alert","placeholder","Seleccionar","formControlName","Role","type","text"],[4,"ngIf"],["shape","round","color","primary","type","submit"],["shape","round","color","primary",3,"click"],["lines","full",4,"ngIf"],["lines","full",4,"ngFor","ngForOf"],["expand","block","shape","round","color","primary",3,"click"],[3,"value"],["value","Autor"],["value","Ilustrador"],["value","Principal"],["value","Secundario"],["value","Director"],["value","Productor"],["value","Guionista"],["value","Compositor"],["value","Creador"],["value","Artista"],["value","Narrador"],["value","Presentador"],["value","Escritor"],["value","Actor"],["value","Mangaka"],[3,"Names","LastNames","Role"],["ion-button","",3,"click"]],template:function(e,o){1&e&&(c.Lb(0,"ion-header"),c.Lb(1,"ion-toolbar",0),c.Lb(2,"ion-buttons",1),c.Jb(3,"ion-back-button",2),c.Kb(),c.Lb(4,"ion-title"),c.ic(5,"Asignar persona/grupo"),c.Kb(),c.Kb(),c.Kb(),c.Lb(6,"ion-content",3),c.Lb(7,"ion-item"),c.Lb(8,"small"),c.ic(9,"Asigna al menos una persona/grupo al item:"),c.Kb(),c.Kb(),c.Lb(10,"form",4),c.Tb("ngSubmit",(function(){return o.addSelect()})),c.Lb(11,"ion-list"),c.Lb(12,"ion-item",5),c.Lb(13,"ion-label",6),c.ic(14,"Selecciona persona o grupo"),c.Kb(),c.Lb(15,"ion-select",7),c.hc(16,p,4,4,"ion-select-option",8),c.Kb(),c.Kb(),c.Lb(17,"ion-item",5),c.Lb(18,"ion-label",6),c.Lb(19,"span",9),c.ic(20,"*"),c.Kb(),c.ic(21,"Rol"),c.Kb(),c.Lb(22,"ion-select",10),c.hc(23,u,5,0,"div",11),c.hc(24,d,21,0,"div",11),c.hc(25,f,3,0,"div",11),c.hc(26,m,11,0,"div",11),c.hc(27,h,7,0,"div",11),c.Kb(),c.Kb(),c.Kb(),c.Lb(28,"ion-button",12),c.ic(29,"A\xf1adir"),c.Kb(),c.Lb(30,"ion-button",13),c.Tb("click",(function(){return o.newPerson()})),c.ic(31,"Nueva persona"),c.Kb(),c.Kb(),c.Lb(32,"ion-list"),c.hc(33,L,2,0,"ion-item",14),c.hc(34,K,5,3,"ion-item",15),c.Kb(),c.Lb(35,"ion-button",16),c.Tb("click",(function(){return o.process()})),c.ic(36,"Aceptar"),c.Kb(),c.Kb()),2&e&&(c.yb(3),c.bc("defaultHref","item/",o.type,"/",o.item,""),c.yb(3),c.Yb("fullscreen",!0),c.yb(4),c.Yb("formGroup",o.formpeople),c.yb(6),c.Yb("ngForOf",o.people),c.yb(7),c.Yb("ngIf","book"==o.type),c.yb(1),c.Yb("ngIf","video"==o.type),c.yb(1),c.Yb("ngIf","music"==o.type),c.yb(1),c.Yb("ngIf","game"==o.type),c.yb(1),c.Yb("ngIf","comic"==o.type),c.yb(6),c.Yb("ngIf",o.peopleadded.length<1),c.yb(1),c.Yb("ngForOf",o.peopleadded))},directives:[s.q,s.P,s.i,s.f,s.g,s.N,s.m,s.v,n.o,n.k,n.f,s.A,s.z,s.J,s.Z,n.j,n.d,i.h,i.i,s.h,s.K,s.k,l.a],styles:[""]}),e})()}];let g=(()=>{class e{}return e.\u0275mod=c.Gb({type:e}),e.\u0275inj=c.Fb({factory:function(o){return new(o||e)},imports:[[r.i.forChild(v)],r.i]}),e})();var y=t("j1ZV");let I=(()=>{class e{}return e.\u0275mod=c.Gb({type:e}),e.\u0275inj=c.Fb({factory:function(o){return new(o||e)},imports:[[i.b,n.g,n.l,s.Q,g,y.a]]}),e})()},cLkV:function(e,o,t){"use strict";t.d(o,"a",(function(){return l}));var i=t("fXoL"),n=t("ofXK");function s(e,o){if(1&e&&(i.Lb(0,"strong"),i.ic(1),i.Kb()),2&e){const e=i.Vb();i.yb(1),i.kc("",e.Role,": ")}}function r(e,o){if(1&e&&(i.Lb(0,"span"),i.ic(1),i.Kb()),2&e){const e=i.Vb();i.yb(1),i.jc(e.LastNames)}}function c(e,o){1&e&&(i.Lb(0,"span"),i.ic(1,", "),i.Kb())}function a(e,o){if(1&e&&(i.Lb(0,"span"),i.ic(1),i.Kb()),2&e){const e=i.Vb();i.yb(1),i.jc(e.Names)}}let l=(()=>{class e{constructor(){"Principal"!==this.Role&&"Secundario"!==this.Role||(this.Role="Actor "+this.Role.toLowerCase())}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=i.Cb({type:e,selectors:[["app-persona"]],inputs:{Names:"Names",LastNames:"LastNames",Role:"Role"},decls:4,vars:4,consts:[[4,"ngIf"]],template:function(e,o){1&e&&(i.hc(0,s,2,1,"strong",0),i.hc(1,r,2,1,"span",0),i.hc(2,c,2,0,"span",0),i.hc(3,a,2,1,"span",0)),2&e&&(i.Yb("ngIf",o.Role),i.yb(1),i.Yb("ngIf",o.LastNames),i.yb(1),i.Yb("ngIf",o.LastNames&&o.Names),i.yb(1),i.Yb("ngIf",o.Names))},directives:[n.i],styles:[""]}),e})()},j1ZV:function(e,o,t){"use strict";t.d(o,"a",(function(){return r}));var i=t("ofXK"),n=t("TEn/"),s=t("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Gb({type:e}),e.\u0275inj=s.Fb({factory:function(o){return new(o||e)},imports:[[i.b,n.Q]]}),e})()}}]);