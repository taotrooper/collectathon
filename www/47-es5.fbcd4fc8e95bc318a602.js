!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{"2M5B":function(n,i,o){"use strict";o.r(i),o.d(i,"EditItemPageModule",(function(){return K}));var r=o("ofXK"),l=o("3Pt+"),s=o("TEn/"),a=o("tyNb"),c=o("mrSG"),b=o("lNOt"),u=o("fXoL"),m=o("Epai");function p(e,t){1&e&&(u.Lb(0,"span",17),u.ic(1," Campo requerido. "),u.Kb())}function f(e,t){if(1&e&&(u.Lb(0,"ion-select-option",10),u.ic(1),u.Kb()),2&e){var n=t.$implicit;u.Yb("value",n.SeriesID),u.yb(1),u.kc(" ",n.SeriesName," ")}}function h(e,t){if(1&e&&(u.Lb(0,"ion-select-option",10),u.ic(1),u.Kb()),2&e){var n=t.$implicit;u.Yb("value",n.GenreID),u.yb(1),u.kc(" ",n.GenreName," ")}}function y(e,t){if(1&e&&(u.Lb(0,"ion-select-option",10),u.ic(1),u.Kb()),2&e){var n=t.$implicit;u.Yb("value",n.GenreID),u.yb(1),u.kc(" ",n.GenreName," ")}}function I(e,t){if(1&e&&(u.Lb(0,"ion-select-option",10),u.ic(1),u.Kb()),2&e){var n=t.$implicit;u.Yb("value",n.GenreID),u.yb(1),u.kc(" ",n.GenreName," ")}}var g,d,v,L=[{path:"",component:(g=function(){function n(t,i,o,r,s,a){e(this,n),this.http=t,this.navCtrl=i,this.modalController=o,this.route=r,this.router=s,this.formBuilder=a,this.item=null,this.NewSeries=null,this.isSubmitted=!1,this.ItemID=this.route.snapshot.params.id,this.item=this.formBuilder.group({ItemName:[null,l.n.required],SeriesID:[null],SeriesName:[null],GenreID1:[null],GenreID2:[null],GenreID3:[null]}),this.getSeriesList(),this.getItem(),console.log("type y typename: ",this.type," ",this.typeName)}var i,o,r;return i=n,(o=[{key:"getSeriesList",value:function(){var e=this;this.http.getSeriesList().subscribe((function(t){e.series=t.body,e.series=e.series.filter((function(e){return e.CreatorUserID>0})),console.log("Series:",e.series)}),(function(e){console.error(e)}))}},{key:"getGenreList",value:function(){var e=this;console.log("busco g\xe9neros de ",this.type),this.http.getGenreList(this.type).subscribe((function(t){e.genres=t.body,console.log("G\xe9neros ",e.genres)}),(function(e){console.error(e)}))}},{key:"getItem",value:function(){var e=this;this.http.getItem(this.ItemID).subscribe((function(t){e.item=e.formBuilder.group({ItemID:[t.ItemID],ItemName:[t.ItemName],SeriesID:[t.SeriesID],GenreID1:[t.GenreID1],GenreID2:[t.GenreID2],GenreID3:[t.GenreID3]}),e.ItemType=t.ItemType,e.type=e.http.getItemTypeURL(e.ItemType),e.typeName=e.http.getItemTypeName(e.type),console.log("todo: ",e.item),console.log(e.type),e.getGenreList()}),(function(e){console.error(e)}))}},{key:"ngOnInit",value:function(){}},{key:"goToNewSeries",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("P\xe1gina modal"),e.next=3,this.modalController.create({component:b.a,componentProps:{paramID:123}});case 3:return(t=e.sent).onDidDismiss().then((function(e){null!=e&&(n.series=[],n.NewSeries=e,console.log("New Series: ",n.NewSeries),n.getSeriesList())})),e.next=7,t.present();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"submitForm",value:function(){if(this.isSubmitted=!0,!this.item.valid)return console.log("Please provide all the required values!"),!1;console.log(this.item.value);var e=this.http.updateItem(this.item.value,this.ItemID);console.log("Resultado: ",e),this.navCtrl.navigateForward("/item/"+this.type+"/"+this.ItemID)}},{key:"errorControl",get:function(){return this.item.controls}}])&&t(i.prototype,o),r&&t(i,r),n}(),g.\u0275fac=function(e){return new(e||g)(u.Ib(m.a),u.Ib(s.U),u.Ib(s.T),u.Ib(a.a),u.Ib(a.g),u.Ib(l.a))},g.\u0275cmp=u.Cb({type:g,selectors:[["app-edit-item"]],decls:43,vars:18,consts:[["color","primary"],["slot","start"],[3,"defaultHref"],["padding","",3,"fullscreen"],["novalidate","",3,"formGroup","ngSubmit"],["lines","full"],["position","stacked"],["placeholder","Nombre","formControlName","ItemName","type","text","required","",3,"value"],["class","error ion-padding",4,"ngIf"],["okText","Aceptar","cancelText","Cancelar","interface","alert","placeholder","Seleccionar","formControlName","SeriesID","type","text",3,"value"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["small","",3,"click"],["okText","Aceptar","cancelText","Cancelar","interface","alert","placeholder","Seleccionar","formControlName","GenreID1","type","text",3,"value"],["okText","Aceptar","cancelText","Cancelar","interface","alert","placeholder","Seleccionar","formControlName","GenreID2","type","text",3,"value"],["okText","Aceptar","cancelText","Cancelar","interface","alert","placeholder","Seleccionar","formControlName","GenreID3","type","text",3,"value"],["small","","expand","inline","shape","round","color","primary","type","submit"],[1,"error","ion-padding"]],template:function(e,t){1&e&&(u.Lb(0,"ion-header"),u.Lb(1,"ion-toolbar",0),u.Lb(2,"ion-buttons",1),u.Jb(3,"ion-back-button",2),u.Kb(),u.Lb(4,"ion-title"),u.ic(5,"Editar item"),u.Kb(),u.Kb(),u.Kb(),u.Lb(6,"ion-content",3),u.Lb(7,"form",4),u.Tb("ngSubmit",(function(){return t.submitForm()})),u.Lb(8,"ion-list"),u.Lb(9,"ion-item",5),u.Lb(10,"ion-label",6),u.ic(11,"Nombre del item"),u.Kb(),u.Jb(12,"ion-input",7),u.hc(13,p,2,0,"span",8),u.Kb(),u.Lb(14,"ion-item",5),u.Lb(15,"ion-label",6),u.ic(16,"Serie"),u.Kb(),u.Lb(17,"ion-select",9),u.Lb(18,"ion-select-option",10),u.ic(19,"Ninguna"),u.Kb(),u.hc(20,f,2,2,"ion-select-option",11),u.Kb(),u.Lb(21,"ion-button",12),u.Tb("click",(function(){return t.goToNewSeries()})),u.ic(22,"Nueva serie..."),u.Kb(),u.Kb(),u.Lb(23,"ion-item",5),u.Lb(24,"ion-label",6),u.ic(25,"G\xe9neros (elige hasta 3)"),u.Kb(),u.Lb(26,"ion-select",13),u.Lb(27,"ion-select-option",10),u.ic(28,"Ninguno"),u.Kb(),u.hc(29,h,2,2,"ion-select-option",11),u.Kb(),u.Lb(30,"ion-select",14),u.Lb(31,"ion-select-option",10),u.ic(32,"Ninguno"),u.Kb(),u.hc(33,y,2,2,"ion-select-option",11),u.Kb(),u.Lb(34,"ion-select",15),u.Lb(35,"ion-select-option",10),u.ic(36,"Ninguno"),u.Kb(),u.hc(37,I,2,2,"ion-select-option",11),u.Kb(),u.Kb(),u.Kb(),u.Lb(38,"ion-grid"),u.Lb(39,"ion-row"),u.Lb(40,"ion-col"),u.Lb(41,"ion-button",16),u.ic(42,"Enviar"),u.Kb(),u.Kb(),u.Kb(),u.Kb(),u.Kb(),u.Kb()),2&e&&(u.yb(3),u.bc("defaultHref","/item/",t.type,"/",t.ItemID,""),u.yb(3),u.Yb("fullscreen",!0),u.yb(1),u.Yb("formGroup",t.item),u.yb(5),u.Yb("value",t.item.ItemName),u.yb(1),u.Yb("ngIf",t.isSubmitted&&(null==t.errorControl.ItemName.errors?null:t.errorControl.ItemName.errors.required)),u.yb(4),u.Zb("value",t.item.SeriesID),u.yb(1),u.Yb("value",null),u.yb(2),u.Yb("ngForOf",t.series),u.yb(6),u.Zb("value",t.item.GenreID1),u.yb(1),u.Yb("value",null),u.yb(2),u.Yb("ngForOf",t.genres),u.yb(1),u.Zb("value",t.item.GenreID2),u.yb(1),u.Yb("value",null),u.yb(2),u.Yb("ngForOf",t.genres),u.yb(1),u.Zb("value",t.item.GenreID3),u.yb(1),u.Yb("value",null),u.yb(2),u.Yb("ngForOf",t.genres))},directives:[s.q,s.P,s.i,s.f,s.g,s.N,s.m,l.o,l.k,l.f,s.A,s.v,s.z,s.u,s.ab,l.j,l.d,l.m,r.i,s.J,s.Z,s.K,r.h,s.h,s.p,s.F,s.l],styles:[""]}),g)}],N=((d=function t(){e(this,t)}).\u0275mod=u.Gb({type:d}),d.\u0275inj=u.Fb({factory:function(e){return new(e||d)},imports:[[a.i.forChild(L)],a.i]}),d),D=o("wk2u"),K=((v=function t(){e(this,t)}).\u0275mod=u.Gb({type:v}),v.\u0275inj=u.Fb({factory:function(e){return new(e||v)},imports:[[r.b,l.g,l.l,s.Q,N,D.CreateSeriesPageModule]]}),v)}}])}();