(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{GNsj:function(e,o,t){"use strict";t.r(o),t.d(o,"AddPersonPageModule",(function(){return k}));var i=t("ofXK"),n=t("3Pt+"),s=t("TEn/"),r=t("tyNb"),c=t("mrSG"),l=t("Q6yM"),a=t("fXoL"),b=t("Epai"),p=t("cLkV");function u(e,o){1&e&&(a.Lb(0,"span"),a.ic(1,", "),a.Kb())}function d(e,o){if(1&e&&(a.Lb(0,"ion-select-option",17),a.ic(1),a.hc(2,u,2,0,"span",11),a.ic(3),a.Kb()),2&e){const e=o.$implicit;a.Yb("value",e.PersonID),a.yb(1),a.kc(" ",e.LastNames,""),a.yb(1),a.Yb("ngIf",e.LastNames&&e.Names),a.yb(1),a.kc("",e.Names," ")}}function f(e,o){1&e&&(a.Lb(0,"div"),a.Lb(1,"ion-select-option",18),a.ic(2,"Autor"),a.Kb(),a.Lb(3,"ion-select-option",19),a.ic(4,"Ilustrador"),a.Kb(),a.Kb())}function m(e,o){1&e&&(a.Lb(0,"div"),a.Lb(1,"ion-select-option",20),a.ic(2,"Actor principal"),a.Kb(),a.Lb(3,"ion-select-option",21),a.ic(4,"Actor secundario"),a.Kb(),a.Lb(5,"ion-select-option",22),a.ic(6,"Director"),a.Kb(),a.Lb(7,"ion-select-option",23),a.ic(8,"Productor"),a.Kb(),a.Lb(9,"ion-select-option",24),a.ic(10,"Guionista"),a.Kb(),a.Lb(11,"ion-select-option",25),a.ic(12,"Compositor"),a.Kb(),a.Lb(13,"ion-select-option",26),a.ic(14,"Creador"),a.Kb(),a.Lb(15,"ion-select-option",27),a.ic(16,"Artista"),a.Kb(),a.Lb(17,"ion-select-option",28),a.ic(18,"Narrador"),a.Kb(),a.Lb(19,"ion-select-option",29),a.ic(20,"Presentador"),a.Kb(),a.Kb())}function h(e,o){1&e&&(a.Lb(0,"div"),a.Lb(1,"ion-select-option",27),a.ic(2,"Artista"),a.Kb(),a.Kb())}function L(e,o){1&e&&(a.Lb(0,"div"),a.Lb(1,"ion-select-option",22),a.ic(2,"Director"),a.Kb(),a.Lb(3,"ion-select-option",23),a.ic(4,"Productor"),a.Kb(),a.Lb(5,"ion-select-option",30),a.ic(6,"Escritor"),a.Kb(),a.Lb(7,"ion-select-option",25),a.ic(8,"Compositor"),a.Kb(),a.Lb(9,"ion-select-option",31),a.ic(10,"Actor"),a.Kb(),a.Kb())}function g(e,o){1&e&&(a.Lb(0,"div"),a.Lb(1,"ion-select-option",30),a.ic(2,"Escritor"),a.Kb(),a.Lb(3,"ion-select-option",19),a.ic(4,"Ilustrador"),a.Kb(),a.Lb(5,"ion-select-option",32),a.ic(6,"Mangaka"),a.Kb(),a.Kb())}function K(e,o){1&e&&(a.Lb(0,"ion-item",5),a.ic(1,"No hay personas a\xfan."),a.Kb())}function v(e,o){if(1&e){const e=a.Mb();a.Lb(0,"ion-item",5),a.Lb(1,"ion-chip"),a.Jb(2,"app-persona",33),a.Lb(3,"button",34),a.Tb("click",(function(){a.ec(e);const t=o.$implicit;return a.Vb().removePerson(t)})),a.ic(4,"x"),a.Kb(),a.Kb(),a.Kb()}if(2&e){const e=o.$implicit;a.yb(2),a.Zb("Names",e.Names),a.Zb("LastNames",e.LastNames),a.Zb("Role",e.Role)}}const y=[{path:"",component:(()=>{class e{constructor(e,o,t,i,s,r,c){this.http=e,this.navCtrl=o,this.route=t,this.router=i,this.modalController=s,this.formBuilder=r,this.changeRef=c,this.peopleadded=[],this.isSubmitted=!1,this.formpeople=null,this.item=this.route.snapshot.params.item,this.type=this.route.snapshot.params.type,this.formpeople=new n.e({PersonID:new n.b,Names:new n.b,LastNames:new n.b,Role:new n.b}),this.getPersonList()}ngOnInit(){this.formpeople=this.formBuilder.group({PersonID:[null,n.n.required],Names:[null],LastNames:[null],Role:[null,n.n.required]})}ionViewWillEnter(){this.getPersonList()}getPersonList(){this.people=[],this.http.getPersonList().subscribe(e=>{this.people=e.body,this.people=this.people.filter(e=>e.CreatorUserID>0),console.log("People:",this.people)},e=>{console.error(e)})}addSelect(){if(this.isSubmitted=!0,!this.formpeople.valid)return console.log("Please provide all the required values!"),!1;if(this.formpeople.value.PersonID>0){if(console.log(this.formpeople.value.PersonID),!this.peopleadded.find(e=>e.PersonID==this.formpeople.value.PersonID&&e.Role==this.formpeople.value.Role)){var e=this.people.find(e=>e.PersonID==this.formpeople.value.PersonID);this.peopleadded.push({PersonID:e.PersonID,Names:e.Names,LastNames:e.LastNames,Role:this.formpeople.value.Role})}console.log("people:"+this.peopleadded)}this.formpeople.reset()}newPerson(){return Object(c.a)(this,void 0,void 0,(function*(){console.log("P\xe1gina modal");const e=yield this.modalController.create({component:l.a,componentProps:{}});return e.onDidDismiss().then(e=>{null!=e&&(this.people=[],this.getPersonList(),this.changeRef.detectChanges())}),yield e.present()}))}removePerson(e){this.peopleadded.splice(this.peopleadded.findIndex(o=>o===e),1),console.log("people:"+this.peopleadded)}get errorControl(){return this.formpeople.controls}compareFn(e,o){return e&&o?e.id===o.id:e===o}process(){this.peopleadded.forEach(e=>{this.http.addPersonToItem(e,this.item).subscribe(e=>{console.log("A\xf1adida persona ",e.body.PersonID)},e=>{console.log(e)})}),this.navCtrl.navigateForward("/item/"+this.type+"/"+this.item)}}return e.\u0275fac=function(o){return new(o||e)(a.Ib(b.a),a.Ib(s.U),a.Ib(r.a),a.Ib(r.g),a.Ib(s.T),a.Ib(n.a),a.Ib(a.h))},e.\u0275cmp=a.Cb({type:e,selectors:[["app-add-person"]],decls:37,vars:12,consts:[["color","primary"],["slot","start"],[3,"defaultHref"],["padding","",3,"fullscreen"],["novalidate","",3,"formGroup","ngSubmit"],["lines","full"],["position","stacked"],["okText","Aceptar","cancelText","Cancelar","interface","alert","placeholder","Seleccionar","formControlName","PersonID","type","text"],[3,"value",4,"ngFor","ngForOf"],[2,"color","red"],["okText","Aceptar","cancelText","Cancelar","interface","alert","placeholder","Seleccionar","formControlName","Role","type","text"],[4,"ngIf"],["shape","round","color","primary","type","submit"],["shape","round","color","primary",3,"click"],["lines","full",4,"ngIf"],["lines","full",4,"ngFor","ngForOf"],["expand","block","shape","round","color","primary",3,"click"],[3,"value"],["value","Autor"],["value","Ilustrador"],["value","Principal"],["value","Secundario"],["value","Director"],["value","Productor"],["value","Guionista"],["value","Compositor"],["value","Creador"],["value","Artista"],["value","Narrador"],["value","Presentador"],["value","Escritor"],["value","Actor"],["value","Mangaka"],[3,"Names","LastNames","Role"],["ion-button","",3,"click"]],template:function(e,o){1&e&&(a.Lb(0,"ion-header"),a.Lb(1,"ion-toolbar",0),a.Lb(2,"ion-buttons",1),a.Jb(3,"ion-back-button",2),a.Kb(),a.Lb(4,"ion-title"),a.ic(5,"Asignar persona/grupo"),a.Kb(),a.Kb(),a.Kb(),a.Lb(6,"ion-content",3),a.Lb(7,"ion-item"),a.Lb(8,"small"),a.ic(9,"Asigna al menos una persona/grupo al item:"),a.Kb(),a.Kb(),a.Lb(10,"form",4),a.Tb("ngSubmit",(function(){return o.addSelect()})),a.Lb(11,"ion-list"),a.Lb(12,"ion-item",5),a.Lb(13,"ion-label",6),a.ic(14,"Selecciona persona o grupo"),a.Kb(),a.Lb(15,"ion-select",7),a.hc(16,d,4,4,"ion-select-option",8),a.Kb(),a.Kb(),a.Lb(17,"ion-item",5),a.Lb(18,"ion-label",6),a.Lb(19,"span",9),a.ic(20,"*"),a.Kb(),a.ic(21,"Rol"),a.Kb(),a.Lb(22,"ion-select",10),a.hc(23,f,5,0,"div",11),a.hc(24,m,21,0,"div",11),a.hc(25,h,3,0,"div",11),a.hc(26,L,11,0,"div",11),a.hc(27,g,7,0,"div",11),a.Kb(),a.Kb(),a.Kb(),a.Lb(28,"ion-button",12),a.ic(29,"A\xf1adir"),a.Kb(),a.Lb(30,"ion-button",13),a.Tb("click",(function(){return o.newPerson()})),a.ic(31,"Nueva persona"),a.Kb(),a.Kb(),a.Lb(32,"ion-list"),a.hc(33,K,2,0,"ion-item",14),a.hc(34,v,5,3,"ion-item",15),a.Kb(),a.Lb(35,"ion-button",16),a.Tb("click",(function(){return o.process()})),a.ic(36,"Aceptar"),a.Kb(),a.Kb()),2&e&&(a.yb(3),a.bc("defaultHref","item/",o.type,"/",o.item,""),a.yb(3),a.Yb("fullscreen",!0),a.yb(4),a.Yb("formGroup",o.formpeople),a.yb(6),a.Yb("ngForOf",o.people),a.yb(7),a.Yb("ngIf","book"==o.type),a.yb(1),a.Yb("ngIf","video"==o.type),a.yb(1),a.Yb("ngIf","music"==o.type),a.yb(1),a.Yb("ngIf","game"==o.type),a.yb(1),a.Yb("ngIf","comic"==o.type),a.yb(6),a.Yb("ngIf",o.peopleadded.length<1),a.yb(1),a.Yb("ngForOf",o.peopleadded))},directives:[s.q,s.P,s.i,s.f,s.g,s.N,s.m,s.v,n.o,n.k,n.f,s.A,s.z,s.J,s.Z,n.j,n.d,i.h,i.i,s.h,s.K,s.k,p.a],styles:[""]}),e})()}];let I=(()=>{class e{}return e.\u0275mod=a.Gb({type:e}),e.\u0275inj=a.Fb({factory:function(o){return new(o||e)},imports:[[r.i.forChild(y)],r.i]}),e})();var P=t("A409"),N=t("j1ZV");let k=(()=>{class e{}return e.\u0275mod=a.Gb({type:e}),e.\u0275inj=a.Fb({factory:function(o){return new(o||e)},imports:[[i.b,n.g,n.l,s.Q,I,P.CreatePersonPageModule,N.a]]}),e})()},cLkV:function(e,o,t){"use strict";t.d(o,"a",(function(){return a}));var i=t("fXoL"),n=t("ofXK");function s(e,o){if(1&e&&(i.Lb(0,"strong"),i.ic(1),i.Kb()),2&e){const e=i.Vb();i.yb(1),i.kc("",e.Role,": ")}}function r(e,o){if(1&e&&(i.Lb(0,"span"),i.ic(1),i.Kb()),2&e){const e=i.Vb();i.yb(1),i.jc(e.LastNames)}}function c(e,o){1&e&&(i.Lb(0,"span"),i.ic(1,", "),i.Kb())}function l(e,o){if(1&e&&(i.Lb(0,"span"),i.ic(1),i.Kb()),2&e){const e=i.Vb();i.yb(1),i.jc(e.Names)}}let a=(()=>{class e{constructor(){"Principal"!==this.Role&&"Secundario"!==this.Role||(this.Role="Actor "+this.Role.toLowerCase())}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=i.Cb({type:e,selectors:[["app-persona"]],inputs:{Names:"Names",LastNames:"LastNames",Role:"Role"},decls:4,vars:4,consts:[[4,"ngIf"]],template:function(e,o){1&e&&(i.hc(0,s,2,1,"strong",0),i.hc(1,r,2,1,"span",0),i.hc(2,c,2,0,"span",0),i.hc(3,l,2,1,"span",0)),2&e&&(i.Yb("ngIf",o.Role),i.yb(1),i.Yb("ngIf",o.LastNames),i.yb(1),i.Yb("ngIf",o.LastNames&&o.Names),i.yb(1),i.Yb("ngIf",o.Names))},directives:[n.i],styles:[""]}),e})()},j1ZV:function(e,o,t){"use strict";t.d(o,"a",(function(){return r}));var i=t("ofXK"),n=t("TEn/"),s=t("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Gb({type:e}),e.\u0275inj=s.Fb({factory:function(o){return new(o||e)},imports:[[i.b,n.Q]]}),e})()}}]);