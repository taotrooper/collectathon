!function(){function e(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function o(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function n(e,n,t){return n&&o(e.prototype,n),t&&o(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{GNsj:function(o,t,i){"use strict";i.r(t),i.d(t,"AddPersonPageModule",(function(){return D}));var r=i("ofXK"),s=i("3Pt+"),a=i("TEn/"),c=i("tyNb"),l=i("mrSG"),b=i("Q6yM"),u=i("fXoL"),p=i("Epai"),f=i("cLkV");function d(e,o){1&e&&(u.Lb(0,"span"),u.ic(1,", "),u.Kb())}function m(e,o){if(1&e&&(u.Lb(0,"ion-select-option",17),u.ic(1),u.hc(2,d,2,0,"span",11),u.ic(3),u.Kb()),2&e){var n=o.$implicit;u.Yb("value",n.PersonID),u.yb(1),u.kc(" ",n.LastNames,""),u.yb(1),u.Yb("ngIf",n.LastNames&&n.Names),u.yb(1),u.kc("",n.Names," ")}}function h(e,o){1&e&&(u.Lb(0,"div"),u.Lb(1,"ion-select-option",18),u.ic(2,"Autor"),u.Kb(),u.Lb(3,"ion-select-option",19),u.ic(4,"Ilustrador"),u.Kb(),u.Kb())}function v(e,o){1&e&&(u.Lb(0,"div"),u.Lb(1,"ion-select-option",20),u.ic(2,"Actor principal"),u.Kb(),u.Lb(3,"ion-select-option",21),u.ic(4,"Actor secundario"),u.Kb(),u.Lb(5,"ion-select-option",22),u.ic(6,"Director"),u.Kb(),u.Lb(7,"ion-select-option",23),u.ic(8,"Productor"),u.Kb(),u.Lb(9,"ion-select-option",24),u.ic(10,"Guionista"),u.Kb(),u.Lb(11,"ion-select-option",25),u.ic(12,"Compositor"),u.Kb(),u.Lb(13,"ion-select-option",26),u.ic(14,"Creador"),u.Kb(),u.Lb(15,"ion-select-option",27),u.ic(16,"Artista"),u.Kb(),u.Lb(17,"ion-select-option",28),u.ic(18,"Narrador"),u.Kb(),u.Lb(19,"ion-select-option",29),u.ic(20,"Presentador"),u.Kb(),u.Kb())}function L(e,o){1&e&&(u.Lb(0,"div"),u.Lb(1,"ion-select-option",27),u.ic(2,"Artista"),u.Kb(),u.Kb())}function y(e,o){1&e&&(u.Lb(0,"div"),u.Lb(1,"ion-select-option",22),u.ic(2,"Director"),u.Kb(),u.Lb(3,"ion-select-option",23),u.ic(4,"Productor"),u.Kb(),u.Lb(5,"ion-select-option",30),u.ic(6,"Escritor"),u.Kb(),u.Lb(7,"ion-select-option",25),u.ic(8,"Compositor"),u.Kb(),u.Lb(9,"ion-select-option",31),u.ic(10,"Actor"),u.Kb(),u.Kb())}function g(e,o){1&e&&(u.Lb(0,"div"),u.Lb(1,"ion-select-option",30),u.ic(2,"Escritor"),u.Kb(),u.Lb(3,"ion-select-option",19),u.ic(4,"Ilustrador"),u.Kb(),u.Lb(5,"ion-select-option",32),u.ic(6,"Mangaka"),u.Kb(),u.Kb())}function K(e,o){1&e&&(u.Lb(0,"ion-item",5),u.ic(1,"No hay personas a\xfan."),u.Kb())}function I(e,o){if(1&e){var n=u.Mb();u.Lb(0,"ion-item",5),u.Lb(1,"ion-chip"),u.Jb(2,"app-persona",33),u.Lb(3,"button",34),u.Tb("click",(function(){u.ec(n);var e=o.$implicit;return u.Vb().removePerson(e)})),u.ic(4,"x"),u.Kb(),u.Kb(),u.Kb()}if(2&e){var t=o.$implicit;u.yb(2),u.Zb("Names",t.Names),u.Zb("LastNames",t.LastNames),u.Zb("Role",t.Role)}}var P,N,k,w=[{path:"",component:(P=function(){function o(n,t,i,r,a,c,l){e(this,o),this.http=n,this.navCtrl=t,this.route=i,this.router=r,this.modalController=a,this.formBuilder=c,this.changeRef=l,this.peopleadded=[],this.isSubmitted=!1,this.formpeople=null,this.item=this.route.snapshot.params.item,this.type=this.route.snapshot.params.type,this.formpeople=new s.e({PersonID:new s.b,Names:new s.b,LastNames:new s.b,Role:new s.b}),this.getPersonList()}return n(o,[{key:"ngOnInit",value:function(){this.formpeople=this.formBuilder.group({PersonID:[null,s.n.required],Names:[null],LastNames:[null],Role:[null,s.n.required]})}},{key:"ionViewWillEnter",value:function(){this.getPersonList()}},{key:"getPersonList",value:function(){var e=this;this.people=[],this.http.getPersonList().subscribe((function(o){e.people=o.body,e.people=e.people.filter((function(e){return e.CreatorUserID>0})),console.log("People:",e.people)}),(function(e){console.error(e)}))}},{key:"addSelect",value:function(){var e=this;if(this.isSubmitted=!0,!this.formpeople.valid)return console.log("Please provide all the required values!"),!1;if(this.formpeople.value.PersonID>0){if(console.log(this.formpeople.value.PersonID),!this.peopleadded.find((function(o){return o.PersonID==e.formpeople.value.PersonID&&o.Role==e.formpeople.value.Role}))){var o=this.people.find((function(o){return o.PersonID==e.formpeople.value.PersonID}));this.peopleadded.push({PersonID:o.PersonID,Names:o.Names,LastNames:o.LastNames,Role:this.formpeople.value.Role})}console.log("people:"+this.peopleadded)}this.formpeople.reset()}},{key:"newPerson",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("P\xe1gina modal"),e.next=3,this.modalController.create({component:b.a,componentProps:{}});case 3:return(o=e.sent).onDidDismiss().then((function(e){null!=e&&(n.people=[],n.getPersonList(),n.changeRef.detectChanges())})),e.next=7,o.present();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"removePerson",value:function(e){this.peopleadded.splice(this.peopleadded.findIndex((function(o){return o===e})),1),console.log("people:"+this.peopleadded)}},{key:"compareFn",value:function(e,o){return e&&o?e.id===o.id:e===o}},{key:"process",value:function(){var e=this;this.peopleadded.forEach((function(o){e.http.addPersonToItem(o,e.item).subscribe((function(e){console.log("A\xf1adida persona ",e.body.PersonID)}),(function(e){console.log(e)}))})),this.navCtrl.navigateForward("/item/"+this.type+"/"+this.item)}},{key:"errorControl",get:function(){return this.formpeople.controls}}]),o}(),P.\u0275fac=function(e){return new(e||P)(u.Ib(p.a),u.Ib(a.U),u.Ib(c.a),u.Ib(c.g),u.Ib(a.T),u.Ib(s.a),u.Ib(u.h))},P.\u0275cmp=u.Cb({type:P,selectors:[["app-add-person"]],decls:37,vars:12,consts:[["color","primary"],["slot","start"],[3,"defaultHref"],["padding","",3,"fullscreen"],["novalidate","",3,"formGroup","ngSubmit"],["lines","full"],["position","stacked"],["okText","Aceptar","cancelText","Cancelar","interface","alert","placeholder","Seleccionar","formControlName","PersonID","type","text"],[3,"value",4,"ngFor","ngForOf"],[2,"color","red"],["okText","Aceptar","cancelText","Cancelar","interface","alert","placeholder","Seleccionar","formControlName","Role","type","text"],[4,"ngIf"],["shape","round","color","primary","type","submit"],["shape","round","color","primary",3,"click"],["lines","full",4,"ngIf"],["lines","full",4,"ngFor","ngForOf"],["expand","block","shape","round","color","primary",3,"click"],[3,"value"],["value","Autor"],["value","Ilustrador"],["value","Principal"],["value","Secundario"],["value","Director"],["value","Productor"],["value","Guionista"],["value","Compositor"],["value","Creador"],["value","Artista"],["value","Narrador"],["value","Presentador"],["value","Escritor"],["value","Actor"],["value","Mangaka"],[3,"Names","LastNames","Role"],["ion-button","",3,"click"]],template:function(e,o){1&e&&(u.Lb(0,"ion-header"),u.Lb(1,"ion-toolbar",0),u.Lb(2,"ion-buttons",1),u.Jb(3,"ion-back-button",2),u.Kb(),u.Lb(4,"ion-title"),u.ic(5,"Asignar persona/grupo"),u.Kb(),u.Kb(),u.Kb(),u.Lb(6,"ion-content",3),u.Lb(7,"ion-item"),u.Lb(8,"small"),u.ic(9,"Asigna al menos una persona/grupo al item:"),u.Kb(),u.Kb(),u.Lb(10,"form",4),u.Tb("ngSubmit",(function(){return o.addSelect()})),u.Lb(11,"ion-list"),u.Lb(12,"ion-item",5),u.Lb(13,"ion-label",6),u.ic(14,"Selecciona persona o grupo"),u.Kb(),u.Lb(15,"ion-select",7),u.hc(16,m,4,4,"ion-select-option",8),u.Kb(),u.Kb(),u.Lb(17,"ion-item",5),u.Lb(18,"ion-label",6),u.Lb(19,"span",9),u.ic(20,"*"),u.Kb(),u.ic(21,"Rol"),u.Kb(),u.Lb(22,"ion-select",10),u.hc(23,h,5,0,"div",11),u.hc(24,v,21,0,"div",11),u.hc(25,L,3,0,"div",11),u.hc(26,y,11,0,"div",11),u.hc(27,g,7,0,"div",11),u.Kb(),u.Kb(),u.Kb(),u.Lb(28,"ion-button",12),u.ic(29,"A\xf1adir"),u.Kb(),u.Lb(30,"ion-button",13),u.Tb("click",(function(){return o.newPerson()})),u.ic(31,"Nueva persona"),u.Kb(),u.Kb(),u.Lb(32,"ion-list"),u.hc(33,K,2,0,"ion-item",14),u.hc(34,I,5,3,"ion-item",15),u.Kb(),u.Lb(35,"ion-button",16),u.Tb("click",(function(){return o.process()})),u.ic(36,"Aceptar"),u.Kb(),u.Kb()),2&e&&(u.yb(3),u.bc("defaultHref","item/",o.type,"/",o.item,""),u.yb(3),u.Yb("fullscreen",!0),u.yb(4),u.Yb("formGroup",o.formpeople),u.yb(6),u.Yb("ngForOf",o.people),u.yb(7),u.Yb("ngIf","book"==o.type),u.yb(1),u.Yb("ngIf","video"==o.type),u.yb(1),u.Yb("ngIf","music"==o.type),u.yb(1),u.Yb("ngIf","game"==o.type),u.yb(1),u.Yb("ngIf","comic"==o.type),u.yb(6),u.Yb("ngIf",o.peopleadded.length<1),u.yb(1),u.Yb("ngForOf",o.peopleadded))},directives:[a.q,a.P,a.i,a.f,a.g,a.N,a.m,a.v,s.o,s.k,s.f,a.A,a.z,a.J,a.Z,s.j,s.d,r.h,r.i,a.h,a.K,a.k,f.a],styles:[""]}),P)}],R=((N=function o(){e(this,o)}).\u0275mod=u.Gb({type:N}),N.\u0275inj=u.Fb({factory:function(e){return new(e||N)},imports:[[c.i.forChild(w)],c.i]}),N),C=i("A409"),A=i("j1ZV"),D=((k=function o(){e(this,o)}).\u0275mod=u.Gb({type:k}),k.\u0275inj=u.Fb({factory:function(e){return new(e||k)},imports:[[r.b,s.g,s.l,a.Q,R,C.CreatePersonPageModule,A.a]]}),k)},cLkV:function(o,t,i){"use strict";i.d(t,"a",(function(){return u}));var r=i("fXoL"),s=i("ofXK");function a(e,o){if(1&e&&(r.Lb(0,"strong"),r.ic(1),r.Kb()),2&e){var n=r.Vb();r.yb(1),r.kc("",n.Role,": ")}}function c(e,o){if(1&e&&(r.Lb(0,"span"),r.ic(1),r.Kb()),2&e){var n=r.Vb();r.yb(1),r.jc(n.LastNames)}}function l(e,o){1&e&&(r.Lb(0,"span"),r.ic(1,", "),r.Kb())}function b(e,o){if(1&e&&(r.Lb(0,"span"),r.ic(1),r.Kb()),2&e){var n=r.Vb();r.yb(1),r.jc(n.Names)}}var u=function(){var o=function(){function o(){e(this,o),"Principal"!==this.Role&&"Secundario"!==this.Role||(this.Role="Actor "+this.Role.toLowerCase())}return n(o,[{key:"ngOnInit",value:function(){}}]),o}();return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=r.Cb({type:o,selectors:[["app-persona"]],inputs:{Names:"Names",LastNames:"LastNames",Role:"Role"},decls:4,vars:4,consts:[[4,"ngIf"]],template:function(e,o){1&e&&(r.hc(0,a,2,1,"strong",0),r.hc(1,c,2,1,"span",0),r.hc(2,l,2,0,"span",0),r.hc(3,b,2,1,"span",0)),2&e&&(r.Yb("ngIf",o.Role),r.yb(1),r.Yb("ngIf",o.LastNames),r.yb(1),r.Yb("ngIf",o.LastNames&&o.Names),r.yb(1),r.Yb("ngIf",o.Names))},directives:[s.i],styles:[""]}),o}()},j1ZV:function(o,n,t){"use strict";t.d(n,"a",(function(){return a}));var i=t("ofXK"),r=t("TEn/"),s=t("fXoL"),a=function(){var o=function o(){e(this,o)};return o.\u0275mod=s.Gb({type:o}),o.\u0275inj=s.Fb({factory:function(e){return new(e||o)},imports:[[i.b,r.Q]]}),o}()}}])}();