{"version":3,"sources":["./src/app/search/search.page.html","./src/app/search/search-routing.module.ts","./src/app/search/search.module.ts","./src/app/search/search.page.scss","./src/app/search/search.page.ts"],"names":[],"mappings":"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","file":"search-search-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"explore\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>Búsqueda avanzada</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding [fullscreen]=\\\"true\\\">\\n  <form [formGroup]=\\\"formcriteria\\\" (ngSubmit)=\\\"addCriteria()\\\" novalidate>\\n    <ion-list>\\n      <ion-item lines=\\\"full\\\">\\n        <ion-label position=\\\"stacked\\\">Selecciona tipo de ítem</ion-label>\\n        <ion-select okText=\\\"Aceptar\\\" cancelText=\\\"Cancelar\\\" interface=\\\"alert\\\" placeholder=\\\"Seleccionar\\\" \\n        formControlName=\\\"tipo\\\" type=\\\"text\\\" (ionChange)=\\\"changeType()\\\">\\n          <ion-select-option value=\\\"all\\\">Todos</ion-select-option>\\n          <ion-select-option value=\\\"book\\\">Libro</ion-select-option>\\n          <ion-select-option value=\\\"music\\\">Música</ion-select-option>\\n          <ion-select-option value=\\\"video\\\">Vídeo</ion-select-option>\\n          <ion-select-option value=\\\"game\\\">Videojuego</ion-select-option>\\n          <ion-select-option value=\\\"comic\\\">Comic</ion-select-option>\\n        </ion-select>\\n      </ion-item>\\n      <ion-item lines=\\\"full\\\">\\n        <small>Asigna al menos un criterio de búsqueda:</small>\\n      </ion-item>\\n      <ion-item lines=\\\"full\\\">\\n        <ion-select okText=\\\"Aceptar\\\" cancelText=\\\"Cancelar\\\" interface=\\\"alert\\\" placeholder=\\\"Campo\\\" \\n        formControlName=\\\"campo\\\" type=\\\"text\\\">\\n          <ion-select-option value=\\\"ItemName\\\">Título</ion-select-option>\\n          <ion-select-option value=\\\"Year\\\">Año de edición</ion-select-option>\\n          <ion-select-option value=\\\"EAN13\\\">EAN13</ion-select-option>\\n          <ion-select-option *ngFor=\\\"let d of campos2\\\" [value]=\\\"d.campo\\\">{{d.nombre}}</ion-select-option>\\n          <div *ngIf=\\\"formcriteria.value['tipo']=='book'\\\">\\n            <ion-select-option value=\\\"ISBN\\\">ISBN</ion-select-option>\\n            <ion-select-option value=\\\"Editorial\\\">Editorial</ion-select-option>\\n            <ion-select-option value=\\\"Idioma\\\">Idioma</ion-select-option>\\n            <ion-select-option value=\\\"Tipo\\\">Tipo (bolsillo, tapa dura, ebook...)</ion-select-option>\\n          </div>\\n          <div *ngIf=\\\"formcriteria.value['tipo']=='music'\\\">\\n            <ion-select-option value=\\\"Formato\\\">Formato (CD, vinilo, digital...)</ion-select-option>\\n            <ion-select-option value=\\\"Sello\\\">Sello</ion-select-option>\\n          </div>\\n          <div *ngIf=\\\"formcriteria.value['tipo']=='video'\\\">\\n            <ion-select-option value=\\\"FormatoVideo\\\">Formato (DVD, Bluray...)</ion-select-option>\\n            <ion-select-option value=\\\"TipoVideo\\\">Tipo (Película, serie...)</ion-select-option>\\n            <ion-select-option value=\\\"Sistema\\\">Sistema (PAL, NTSC...)</ion-select-option>\\n            <ion-select-option value=\\\"RegionVideo\\\">Región</ion-select-option>\\n            <ion-select-option value=\\\"Temporada\\\">Temporada</ion-select-option>\\n          </div>\\n          <div *ngIf=\\\"formcriteria.value['tipo']=='game'\\\">\\n            <ion-select-option value=\\\"Plataforma\\\">Plataforma/consola</ion-select-option>\\n            <ion-select-option value=\\\"FormatoJuego\\\">Formato (físico/digital...)</ion-select-option>\\n            <ion-select-option value=\\\"RegionJuego\\\">Región</ion-select-option>\\n            <ion-select-option value=\\\"Distribuidora\\\">Distribuidora</ion-select-option>\\n            <ion-select-option value=\\\"Estudio\\\">Estudio</ion-select-option>\\n          </div>\\n          <div *ngIf=\\\"formcriteria.value['tipo']=='comic'\\\">\\n            <ion-select-option value=\\\"TipoComic\\\">Tipo (grapas, tomo, omnibus)</ion-select-option>\\n            <ion-select-option value=\\\"Origen\\\">Origen (norteamericano, manga, europeo...</ion-select-option>\\n            <ion-select-option value=\\\"ISBNComic\\\">ISBN</ion-select-option>\\n            <ion-select-option value=\\\"EditorialComic\\\">Editorial</ion-select-option>\\n            <ion-select-option value=\\\"IdiomaComic\\\">Idioma</ion-select-option>\\n            <ion-select-option value=\\\"FormatoComic\\\">Formato (físico/digital)</ion-select-option>\\n            <ion-select-option value=\\\"NroComic\\\">Número</ion-select-option>\\n          </div>\\n        </ion-select>\\n        <ion-input placeholder=\\\"Valor\\\" formControlName=\\\"valor\\\" type=\\\"text\\\"></ion-input>\\n        <ion-button shape=\\\"round\\\" color=\\\"primary\\\" type=\\\"submit\\\">Añadir</ion-button>\\n      </ion-item>\\n    <ion-item lines=\\\"full\\\" *ngIf=\\\"criteria.length<1\\\">No hay criterios de búsqueda.</ion-item>\\n    <ion-item lines=\\\"full\\\" *ngIf=\\\"criteria.length>=1\\\">\\n      <ion-chip *ngFor=\\\"let a of criteria\\\">{{a.campo}} = {{a.valor}}<button ion-button (click)=\\\"removeCriteria(a)\\\">x</button></ion-chip>\\n    </ion-item>\\n  </ion-list>\\n  <ion-button expand=\\\"block\\\" shape=\\\"round\\\" color=\\\"primary\\\" (click)=\\\"process()\\\">Aceptar</ion-button>\\n  <ion-list *ngIf=\\\"numres!==null\\\">\\n    <ion-item lines=\\\"full\\\"><small>Mostrando {{numres}} resultados.</small></ion-item>\\n    <ion-item-sliding *ngFor=\\\"let ed of items\\\">\\n      <app-edition-list [ed]=\\\"ed\\\"></app-edition-list>\\n    </ion-item-sliding>\\n  </ion-list>\\n</form>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SearchPage } from './search.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SearchPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SearchPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SearchPageRoutingModule } from './search-routing.module';\n\nimport { SearchPage } from './search.page';\nimport { ComponentsModule } from '../components/components.module'\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    ComponentsModule,\n    SearchPageRoutingModule\n  ],\n  declarations: [SearchPage]\n})\nexport class SearchPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NlYXJjaC9zZWFyY2gucGFnZS5zY3NzIn0= */\";","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute, NavigationExtras } from '@angular/router';\nimport { NavController } from '@ionic/angular';\nimport { ApiRestService } from '../api-rest.service';\nimport { FormGroup, FormControl, FormBuilder, Validators } from \"@angular/forms\";\nimport { findIndex } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.page.html',\n  styleUrls: ['./search.page.scss'],\n})\nexport class SearchPage implements OnInit {\n\n  items: any[];\n  type: any;\n  criteria: any[] = [];\n  numres = null;\n  isSubmitted = false;\n  formcriteria = null;\n\n  constructor(public http: ApiRestService, private navCtrl: NavController, private route: ActivatedRoute, \n    private router: Router, private formBuilder: FormBuilder) {\n      this.formcriteria= new FormGroup({\n        tipo: new FormControl,\n        campo: new FormControl(),\n        valor: new FormControl()\n     });\n  }\n\n  ngOnInit() {\n    this.formcriteria = this.formBuilder.group({\n      'tipo' : [null],\n      'campo' : [null, Validators.required],\n      'valor' : [null, Validators.required]\n    });\n  }\n\n  addCriteria() {\n    this.isSubmitted = true;\n    if (!this.formcriteria.valid) {\n      console.log('Please provide all the required values!')\n      return false;\n    } else if(this.formcriteria.value['valor']) {\n      var i = this.criteria.find(e => e['campo'] === this.formcriteria.value['campo']);\n      if(!i) {\n        var p = {\n          \"campo\": this.formcriteria.value['campo'],\n          \"valor\": this.formcriteria.value['valor']\n        };\n        this.criteria.push(p);\n      } else {\n        i['valor'] = this.formcriteria.value['valor'];\n      }\n      console.log(\"criteria:\"+this.criteria);\n    }\n  }\n\n  removeCriteria(a: any) {\n    this.criteria.splice(this.criteria.findIndex(e => e === a), 1);\n    console.log(\"people:\"+this.criteria);\n  }\n\n  changeType() {\n    if(this.criteria.find(o => o['campo'] === \"ItemType\")) {\n      this.criteria.splice(this.criteria.findIndex(o => o['campo'] === \"ItemType\"), 1);\n    }\n    if(this.formcriteria.value['tipo']!==\"all\") {\n      var p = {\n        \"campo\": \"ItemType\",\n        \"valor\": this.http.getItemType(this.formcriteria.value['tipo'])\n      };\n      this.criteria.push(p);\n    }\n  }\n\n  get errorControl() {\n    return this.formcriteria.controls;\n  }\n\n  compareFn(e1: any, e2: any): boolean {\n    return e1 && e2 ? e1.id === e2.id : e1 === e2;\n  }\n\n  process() {\n    var c = {\"body\": this.criteria};\n    console.log(\"c \",c);\n    this.http.searchEditions(c).subscribe(\n      (res) => { \n        this.items = res['body']['body'];\n        this.numres = res['itemCount'] || res['body']['itemCount'];\n        console.log(this.numres);\n      },\n      (error) =>{\n        console.error(error);\n        this.numres = 0;\n      }\n    );\n  }\n\n}\n"],"sourceRoot":"webpack:///"}