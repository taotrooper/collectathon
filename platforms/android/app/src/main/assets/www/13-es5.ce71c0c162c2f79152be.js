!function(){function e(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function o(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function n(e,n,t){return n&&o(e.prototype,n),t&&o(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{GNsj:function(o,t,i){"use strict";i.r(t),i.d(t,"AddPersonPageModule",(function(){return A}));var r=i("ofXK"),s=i("3Pt+"),a=i("TEn/"),c=i("tyNb"),l=i("fXoL"),b=i("Epai"),p=i("cLkV");function u(e,o){1&e&&(l.Lb(0,"span"),l.ic(1,", "),l.Kb())}function f(e,o){if(1&e&&(l.Lb(0,"ion-select-option",17),l.ic(1),l.hc(2,u,2,0,"span",11),l.ic(3),l.Kb()),2&e){var n=o.$implicit;l.Yb("value",n.PersonID),l.yb(1),l.kc(" ",n.LastNames,""),l.yb(1),l.Yb("ngIf",n.LastNames&&n.Names),l.yb(1),l.kc("",n.Names," ")}}function d(e,o){1&e&&(l.Lb(0,"div"),l.Lb(1,"ion-select-option",18),l.ic(2,"Autor"),l.Kb(),l.Lb(3,"ion-select-option",19),l.ic(4,"Ilustrador"),l.Kb(),l.Kb())}function m(e,o){1&e&&(l.Lb(0,"div"),l.Lb(1,"ion-select-option",20),l.ic(2,"Actor principal"),l.Kb(),l.Lb(3,"ion-select-option",21),l.ic(4,"Actor secundario"),l.Kb(),l.Lb(5,"ion-select-option",22),l.ic(6,"Director"),l.Kb(),l.Lb(7,"ion-select-option",23),l.ic(8,"Productor"),l.Kb(),l.Lb(9,"ion-select-option",24),l.ic(10,"Guionista"),l.Kb(),l.Lb(11,"ion-select-option",25),l.ic(12,"Compositor"),l.Kb(),l.Lb(13,"ion-select-option",26),l.ic(14,"Creador"),l.Kb(),l.Lb(15,"ion-select-option",27),l.ic(16,"Artista"),l.Kb(),l.Lb(17,"ion-select-option",28),l.ic(18,"Narrador"),l.Kb(),l.Lb(19,"ion-select-option",29),l.ic(20,"Presentador"),l.Kb(),l.Kb())}function h(e,o){1&e&&(l.Lb(0,"div"),l.Lb(1,"ion-select-option",27),l.ic(2,"Artista"),l.Kb(),l.Kb())}function v(e,o){1&e&&(l.Lb(0,"div"),l.Lb(1,"ion-select-option",22),l.ic(2,"Director"),l.Kb(),l.Lb(3,"ion-select-option",23),l.ic(4,"Productor"),l.Kb(),l.Lb(5,"ion-select-option",30),l.ic(6,"Escritor"),l.Kb(),l.Lb(7,"ion-select-option",25),l.ic(8,"Compositor"),l.Kb(),l.Lb(9,"ion-select-option",31),l.ic(10,"Actor"),l.Kb(),l.Kb())}function L(e,o){1&e&&(l.Lb(0,"div"),l.Lb(1,"ion-select-option",30),l.ic(2,"Escritor"),l.Kb(),l.Lb(3,"ion-select-option",19),l.ic(4,"Ilustrador"),l.Kb(),l.Lb(5,"ion-select-option",32),l.ic(6,"Mangaka"),l.Kb(),l.Kb())}function y(e,o){1&e&&(l.Lb(0,"ion-item",5),l.ic(1,"No hay personas a\xfan."),l.Kb())}function K(e,o){if(1&e){var n=l.Mb();l.Lb(0,"ion-item",5),l.Lb(1,"ion-chip"),l.Jb(2,"app-persona",33),l.Lb(3,"button",34),l.Tb("click",(function(){l.ec(n);var e=o.$implicit;return l.Vb().removePerson(e)})),l.ic(4,"x"),l.Kb(),l.Kb(),l.Kb()}if(2&e){var t=o.$implicit;l.yb(2),l.Zb("Names",t.Names),l.Zb("LastNames",t.LastNames),l.Zb("Role",t.Role)}}var g,I,N,P=[{path:"",component:(g=function(){function o(n,t,i,r,a){e(this,o),this.http=n,this.navCtrl=t,this.route=i,this.router=r,this.formBuilder=a,this.peopleadded=[],this.isSubmitted=!1,this.formpeople=null,this.item=this.route.snapshot.params.item,this.type=this.route.snapshot.params.type,this.formpeople=new s.e({PersonID:new s.b,Names:new s.b,LastNames:new s.b,Role:new s.b}),this.getPersonList()}return n(o,[{key:"ngOnInit",value:function(){this.formpeople=this.formBuilder.group({PersonID:[null,s.n.required],Names:[null],LastNames:[null],Role:[null,s.n.required]})}},{key:"ionViewWillEnter",value:function(){this.getPersonList()}},{key:"getPersonList",value:function(){var e=this;this.people=[],this.http.getPersonList().subscribe((function(o){e.people=o.body,e.people=e.people.filter((function(e){return e.CreatorUserID>0})),console.log("People:",e.people)}),(function(e){console.error(e)}))}},{key:"addSelect",value:function(){var e=this;if(this.isSubmitted=!0,!this.formpeople.valid)return console.log("Please provide all the required values!"),!1;if(this.formpeople.value.PersonID>0){if(console.log(this.formpeople.value.PersonID),!this.peopleadded.find((function(o){return o.PersonID==e.formpeople.value.PersonID&&o.Role==e.formpeople.value.Role}))){var o=this.people.find((function(o){return o.PersonID==e.formpeople.value.PersonID}));this.peopleadded.push({PersonID:o.PersonID,Names:o.Names,LastNames:o.LastNames,Role:this.formpeople.value.Role})}console.log("people:"+this.peopleadded)}this.formpeople.reset()}},{key:"newPerson",value:function(){this.navCtrl.navigateForward("/create-person")}},{key:"removePerson",value:function(e){this.peopleadded.splice(this.peopleadded.findIndex((function(o){return o===e})),1),console.log("people:"+this.peopleadded)}},{key:"compareFn",value:function(e,o){return e&&o?e.id===o.id:e===o}},{key:"process",value:function(){var e=this;this.peopleadded.forEach((function(o){e.http.addPersonToItem(o,e.item).subscribe((function(e){console.log("A\xf1adida persona ",e.body.PersonID)}),(function(e){console.log(e)}))})),this.navCtrl.navigateForward("/item/"+this.type+"/"+this.item)}},{key:"errorControl",get:function(){return this.formpeople.controls}}]),o}(),g.\u0275fac=function(e){return new(e||g)(l.Ib(b.a),l.Ib(a.U),l.Ib(c.a),l.Ib(c.g),l.Ib(s.a))},g.\u0275cmp=l.Cb({type:g,selectors:[["app-add-person"]],decls:37,vars:12,consts:[["color","primary"],["slot","start"],[3,"defaultHref"],["padding","",3,"fullscreen"],["novalidate","",3,"formGroup","ngSubmit"],["lines","full"],["position","stacked"],["okText","Aceptar","cancelText","Cancelar","interface","alert","placeholder","Seleccionar","formControlName","PersonID","type","text"],[3,"value",4,"ngFor","ngForOf"],[2,"color","red"],["okText","Aceptar","cancelText","Cancelar","interface","alert","placeholder","Seleccionar","formControlName","Role","type","text"],[4,"ngIf"],["shape","round","color","primary","type","submit"],["shape","round","color","primary",3,"click"],["lines","full",4,"ngIf"],["lines","full",4,"ngFor","ngForOf"],["expand","block","shape","round","color","primary",3,"click"],[3,"value"],["value","Autor"],["value","Ilustrador"],["value","Principal"],["value","Secundario"],["value","Director"],["value","Productor"],["value","Guionista"],["value","Compositor"],["value","Creador"],["value","Artista"],["value","Narrador"],["value","Presentador"],["value","Escritor"],["value","Actor"],["value","Mangaka"],[3,"Names","LastNames","Role"],["ion-button","",3,"click"]],template:function(e,o){1&e&&(l.Lb(0,"ion-header"),l.Lb(1,"ion-toolbar",0),l.Lb(2,"ion-buttons",1),l.Jb(3,"ion-back-button",2),l.Kb(),l.Lb(4,"ion-title"),l.ic(5,"Asignar persona/grupo"),l.Kb(),l.Kb(),l.Kb(),l.Lb(6,"ion-content",3),l.Lb(7,"ion-item"),l.Lb(8,"small"),l.ic(9,"Asigna al menos una persona/grupo al item:"),l.Kb(),l.Kb(),l.Lb(10,"form",4),l.Tb("ngSubmit",(function(){return o.addSelect()})),l.Lb(11,"ion-list"),l.Lb(12,"ion-item",5),l.Lb(13,"ion-label",6),l.ic(14,"Selecciona persona o grupo"),l.Kb(),l.Lb(15,"ion-select",7),l.hc(16,f,4,4,"ion-select-option",8),l.Kb(),l.Kb(),l.Lb(17,"ion-item",5),l.Lb(18,"ion-label",6),l.Lb(19,"span",9),l.ic(20,"*"),l.Kb(),l.ic(21,"Rol"),l.Kb(),l.Lb(22,"ion-select",10),l.hc(23,d,5,0,"div",11),l.hc(24,m,21,0,"div",11),l.hc(25,h,3,0,"div",11),l.hc(26,v,11,0,"div",11),l.hc(27,L,7,0,"div",11),l.Kb(),l.Kb(),l.Kb(),l.Lb(28,"ion-button",12),l.ic(29,"A\xf1adir"),l.Kb(),l.Lb(30,"ion-button",13),l.Tb("click",(function(){return o.newPerson()})),l.ic(31,"Nueva persona"),l.Kb(),l.Kb(),l.Lb(32,"ion-list"),l.hc(33,y,2,0,"ion-item",14),l.hc(34,K,5,3,"ion-item",15),l.Kb(),l.Lb(35,"ion-button",16),l.Tb("click",(function(){return o.process()})),l.ic(36,"Aceptar"),l.Kb(),l.Kb()),2&e&&(l.yb(3),l.bc("defaultHref","item/",o.type,"/",o.item,""),l.yb(3),l.Yb("fullscreen",!0),l.yb(4),l.Yb("formGroup",o.formpeople),l.yb(6),l.Yb("ngForOf",o.people),l.yb(7),l.Yb("ngIf","book"==o.type),l.yb(1),l.Yb("ngIf","video"==o.type),l.yb(1),l.Yb("ngIf","music"==o.type),l.yb(1),l.Yb("ngIf","game"==o.type),l.yb(1),l.Yb("ngIf","comic"==o.type),l.yb(6),l.Yb("ngIf",o.peopleadded.length<1),l.yb(1),l.Yb("ngForOf",o.peopleadded))},directives:[a.q,a.P,a.i,a.f,a.g,a.N,a.m,a.v,s.o,s.k,s.f,a.A,a.z,a.J,a.Z,s.j,s.d,r.h,r.i,a.h,a.K,a.k,p.a],styles:[""]}),g)}],k=((I=function o(){e(this,o)}).\u0275mod=l.Gb({type:I}),I.\u0275inj=l.Fb({factory:function(e){return new(e||I)},imports:[[c.i.forChild(P)],c.i]}),I),w=i("j1ZV"),A=((N=function o(){e(this,o)}).\u0275mod=l.Gb({type:N}),N.\u0275inj=l.Fb({factory:function(e){return new(e||N)},imports:[[r.b,s.g,s.l,a.Q,k,w.a]]}),N)},cLkV:function(o,t,i){"use strict";i.d(t,"a",(function(){return p}));var r=i("fXoL"),s=i("ofXK");function a(e,o){if(1&e&&(r.Lb(0,"strong"),r.ic(1),r.Kb()),2&e){var n=r.Vb();r.yb(1),r.kc("",n.Role,": ")}}function c(e,o){if(1&e&&(r.Lb(0,"span"),r.ic(1),r.Kb()),2&e){var n=r.Vb();r.yb(1),r.jc(n.LastNames)}}function l(e,o){1&e&&(r.Lb(0,"span"),r.ic(1,", "),r.Kb())}function b(e,o){if(1&e&&(r.Lb(0,"span"),r.ic(1),r.Kb()),2&e){var n=r.Vb();r.yb(1),r.jc(n.Names)}}var p=function(){var o=function(){function o(){e(this,o),"Principal"!==this.Role&&"Secundario"!==this.Role||(this.Role="Actor "+this.Role.toLowerCase())}return n(o,[{key:"ngOnInit",value:function(){}}]),o}();return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=r.Cb({type:o,selectors:[["app-persona"]],inputs:{Names:"Names",LastNames:"LastNames",Role:"Role"},decls:4,vars:4,consts:[[4,"ngIf"]],template:function(e,o){1&e&&(r.hc(0,a,2,1,"strong",0),r.hc(1,c,2,1,"span",0),r.hc(2,l,2,0,"span",0),r.hc(3,b,2,1,"span",0)),2&e&&(r.Yb("ngIf",o.Role),r.yb(1),r.Yb("ngIf",o.LastNames),r.yb(1),r.Yb("ngIf",o.LastNames&&o.Names),r.yb(1),r.Yb("ngIf",o.Names))},directives:[s.i],styles:[""]}),o}()},j1ZV:function(o,n,t){"use strict";t.d(n,"a",(function(){return a}));var i=t("ofXK"),r=t("TEn/"),s=t("fXoL"),a=function(){var o=function o(){e(this,o)};return o.\u0275mod=s.Gb({type:o}),o.\u0275inj=s.Fb({factory:function(e){return new(e||o)},imports:[[i.b,r.Q]]}),o}()}}])}();