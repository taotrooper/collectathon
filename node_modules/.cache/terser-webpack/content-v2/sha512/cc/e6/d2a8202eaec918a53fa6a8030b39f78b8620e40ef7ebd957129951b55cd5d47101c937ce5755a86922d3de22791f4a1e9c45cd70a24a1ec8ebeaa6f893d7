{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{GNsj:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"AddPersonPageModule\",(function(){return add_person_module_AddPersonPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),ionic_angular=__webpack_require__(\"TEn/\"),fesm2015_router=__webpack_require__(\"tyNb\"),core=__webpack_require__(\"fXoL\"),api_rest_service=__webpack_require__(\"Epai\"),persona_component=__webpack_require__(\"cLkV\");function AddPersonPage_ion_select_option_16_span_2_Template(rf,ctx){1&rf&&(core.Lb(0,\"span\"),core.ic(1,\", \"),core.Kb())}function AddPersonPage_ion_select_option_16_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-select-option\",17),core.ic(1),core.hc(2,AddPersonPage_ion_select_option_16_span_2_Template,2,0,\"span\",11),core.ic(3),core.Kb()),2&rf){const p_r8=ctx.$implicit;core.Yb(\"value\",p_r8.PersonID),core.yb(1),core.kc(\" \",p_r8.LastNames,\"\"),core.yb(1),core.Yb(\"ngIf\",p_r8.LastNames&&p_r8.Names),core.yb(1),core.kc(\"\",p_r8.Names,\" \")}}function AddPersonPage_div_23_Template(rf,ctx){1&rf&&(core.Lb(0,\"div\"),core.Lb(1,\"ion-select-option\",18),core.ic(2,\"Autor\"),core.Kb(),core.Lb(3,\"ion-select-option\",19),core.ic(4,\"Ilustrador\"),core.Kb(),core.Kb())}function AddPersonPage_div_24_Template(rf,ctx){1&rf&&(core.Lb(0,\"div\"),core.Lb(1,\"ion-select-option\",20),core.ic(2,\"Actor principal\"),core.Kb(),core.Lb(3,\"ion-select-option\",21),core.ic(4,\"Actor secundario\"),core.Kb(),core.Lb(5,\"ion-select-option\",22),core.ic(6,\"Director\"),core.Kb(),core.Lb(7,\"ion-select-option\",23),core.ic(8,\"Productor\"),core.Kb(),core.Lb(9,\"ion-select-option\",24),core.ic(10,\"Guionista\"),core.Kb(),core.Lb(11,\"ion-select-option\",25),core.ic(12,\"Compositor\"),core.Kb(),core.Lb(13,\"ion-select-option\",26),core.ic(14,\"Creador\"),core.Kb(),core.Lb(15,\"ion-select-option\",27),core.ic(16,\"Artista\"),core.Kb(),core.Lb(17,\"ion-select-option\",28),core.ic(18,\"Narrador\"),core.Kb(),core.Lb(19,\"ion-select-option\",29),core.ic(20,\"Presentador\"),core.Kb(),core.Kb())}function AddPersonPage_div_25_Template(rf,ctx){1&rf&&(core.Lb(0,\"div\"),core.Lb(1,\"ion-select-option\",27),core.ic(2,\"Artista\"),core.Kb(),core.Kb())}function AddPersonPage_div_26_Template(rf,ctx){1&rf&&(core.Lb(0,\"div\"),core.Lb(1,\"ion-select-option\",22),core.ic(2,\"Director\"),core.Kb(),core.Lb(3,\"ion-select-option\",23),core.ic(4,\"Productor\"),core.Kb(),core.Lb(5,\"ion-select-option\",30),core.ic(6,\"Escritor\"),core.Kb(),core.Lb(7,\"ion-select-option\",25),core.ic(8,\"Compositor\"),core.Kb(),core.Lb(9,\"ion-select-option\",31),core.ic(10,\"Actor\"),core.Kb(),core.Kb())}function AddPersonPage_div_27_Template(rf,ctx){1&rf&&(core.Lb(0,\"div\"),core.Lb(1,\"ion-select-option\",30),core.ic(2,\"Escritor\"),core.Kb(),core.Lb(3,\"ion-select-option\",19),core.ic(4,\"Ilustrador\"),core.Kb(),core.Lb(5,\"ion-select-option\",32),core.ic(6,\"Mangaka\"),core.Kb(),core.Kb())}function AddPersonPage_ion_item_33_Template(rf,ctx){1&rf&&(core.Lb(0,\"ion-item\",5),core.ic(1,\"No hay personas aún.\"),core.Kb())}function AddPersonPage_ion_item_34_Template(rf,ctx){if(1&rf){const _r12=core.Mb();core.Lb(0,\"ion-item\",5),core.Lb(1,\"ion-chip\"),core.Jb(2,\"app-persona\",33),core.Lb(3,\"button\",34),core.Tb(\"click\",(function(){core.ec(_r12);const a_r10=ctx.$implicit;return core.Vb().removePerson(a_r10)})),core.ic(4,\"x\"),core.Kb(),core.Kb(),core.Kb()}if(2&rf){const a_r10=ctx.$implicit;core.yb(2),core.Zb(\"Names\",a_r10.Names),core.Zb(\"LastNames\",a_r10.LastNames),core.Zb(\"Role\",a_r10.Role)}}const routes=[{path:\"\",component:(()=>{class AddPersonPage{constructor(http,navCtrl,route,router,formBuilder){this.http=http,this.navCtrl=navCtrl,this.route=route,this.router=router,this.formBuilder=formBuilder,this.peopleadded=[],this.isSubmitted=!1,this.formpeople=null,this.item=this.route.snapshot.params.item,this.type=this.route.snapshot.params.type,this.formpeople=new fesm2015_forms.e({PersonID:new fesm2015_forms.b,Names:new fesm2015_forms.b,LastNames:new fesm2015_forms.b,Role:new fesm2015_forms.b}),this.getPersonList()}ngOnInit(){this.formpeople=this.formBuilder.group({PersonID:[null,fesm2015_forms.n.required],Names:[null],LastNames:[null],Role:[null,fesm2015_forms.n.required]})}ionViewWillEnter(){this.getPersonList()}getPersonList(){this.people=[],this.http.getPersonList().subscribe(res=>{this.people=res.body,this.people=this.people.filter(o=>o.CreatorUserID>0),console.log(\"People:\",this.people)},error=>{console.error(error)})}addSelect(){if(this.isSubmitted=!0,!this.formpeople.valid)return console.log(\"Please provide all the required values!\"),!1;if(this.formpeople.value.PersonID>0){if(console.log(this.formpeople.value.PersonID),!this.peopleadded.find(e=>e.PersonID==this.formpeople.value.PersonID&&e.Role==this.formpeople.value.Role)){var e=this.people.find(e=>e.PersonID==this.formpeople.value.PersonID);this.peopleadded.push({PersonID:e.PersonID,Names:e.Names,LastNames:e.LastNames,Role:this.formpeople.value.Role})}console.log(\"people:\"+this.peopleadded)}this.formpeople.reset()}newPerson(){this.navCtrl.navigateForward(\"/create-person\")}removePerson(a){this.peopleadded.splice(this.peopleadded.findIndex(e=>e===a),1),console.log(\"people:\"+this.peopleadded)}get errorControl(){return this.formpeople.controls}compareFn(e1,e2){return e1&&e2?e1.id===e2.id:e1===e2}process(){this.peopleadded.forEach(p=>{this.http.addPersonToItem(p,this.item).subscribe(data=>{console.log(\"Añadida persona \",data.body.PersonID)},error=>{console.log(error)})}),this.navCtrl.navigateForward(\"/item/\"+this.type+\"/\"+this.item)}}return AddPersonPage.ɵfac=function(t){return new(t||AddPersonPage)(core.Ib(api_rest_service.a),core.Ib(ionic_angular.U),core.Ib(fesm2015_router.a),core.Ib(fesm2015_router.g),core.Ib(fesm2015_forms.a))},AddPersonPage.ɵcmp=core.Cb({type:AddPersonPage,selectors:[[\"app-add-person\"]],decls:37,vars:12,consts:[[\"color\",\"primary\"],[\"slot\",\"start\"],[3,\"defaultHref\"],[\"padding\",\"\",3,\"fullscreen\"],[\"novalidate\",\"\",3,\"formGroup\",\"ngSubmit\"],[\"lines\",\"full\"],[\"position\",\"stacked\"],[\"okText\",\"Aceptar\",\"cancelText\",\"Cancelar\",\"interface\",\"alert\",\"placeholder\",\"Seleccionar\",\"formControlName\",\"PersonID\",\"type\",\"text\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[2,\"color\",\"red\"],[\"okText\",\"Aceptar\",\"cancelText\",\"Cancelar\",\"interface\",\"alert\",\"placeholder\",\"Seleccionar\",\"formControlName\",\"Role\",\"type\",\"text\"],[4,\"ngIf\"],[\"shape\",\"round\",\"color\",\"primary\",\"type\",\"submit\"],[\"shape\",\"round\",\"color\",\"primary\",3,\"click\"],[\"lines\",\"full\",4,\"ngIf\"],[\"lines\",\"full\",4,\"ngFor\",\"ngForOf\"],[\"expand\",\"block\",\"shape\",\"round\",\"color\",\"primary\",3,\"click\"],[3,\"value\"],[\"value\",\"Autor\"],[\"value\",\"Ilustrador\"],[\"value\",\"Principal\"],[\"value\",\"Secundario\"],[\"value\",\"Director\"],[\"value\",\"Productor\"],[\"value\",\"Guionista\"],[\"value\",\"Compositor\"],[\"value\",\"Creador\"],[\"value\",\"Artista\"],[\"value\",\"Narrador\"],[\"value\",\"Presentador\"],[\"value\",\"Escritor\"],[\"value\",\"Actor\"],[\"value\",\"Mangaka\"],[3,\"Names\",\"LastNames\",\"Role\"],[\"ion-button\",\"\",3,\"click\"]],template:function(rf,ctx){1&rf&&(core.Lb(0,\"ion-header\"),core.Lb(1,\"ion-toolbar\",0),core.Lb(2,\"ion-buttons\",1),core.Jb(3,\"ion-back-button\",2),core.Kb(),core.Lb(4,\"ion-title\"),core.ic(5,\"Asignar persona/grupo\"),core.Kb(),core.Kb(),core.Kb(),core.Lb(6,\"ion-content\",3),core.Lb(7,\"ion-item\"),core.Lb(8,\"small\"),core.ic(9,\"Asigna al menos una persona/grupo al item:\"),core.Kb(),core.Kb(),core.Lb(10,\"form\",4),core.Tb(\"ngSubmit\",(function(){return ctx.addSelect()})),core.Lb(11,\"ion-list\"),core.Lb(12,\"ion-item\",5),core.Lb(13,\"ion-label\",6),core.ic(14,\"Selecciona persona o grupo\"),core.Kb(),core.Lb(15,\"ion-select\",7),core.hc(16,AddPersonPage_ion_select_option_16_Template,4,4,\"ion-select-option\",8),core.Kb(),core.Kb(),core.Lb(17,\"ion-item\",5),core.Lb(18,\"ion-label\",6),core.Lb(19,\"span\",9),core.ic(20,\"*\"),core.Kb(),core.ic(21,\"Rol\"),core.Kb(),core.Lb(22,\"ion-select\",10),core.hc(23,AddPersonPage_div_23_Template,5,0,\"div\",11),core.hc(24,AddPersonPage_div_24_Template,21,0,\"div\",11),core.hc(25,AddPersonPage_div_25_Template,3,0,\"div\",11),core.hc(26,AddPersonPage_div_26_Template,11,0,\"div\",11),core.hc(27,AddPersonPage_div_27_Template,7,0,\"div\",11),core.Kb(),core.Kb(),core.Kb(),core.Lb(28,\"ion-button\",12),core.ic(29,\"Añadir\"),core.Kb(),core.Lb(30,\"ion-button\",13),core.Tb(\"click\",(function(){return ctx.newPerson()})),core.ic(31,\"Nueva persona\"),core.Kb(),core.Kb(),core.Lb(32,\"ion-list\"),core.hc(33,AddPersonPage_ion_item_33_Template,2,0,\"ion-item\",14),core.hc(34,AddPersonPage_ion_item_34_Template,5,3,\"ion-item\",15),core.Kb(),core.Lb(35,\"ion-button\",16),core.Tb(\"click\",(function(){return ctx.process()})),core.ic(36,\"Aceptar\"),core.Kb(),core.Kb()),2&rf&&(core.yb(3),core.bc(\"defaultHref\",\"item/\",ctx.type,\"/\",ctx.item,\"\"),core.yb(3),core.Yb(\"fullscreen\",!0),core.yb(4),core.Yb(\"formGroup\",ctx.formpeople),core.yb(6),core.Yb(\"ngForOf\",ctx.people),core.yb(7),core.Yb(\"ngIf\",\"book\"==ctx.type),core.yb(1),core.Yb(\"ngIf\",\"video\"==ctx.type),core.yb(1),core.Yb(\"ngIf\",\"music\"==ctx.type),core.yb(1),core.Yb(\"ngIf\",\"game\"==ctx.type),core.yb(1),core.Yb(\"ngIf\",\"comic\"==ctx.type),core.yb(6),core.Yb(\"ngIf\",ctx.peopleadded.length<1),core.yb(1),core.Yb(\"ngForOf\",ctx.peopleadded))},directives:[ionic_angular.q,ionic_angular.P,ionic_angular.i,ionic_angular.f,ionic_angular.g,ionic_angular.N,ionic_angular.m,ionic_angular.v,fesm2015_forms.o,fesm2015_forms.k,fesm2015_forms.f,ionic_angular.A,ionic_angular.z,ionic_angular.J,ionic_angular.Z,fesm2015_forms.j,fesm2015_forms.d,common.h,common.i,ionic_angular.h,ionic_angular.K,ionic_angular.k,persona_component.a],styles:[\"\"]}),AddPersonPage})()}];let add_person_routing_module_AddPersonPageRoutingModule=(()=>{class AddPersonPageRoutingModule{}return AddPersonPageRoutingModule.ɵmod=core.Gb({type:AddPersonPageRoutingModule}),AddPersonPageRoutingModule.ɵinj=core.Fb({factory:function(t){return new(t||AddPersonPageRoutingModule)},imports:[[fesm2015_router.i.forChild(routes)],fesm2015_router.i]}),AddPersonPageRoutingModule})();var components_module=__webpack_require__(\"j1ZV\");let add_person_module_AddPersonPageModule=(()=>{class AddPersonPageModule{}return AddPersonPageModule.ɵmod=core.Gb({type:AddPersonPageModule}),AddPersonPageModule.ɵinj=core.Fb({factory:function(t){return new(t||AddPersonPageModule)},imports:[[common.b,fesm2015_forms.g,fesm2015_forms.l,ionic_angular.Q,add_person_routing_module_AddPersonPageRoutingModule,components_module.a]]}),AddPersonPageModule})()},cLkV:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return PersonaComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"fXoL\"),_angular_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"ofXK\");function PersonaComponent_strong_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lb(0,\"strong\"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ic(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kb()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb();_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.kc(\"\",ctx_r0.Role,\": \")}}function PersonaComponent_span_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lb(0,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ic(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kb()),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb();_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.jc(ctx_r1.LastNames)}}function PersonaComponent_span_2_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lb(0,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ic(1,\", \"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kb())}function PersonaComponent_span_3_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lb(0,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ic(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kb()),2&rf){const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb();_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.jc(ctx_r3.Names)}}let PersonaComponent=(()=>{class PersonaComponent{constructor(){\"Principal\"!==this.Role&&\"Secundario\"!==this.Role||(this.Role=\"Actor \"+this.Role.toLowerCase())}ngOnInit(){}}return PersonaComponent.ɵfac=function(t){return new(t||PersonaComponent)},PersonaComponent.ɵcmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Cb({type:PersonaComponent,selectors:[[\"app-persona\"]],inputs:{Names:\"Names\",LastNames:\"LastNames\",Role:\"Role\"},decls:4,vars:4,consts:[[4,\"ngIf\"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.hc(0,PersonaComponent_strong_0_Template,2,1,\"strong\",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.hc(1,PersonaComponent_span_1_Template,2,1,\"span\",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.hc(2,PersonaComponent_span_2_Template,2,0,\"span\",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.hc(3,PersonaComponent_span_3_Template,2,1,\"span\",0)),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yb(\"ngIf\",ctx.Role),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yb(\"ngIf\",ctx.LastNames),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yb(\"ngIf\",ctx.LastNames&&ctx.Names),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yb(\"ngIf\",ctx.Names))},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_1__.i],styles:[\"\"]}),PersonaComponent})()},j1ZV:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return ComponentsModule}));var _angular_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"ofXK\"),_ionic_angular__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"TEn/\"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"fXoL\");let ComponentsModule=(()=>{class ComponentsModule{}return ComponentsModule.ɵmod=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Gb({type:ComponentsModule}),ComponentsModule.ɵinj=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Fb({factory:function(t){return new(t||ComponentsModule)},imports:[[_angular_common__WEBPACK_IMPORTED_MODULE_0__.b,_ionic_angular__WEBPACK_IMPORTED_MODULE_1__.Q]]}),ComponentsModule})()}}]);","extractedComments":[]}