{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{bzNi:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"ItemPageModule\",(function(){return item_module_ItemPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),ionic_angular=__webpack_require__(\"TEn/\"),router=__webpack_require__(\"tyNb\"),tslib_es6=__webpack_require__(\"mrSG\"),core=__webpack_require__(\"fXoL\"),api_rest_service=__webpack_require__(\"Epai\"),website_list_component=__webpack_require__(\"rgD0\"),persona_component=__webpack_require__(\"cLkV\"),detail_book_component=__webpack_require__(\"SXrq\"),detail_music_component=__webpack_require__(\"qKCK\"),detail_video_component=__webpack_require__(\"Tjrf\"),detail_game_component=__webpack_require__(\"z0C6\"),detail_comic_component=__webpack_require__(\"/WS/\");function ItemPage_ion_button_20_Template(rf,ctx){if(1&rf){const _r10=core.Mb();core.Lb(0,\"ion-button\",17),core.Tb(\"click\",(function(){return core.ec(_r10),core.Vb().goToEditItem()})),core.ic(1,\"Editar\"),core.Kb()}}function ItemPage_ion_button_21_Template(rf,ctx){if(1&rf){const _r12=core.Mb();core.Lb(0,\"ion-button\",18),core.Tb(\"click\",(function(){return core.ec(_r12),core.Vb().deleteItem()})),core.ic(1,\"Eliminar\"),core.Kb()}}function ItemPage_ion_chip_23_Template(rf,ctx){if(1&rf){const _r15=core.Mb();core.Lb(0,\"ion-chip\"),core.Jb(1,\"ion-icon\",19),core.Lb(2,\"a\",20),core.Jb(3,\"app-persona\",21),core.Kb(),core.Lb(4,\"ion-icon\",22),core.Tb(\"click\",(function(){core.ec(_r15);const p_r13=ctx.$implicit;return core.Vb().removePerson(p_r13.PersonID,p_r13.Role)})),core.Kb(),core.Kb()}if(2&rf){const p_r13=ctx.$implicit;core.yb(2),core.ac(\"href\",\"/person/\",p_r13.PersonID,\"\",core.fc),core.yb(1),core.Zb(\"Names\",p_r13.Names),core.Zb(\"LastNames\",p_r13.LastNames),core.Zb(\"Role\",p_r13.Role)}}function ItemPage_ion_chip_29_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-chip\"),core.Jb(1,\"ion-icon\",23),core.Lb(2,\"ion-label\"),core.Lb(3,\"strong\"),core.ic(4,\"Serie: \"),core.Kb(),core.Lb(5,\"a\",20),core.ic(6),core.Kb(),core.Kb(),core.Kb()),2&rf){const ctx_r3=core.Vb();core.yb(5),core.ac(\"href\",\"/series/\",ctx_r3.series,\"\",core.fc),core.yb(1),core.jc(ctx_r3.seriesName)}}function ItemPage_ion_chip_30_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-chip\"),core.Jb(1,\"ion-icon\",24),core.Lb(2,\"ion-label\"),core.Jb(3,\"strong\"),core.Lb(4,\"a\",20),core.ic(5),core.Kb(),core.Kb(),core.Kb()),2&rf){const ctx_r4=core.Vb();core.yb(4),core.ac(\"href\",\"/genre/\",ctx_r4.genreID1,\"\",core.fc),core.yb(1),core.jc(ctx_r4.genreName1)}}function ItemPage_ion_chip_31_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-chip\"),core.Jb(1,\"ion-icon\",24),core.Lb(2,\"ion-label\"),core.Jb(3,\"strong\"),core.Lb(4,\"a\",20),core.ic(5),core.Kb(),core.Kb(),core.Kb()),2&rf){const ctx_r5=core.Vb();core.yb(4),core.ac(\"href\",\"/genre/\",ctx_r5.genreID2,\"\",core.fc),core.yb(1),core.jc(ctx_r5.genreName2)}}function ItemPage_ion_chip_32_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-chip\"),core.Jb(1,\"ion-icon\",24),core.Lb(2,\"ion-label\"),core.Jb(3,\"strong\"),core.Lb(4,\"a\",20),core.ic(5),core.Kb(),core.Kb(),core.Kb()),2&rf){const ctx_r6=core.Vb();core.yb(4),core.ac(\"href\",\"/genre/\",ctx_r6.genreID3,\"\",core.fc),core.yb(1),core.jc(ctx_r6.genreName3)}}function ItemPage_ion_item_sliding_35_Template(rf,ctx){1&rf&&(core.Lb(0,\"ion-item-sliding\"),core.Lb(1,\"ion-label\"),core.ic(2,\"No existen ediciones para este ítem.\"),core.Kb(),core.Kb())}function ItemPage_ion_item_sliding_36_ion_col_4_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-col\"),core.Lb(1,\"div\"),core.Lb(2,\"ion-button\",25),core.ic(3,\"Ver detalle\"),core.Kb(),core.Kb(),core.Jb(4,\"app-detail-book\",26),core.Kb()),2&rf){const ed_r16=core.Vb().$implicit;core.yb(2),core.ac(\"href\",\"/edition/book/\",ed_r16.EditionID,\"\"),core.yb(2),core.Yb(\"id\",ed_r16.EditionID)}}function ItemPage_ion_item_sliding_36_ion_col_5_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-col\"),core.Lb(1,\"div\"),core.Lb(2,\"ion-button\",25),core.ic(3,\"Ver detalle\"),core.Kb(),core.Kb(),core.Jb(4,\"app-detail-music\",26),core.Kb()),2&rf){const ed_r16=core.Vb().$implicit;core.yb(2),core.ac(\"href\",\"/edition/music/\",ed_r16.EditionID,\"\"),core.yb(2),core.Yb(\"id\",ed_r16.EditionID)}}function ItemPage_ion_item_sliding_36_ion_col_6_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-col\"),core.Lb(1,\"div\"),core.Lb(2,\"ion-button\",25),core.ic(3,\"Ver detalle\"),core.Kb(),core.Kb(),core.Jb(4,\"app-detail-video\",26),core.Kb()),2&rf){const ed_r16=core.Vb().$implicit;core.yb(2),core.ac(\"href\",\"/edition/video/\",ed_r16.EditionID,\"\"),core.yb(2),core.Yb(\"id\",ed_r16.EditionID)}}function ItemPage_ion_item_sliding_36_ion_col_7_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-col\"),core.Lb(1,\"div\"),core.Lb(2,\"ion-button\",25),core.ic(3,\"Ver detalle\"),core.Kb(),core.Kb(),core.Jb(4,\"app-detail-game\",26),core.Kb()),2&rf){const ed_r16=core.Vb().$implicit;core.yb(2),core.ac(\"href\",\"/edition/game/\",ed_r16.EditionID,\"\"),core.yb(2),core.Yb(\"id\",ed_r16.EditionID)}}function ItemPage_ion_item_sliding_36_ion_col_8_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-col\"),core.Lb(1,\"div\"),core.Lb(2,\"ion-button\",25),core.ic(3,\"Ver detalle\"),core.Kb(),core.Kb(),core.Jb(4,\"app-detail-comic\",26),core.Kb()),2&rf){const ed_r16=core.Vb().$implicit;core.yb(2),core.ac(\"href\",\"/edition/comic/\",ed_r16.EditionID,\"\"),core.yb(2),core.Yb(\"id\",ed_r16.EditionID)}}function ItemPage_ion_item_sliding_36_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-item-sliding\"),core.Lb(1,\"ion-item\",6),core.Lb(2,\"ion-grid\"),core.Lb(3,\"ion-row\"),core.hc(4,ItemPage_ion_item_sliding_36_ion_col_4_Template,5,2,\"ion-col\",14),core.hc(5,ItemPage_ion_item_sliding_36_ion_col_5_Template,5,2,\"ion-col\",14),core.hc(6,ItemPage_ion_item_sliding_36_ion_col_6_Template,5,2,\"ion-col\",14),core.hc(7,ItemPage_ion_item_sliding_36_ion_col_7_Template,5,2,\"ion-col\",14),core.hc(8,ItemPage_ion_item_sliding_36_ion_col_8_Template,5,2,\"ion-col\",14),core.Kb(),core.Kb(),core.Kb(),core.Kb()),2&rf){const ctx_r8=core.Vb();core.yb(4),core.Yb(\"ngIf\",\"book\"===ctx_r8.type),core.yb(1),core.Yb(\"ngIf\",\"music\"===ctx_r8.type),core.yb(1),core.Yb(\"ngIf\",\"video\"===ctx_r8.type),core.yb(1),core.Yb(\"ngIf\",\"game\"===ctx_r8.type),core.yb(1),core.Yb(\"ngIf\",\"comic\"===ctx_r8.type)}}const routes=[{path:\"\",component:(()=>{class ItemPage{constructor(http,navCtrl,route,router,alertCtrl,modalController){this.http=http,this.navCtrl=navCtrl,this.route=route,this.router=router,this.alertCtrl=alertCtrl,this.modalController=modalController,this.id=this.route.snapshot.params.id,this.type=this.route.snapshot.params.type,this.userID=http.getUserID(),this.getItem(),this.getEditions(),console.log(\"id: \"+this.id+\", type: \"+this.type+\", userID: \"+this.userID)}getItem(){this.http.getItem(this.id).subscribe(res=>{this.item=res,console.log(this.item),this.typeName=this.http.getItemTypeName(this.type),this.typeIcon=this.http.getItemTypeIcon(res.ItemType),console.log(this.typeIcon),this.itemName=res.ItemName,this.series=res.SeriesID,this.seriesName=res.SeriesName,this.genreID1=res.GenreID1,this.genreName1=res.GenreName1,this.genreID2=res.GenreID2,this.genreName2=res.GenreName2,this.genreID3=res.GenreID3,this.genreName3=res.GenreName3,this.people=res.People,this.creatorUser=res.CreatorUserID,console.log(\"creator user:\",this.creatorUser)},error=>{console.error(error)})}getEditions(){this.ediciones=[],this.http.getEditionsOfItem(this.id,this.type).subscribe(res=>{this.ediciones=res.body,this.itemCount=res.itemCount,console.log(\"ediciones \",this.ediciones)},error=>{console.error(error),this.itemCount=0})}goToEditItem(){this.navCtrl.navigateForward(\"/edit-item/\"+this.id)}goToEditEdition(ed){this.navCtrl.navigateForward(\"/edit-\"+this.type+\"/\"+ed)}goToNewEdition(){this.navCtrl.navigateForward(\"/create-\"+this.type+\"/\"+this.id)}deleteItem(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const alert=yield this.alertCtrl.create({header:\"Confirmar\",message:\"¿Seguro que deseas eliminar permanentemente el item y todas sus ediciones?\",buttons:[{text:\"Aceptar\",handler:()=>{this.http.deleteItem(this.id,this.type)}},{text:\"Cancelar\",role:\"cancel\",handler:()=>{console.log(\"Cancelar\")}}]});yield alert.present()}))}addPerson(){console.log(\"Añadir persona\"),this.navCtrl.navigateForward(\"/add-person/\"+this.type+\"/\"+this.id)}removePerson(person,role){console.log(\"Borrar persona \",person),this.http.removePersonToItem(person,this.id,role).subscribe(data=>{this.http.presentToast(data.body.Message),200==data.status&&(this.people=[],this.getItem())},error=>(console.log(error),error))}ngOnInit(){}}return ItemPage.ɵfac=function(t){return new(t||ItemPage)(core.Ib(api_rest_service.a),core.Ib(ionic_angular.U),core.Ib(router.a),core.Ib(router.g),core.Ib(ionic_angular.b),core.Ib(ionic_angular.T))},ItemPage.ɵcmp=core.Cb({type:ItemPage,selectors:[[\"app-item\"]],decls:40,vars:15,consts:[[3,\"translucent\"],[\"color\",\"primary\"],[\"slot\",\"start\"],[\"defaultHref\",\"/myitems\"],[\"slot\",\"end\"],[3,\"fullscreen\"],[1,\"ion-card\"],[1,\"ion-text-wrap\",2,\"margin-left\",\"5px\"],[2,\"margin\",\"0 5px\",3,\"name\"],[\"top\",\"\",\"expand\",\"inline\",3,\"click\",4,\"ngIf\"],[\"top\",\"\",\"expand\",\"inline\",\"color\",\"danger\",3,\"click\",4,\"ngIf\"],[4,\"ngFor\",\"ngForOf\"],[3,\"click\"],[\"name\",\"person-add\"],[4,\"ngIf\"],[\"type\",\"item\",3,\"id\"],[\"expand\",\"full\",3,\"click\"],[\"top\",\"\",\"expand\",\"inline\",3,\"click\"],[\"top\",\"\",\"expand\",\"inline\",\"color\",\"danger\",3,\"click\"],[\"name\",\"person\"],[1,\"chiplink\",3,\"href\"],[3,\"Names\",\"LastNames\",\"Role\"],[\"name\",\"close\",3,\"click\"],[\"name\",\"pricetag\"],[\"name\",\"bookmark\"],[3,\"href\"],[3,\"id\"]],template:function(rf,ctx){1&rf&&(core.Lb(0,\"ion-header\",0),core.Lb(1,\"ion-toolbar\",1),core.Lb(2,\"ion-buttons\",2),core.Jb(3,\"ion-back-button\",3),core.Kb(),core.Lb(4,\"ion-buttons\",4),core.Jb(5,\"ion-menu-button\"),core.Kb(),core.Lb(6,\"ion-title\"),core.ic(7),core.Kb(),core.Kb(),core.Kb(),core.Lb(8,\"ion-content\",5),core.Lb(9,\"ion-list\"),core.Lb(10,\"ion-item-sliding\"),core.Lb(11,\"ion-item\",6),core.Lb(12,\"ion-grid\"),core.Lb(13,\"ion-row\"),core.Lb(14,\"ion-label\",7),core.Lb(15,\"h1\"),core.Jb(16,\"ion-icon\",8),core.Lb(17,\"strong\"),core.ic(18),core.Kb(),core.Kb(),core.Lb(19,\"div\"),core.hc(20,ItemPage_ion_button_20_Template,2,0,\"ion-button\",9),core.hc(21,ItemPage_ion_button_21_Template,2,0,\"ion-button\",10),core.Kb(),core.Kb(),core.Kb(),core.Lb(22,\"ion-row\"),core.hc(23,ItemPage_ion_chip_23_Template,5,4,\"ion-chip\",11),core.Lb(24,\"ion-chip\",12),core.Tb(\"click\",(function(){return ctx.addPerson()})),core.Jb(25,\"ion-icon\",13),core.Lb(26,\"ion-label\"),core.ic(27,\"Agregar\"),core.Kb(),core.Kb(),core.Kb(),core.Lb(28,\"ion-row\"),core.hc(29,ItemPage_ion_chip_29_Template,7,2,\"ion-chip\",14),core.hc(30,ItemPage_ion_chip_30_Template,6,2,\"ion-chip\",14),core.hc(31,ItemPage_ion_chip_31_Template,6,2,\"ion-chip\",14),core.hc(32,ItemPage_ion_chip_32_Template,6,2,\"ion-chip\",14),core.Kb(),core.Lb(33,\"ion-row\"),core.Jb(34,\"app-website-list\",15),core.Kb(),core.Kb(),core.Kb(),core.Kb(),core.hc(35,ItemPage_ion_item_sliding_35_Template,3,0,\"ion-item-sliding\",14),core.hc(36,ItemPage_ion_item_sliding_36_Template,9,5,\"ion-item-sliding\",11),core.Lb(37,\"ion-item-sliding\"),core.Lb(38,\"ion-button\",16),core.Tb(\"click\",(function(){return ctx.goToNewEdition()})),core.ic(39,\"Nueva edición\"),core.Kb(),core.Kb(),core.Kb(),core.Kb()),2&rf&&(core.Yb(\"translucent\",!0),core.yb(7),core.jc(ctx.itemName),core.yb(1),core.Yb(\"fullscreen\",!0),core.yb(8),core.Zb(\"name\",ctx.typeIcon),core.yb(2),core.jc(ctx.itemName),core.yb(2),core.Yb(\"ngIf\",ctx.userID==ctx.creatorUser),core.yb(1),core.Yb(\"ngIf\",ctx.userID==ctx.creatorUser),core.yb(2),core.Yb(\"ngForOf\",ctx.people),core.yb(6),core.Yb(\"ngIf\",ctx.series>0),core.yb(1),core.Yb(\"ngIf\",ctx.genreID1>0),core.yb(1),core.Yb(\"ngIf\",ctx.genreID2>0),core.yb(1),core.Yb(\"ngIf\",ctx.genreID3>0),core.yb(2),core.Yb(\"id\",ctx.id),core.yb(1),core.Yb(\"ngIf\",ctx.itemCount<=0),core.yb(1),core.Yb(\"ngForOf\",ctx.ediciones))},directives:[ionic_angular.q,ionic_angular.P,ionic_angular.i,ionic_angular.f,ionic_angular.g,ionic_angular.C,ionic_angular.N,ionic_angular.m,ionic_angular.A,ionic_angular.y,ionic_angular.v,ionic_angular.p,ionic_angular.F,ionic_angular.z,ionic_angular.r,common.i,common.h,ionic_angular.k,website_list_component.a,ionic_angular.h,persona_component.a,ionic_angular.l,detail_book_component.a,detail_music_component.a,detail_video_component.a,detail_game_component.a,detail_comic_component.a],styles:[\"\"]}),ItemPage})()}];let item_routing_module_ItemPageRoutingModule=(()=>{class ItemPageRoutingModule{}return ItemPageRoutingModule.ɵmod=core.Gb({type:ItemPageRoutingModule}),ItemPageRoutingModule.ɵinj=core.Fb({factory:function(t){return new(t||ItemPageRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),ItemPageRoutingModule})();var create_website_module=__webpack_require__(\"F5SU\"),components_module=__webpack_require__(\"j1ZV\");let item_module_ItemPageModule=(()=>{class ItemPageModule{}return ItemPageModule.ɵmod=core.Gb({type:ItemPageModule}),ItemPageModule.ɵinj=core.Fb({factory:function(t){return new(t||ItemPageModule)},imports:[[common.b,fesm2015_forms.g,ionic_angular.Q,item_routing_module_ItemPageRoutingModule,create_website_module.CreateWebsitePageModule,components_module.a]]}),ItemPageModule})()}}]);","extractedComments":[]}