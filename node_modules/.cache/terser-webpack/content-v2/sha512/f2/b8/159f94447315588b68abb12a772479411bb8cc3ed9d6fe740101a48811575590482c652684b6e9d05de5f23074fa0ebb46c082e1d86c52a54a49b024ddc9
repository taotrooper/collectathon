{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{RmqX:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"SearchPageModule\",(function(){return search_module_SearchPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),ionic_angular=__webpack_require__(\"TEn/\"),fesm2015_router=__webpack_require__(\"tyNb\"),core=__webpack_require__(\"fXoL\"),api_rest_service=__webpack_require__(\"Epai\"),edition_list_component=__webpack_require__(\"2bnu\");function SearchPage_div_38_Template(rf,ctx){1&rf&&(core.Lb(0,\"div\"),core.Lb(1,\"ion-select-option\",24),core.ic(2,\"ISBN\"),core.Kb(),core.Lb(3,\"ion-select-option\",25),core.ic(4,\"Editorial\"),core.Kb(),core.Lb(5,\"ion-select-option\",26),core.ic(6,\"Idioma\"),core.Kb(),core.Lb(7,\"ion-select-option\",27),core.ic(8,\"Tipo (bolsillo, tapa dura, ebook...)\"),core.Kb(),core.Kb())}function SearchPage_div_39_Template(rf,ctx){1&rf&&(core.Lb(0,\"div\"),core.Lb(1,\"ion-select-option\",28),core.ic(2,\"Formato (CD, vinilo, digital...)\"),core.Kb(),core.Lb(3,\"ion-select-option\",29),core.ic(4,\"Sello\"),core.Kb(),core.Kb())}function SearchPage_div_40_Template(rf,ctx){1&rf&&(core.Lb(0,\"div\"),core.Lb(1,\"ion-select-option\",30),core.ic(2,\"Formato (DVD, Bluray...)\"),core.Kb(),core.Lb(3,\"ion-select-option\",31),core.ic(4,\"Tipo (Película, serie...)\"),core.Kb(),core.Lb(5,\"ion-select-option\",32),core.ic(6,\"Sistema (PAL, NTSC...)\"),core.Kb(),core.Lb(7,\"ion-select-option\",33),core.ic(8,\"Región\"),core.Kb(),core.Lb(9,\"ion-select-option\",34),core.ic(10,\"Temporada\"),core.Kb(),core.Kb())}function SearchPage_div_41_Template(rf,ctx){1&rf&&(core.Lb(0,\"div\"),core.Lb(1,\"ion-select-option\",35),core.ic(2,\"Plataforma/consola\"),core.Kb(),core.Lb(3,\"ion-select-option\",36),core.ic(4,\"Formato (físico/digital...)\"),core.Kb(),core.Lb(5,\"ion-select-option\",37),core.ic(6,\"Región\"),core.Kb(),core.Lb(7,\"ion-select-option\",38),core.ic(8,\"Distribuidora\"),core.Kb(),core.Lb(9,\"ion-select-option\",39),core.ic(10,\"Estudio\"),core.Kb(),core.Kb())}function SearchPage_div_42_Template(rf,ctx){1&rf&&(core.Lb(0,\"div\"),core.Lb(1,\"ion-select-option\",40),core.ic(2,\"Tipo (grapas, tomo, omnibus)\"),core.Kb(),core.Lb(3,\"ion-select-option\",41),core.ic(4,\"Origen (norteamericano, manga, europeo...\"),core.Kb(),core.Lb(5,\"ion-select-option\",42),core.ic(6,\"ISBN\"),core.Kb(),core.Lb(7,\"ion-select-option\",43),core.ic(8,\"Editorial\"),core.Kb(),core.Lb(9,\"ion-select-option\",44),core.ic(10,\"Idioma\"),core.Kb(),core.Lb(11,\"ion-select-option\",45),core.ic(12,\"Formato (físico/digital)\"),core.Kb(),core.Lb(13,\"ion-select-option\",46),core.ic(14,\"Número\"),core.Kb(),core.Kb())}function SearchPage_ion_item_46_Template(rf,ctx){1&rf&&(core.Lb(0,\"ion-item\",6),core.ic(1,\"No hay criterios de búsqueda.\"),core.Kb())}function SearchPage_ion_item_47_ion_chip_1_Template(rf,ctx){if(1&rf){const _r11=core.Mb();core.Lb(0,\"ion-chip\"),core.ic(1),core.Lb(2,\"button\",48),core.Tb(\"click\",(function(){core.ec(_r11);const a_r9=ctx.$implicit;return core.Vb(2).removeCriteria(a_r9)})),core.ic(3,\"x\"),core.Kb(),core.Kb()}if(2&rf){const a_r9=ctx.$implicit;core.yb(1),core.lc(\"\",a_r9.campo,\" = \",a_r9.valor,\"\")}}function SearchPage_ion_item_47_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-item\",6),core.hc(1,SearchPage_ion_item_47_ion_chip_1_Template,4,2,\"ion-chip\",47),core.Kb()),2&rf){const ctx_r6=core.Vb();core.yb(1),core.Yb(\"ngForOf\",ctx_r6.criteria)}}function SearchPage_ion_list_50_ion_item_sliding_4_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-item-sliding\"),core.Jb(1,\"app-edition-list\",49),core.Kb()),2&rf){const ed_r13=ctx.$implicit;core.yb(1),core.Yb(\"ed\",ed_r13)}}function SearchPage_ion_list_50_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-list\"),core.Lb(1,\"ion-item\",6),core.Lb(2,\"small\"),core.ic(3),core.Kb(),core.Kb(),core.hc(4,SearchPage_ion_list_50_ion_item_sliding_4_Template,2,1,\"ion-item-sliding\",47),core.Kb()),2&rf){const ctx_r7=core.Vb();core.yb(3),core.kc(\"Mostrando \",ctx_r7.numres,\" resultados.\"),core.yb(1),core.Yb(\"ngForOf\",ctx_r7.items)}}const routes=[{path:\"\",component:(()=>{class SearchPage{constructor(http,navCtrl,route,router,formBuilder){this.http=http,this.navCtrl=navCtrl,this.route=route,this.router=router,this.formBuilder=formBuilder,this.criteria=[],this.numres=null,this.isSubmitted=!1,this.formcriteria=null,this.formcriteria=new fesm2015_forms.e({tipo:new fesm2015_forms.b,campo:new fesm2015_forms.b,valor:new fesm2015_forms.b})}ngOnInit(){this.formcriteria=this.formBuilder.group({tipo:[null],campo:[null,fesm2015_forms.n.required],valor:[null,fesm2015_forms.n.required]})}addCriteria(){if(this.isSubmitted=!0,!this.formcriteria.valid)return console.log(\"Please provide all the required values!\"),!1;if(this.formcriteria.value.valor){var i=this.criteria.find(e=>e.campo===this.formcriteria.value.campo);i?i.valor=this.formcriteria.value.valor:this.criteria.push({campo:this.formcriteria.value.campo,valor:this.formcriteria.value.valor}),console.log(\"criteria:\"+this.criteria)}}removeCriteria(a){this.criteria.splice(this.criteria.findIndex(e=>e===a),1),console.log(\"people:\"+this.criteria)}changeType(){if(this.criteria.find(o=>\"ItemType\"===o.campo)&&this.criteria.splice(this.criteria.findIndex(o=>\"ItemType\"===o.campo),1),\"all\"!==this.formcriteria.value.tipo){var p={campo:\"ItemType\",valor:this.http.getItemType(this.formcriteria.value.tipo)};this.criteria.push(p)}}get errorControl(){return this.formcriteria.controls}compareFn(e1,e2){return e1&&e2?e1.id===e2.id:e1===e2}process(){var c={body:this.criteria};console.log(\"c \",c),this.http.searchEditions(c).subscribe(res=>{this.items=res.body.body,this.numres=res.itemCount||res.body.itemCount,console.log(this.numres)},error=>{console.error(error),this.numres=0})}}return SearchPage.ɵfac=function(t){return new(t||SearchPage)(core.Ib(api_rest_service.a),core.Ib(ionic_angular.U),core.Ib(fesm2015_router.a),core.Ib(fesm2015_router.g),core.Ib(fesm2015_forms.a))},SearchPage.ɵcmp=core.Cb({type:SearchPage,selectors:[[\"app-search\"]],decls:51,vars:10,consts:[[\"color\",\"primary\"],[\"slot\",\"start\"],[\"defaultHref\",\"explore\"],[\"slot\",\"end\"],[\"padding\",\"\",3,\"fullscreen\"],[\"novalidate\",\"\",3,\"formGroup\",\"ngSubmit\"],[\"lines\",\"full\"],[\"position\",\"stacked\"],[\"okText\",\"Aceptar\",\"cancelText\",\"Cancelar\",\"interface\",\"alert\",\"placeholder\",\"Seleccionar\",\"formControlName\",\"tipo\",\"type\",\"text\",3,\"ionChange\"],[\"value\",\"all\"],[\"value\",\"book\"],[\"value\",\"music\"],[\"value\",\"video\"],[\"value\",\"game\"],[\"value\",\"comic\"],[\"okText\",\"Aceptar\",\"cancelText\",\"Cancelar\",\"interface\",\"alert\",\"placeholder\",\"Campo\",\"formControlName\",\"campo\",\"type\",\"text\"],[\"value\",\"ItemName\"],[\"value\",\"Year\"],[\"value\",\"EAN13\"],[4,\"ngIf\"],[\"placeholder\",\"Valor\",\"formControlName\",\"valor\",\"type\",\"text\"],[\"shape\",\"round\",\"color\",\"primary\",\"type\",\"submit\"],[\"lines\",\"full\",4,\"ngIf\"],[\"expand\",\"block\",\"shape\",\"round\",\"color\",\"primary\",3,\"click\"],[\"value\",\"ISBN\"],[\"value\",\"Editorial\"],[\"value\",\"Idioma\"],[\"value\",\"Tipo\"],[\"value\",\"Formato\"],[\"value\",\"Sello\"],[\"value\",\"FormatoVideo\"],[\"value\",\"TipoVideo\"],[\"value\",\"Sistema\"],[\"value\",\"RegionVideo\"],[\"value\",\"Temporada\"],[\"value\",\"Plataforma\"],[\"value\",\"FormatoJuego\"],[\"value\",\"RegionJuego\"],[\"value\",\"Distribuidora\"],[\"value\",\"Estudio\"],[\"value\",\"TipoComic\"],[\"value\",\"Origen\"],[\"value\",\"ISBNComic\"],[\"value\",\"EditorialComic\"],[\"value\",\"IdiomaComic\"],[\"value\",\"FormatoComic\"],[\"value\",\"NroComic\"],[4,\"ngFor\",\"ngForOf\"],[\"ion-button\",\"\",3,\"click\"],[3,\"ed\"]],template:function(rf,ctx){1&rf&&(core.Lb(0,\"ion-header\"),core.Lb(1,\"ion-toolbar\",0),core.Lb(2,\"ion-buttons\",1),core.Jb(3,\"ion-back-button\",2),core.Kb(),core.Lb(4,\"ion-buttons\",3),core.Jb(5,\"ion-menu-button\"),core.Kb(),core.Lb(6,\"ion-title\"),core.ic(7,\"Búsqueda avanzada\"),core.Kb(),core.Kb(),core.Kb(),core.Lb(8,\"ion-content\",4),core.Lb(9,\"form\",5),core.Tb(\"ngSubmit\",(function(){return ctx.addCriteria()})),core.Lb(10,\"ion-list\"),core.Lb(11,\"ion-item\",6),core.Lb(12,\"ion-label\",7),core.ic(13,\"Selecciona tipo de ítem\"),core.Kb(),core.Lb(14,\"ion-select\",8),core.Tb(\"ionChange\",(function(){return ctx.changeType()})),core.Lb(15,\"ion-select-option\",9),core.ic(16,\"Todos\"),core.Kb(),core.Lb(17,\"ion-select-option\",10),core.ic(18,\"Libro\"),core.Kb(),core.Lb(19,\"ion-select-option\",11),core.ic(20,\"Música\"),core.Kb(),core.Lb(21,\"ion-select-option\",12),core.ic(22,\"Vídeo\"),core.Kb(),core.Lb(23,\"ion-select-option\",13),core.ic(24,\"Videojuego\"),core.Kb(),core.Lb(25,\"ion-select-option\",14),core.ic(26,\"Comic\"),core.Kb(),core.Kb(),core.Kb(),core.Lb(27,\"ion-item\",6),core.Lb(28,\"small\"),core.ic(29,\"Asigna al menos un criterio de búsqueda:\"),core.Kb(),core.Kb(),core.Lb(30,\"ion-item\",6),core.Lb(31,\"ion-select\",15),core.Lb(32,\"ion-select-option\",16),core.ic(33,\"Título\"),core.Kb(),core.Lb(34,\"ion-select-option\",17),core.ic(35,\"Año de edición\"),core.Kb(),core.Lb(36,\"ion-select-option\",18),core.ic(37,\"EAN13\"),core.Kb(),core.hc(38,SearchPage_div_38_Template,9,0,\"div\",19),core.hc(39,SearchPage_div_39_Template,5,0,\"div\",19),core.hc(40,SearchPage_div_40_Template,11,0,\"div\",19),core.hc(41,SearchPage_div_41_Template,11,0,\"div\",19),core.hc(42,SearchPage_div_42_Template,15,0,\"div\",19),core.Kb(),core.Jb(43,\"ion-input\",20),core.Lb(44,\"ion-button\",21),core.ic(45,\"Añadir\"),core.Kb(),core.Kb(),core.hc(46,SearchPage_ion_item_46_Template,2,0,\"ion-item\",22),core.hc(47,SearchPage_ion_item_47_Template,2,1,\"ion-item\",22),core.Kb(),core.Lb(48,\"ion-button\",23),core.Tb(\"click\",(function(){return ctx.process()})),core.ic(49,\"Aceptar\"),core.Kb(),core.hc(50,SearchPage_ion_list_50_Template,5,2,\"ion-list\",19),core.Kb(),core.Kb()),2&rf&&(core.yb(8),core.Yb(\"fullscreen\",!0),core.yb(1),core.Yb(\"formGroup\",ctx.formcriteria),core.yb(29),core.Yb(\"ngIf\",\"book\"==ctx.formcriteria.value.tipo),core.yb(1),core.Yb(\"ngIf\",\"music\"==ctx.formcriteria.value.tipo),core.yb(1),core.Yb(\"ngIf\",\"video\"==ctx.formcriteria.value.tipo),core.yb(1),core.Yb(\"ngIf\",\"game\"==ctx.formcriteria.value.tipo),core.yb(1),core.Yb(\"ngIf\",\"comic\"==ctx.formcriteria.value.tipo),core.yb(4),core.Yb(\"ngIf\",ctx.criteria.length<1),core.yb(1),core.Yb(\"ngIf\",ctx.criteria.length>=1),core.yb(3),core.Yb(\"ngIf\",null!==ctx.numres))},directives:[ionic_angular.q,ionic_angular.P,ionic_angular.i,ionic_angular.f,ionic_angular.g,ionic_angular.C,ionic_angular.N,ionic_angular.m,fesm2015_forms.o,fesm2015_forms.k,fesm2015_forms.f,ionic_angular.A,ionic_angular.v,ionic_angular.z,ionic_angular.J,ionic_angular.Z,fesm2015_forms.j,fesm2015_forms.d,ionic_angular.K,common.i,ionic_angular.u,ionic_angular.ab,ionic_angular.h,common.h,ionic_angular.k,ionic_angular.y,edition_list_component.a],styles:[\"\"]}),SearchPage})()}];let search_routing_module_SearchPageRoutingModule=(()=>{class SearchPageRoutingModule{}return SearchPageRoutingModule.ɵmod=core.Gb({type:SearchPageRoutingModule}),SearchPageRoutingModule.ɵinj=core.Fb({factory:function(t){return new(t||SearchPageRoutingModule)},imports:[[fesm2015_router.i.forChild(routes)],fesm2015_router.i]}),SearchPageRoutingModule})();var components_module=__webpack_require__(\"j1ZV\");let search_module_SearchPageModule=(()=>{class SearchPageModule{}return SearchPageModule.ɵmod=core.Gb({type:SearchPageModule}),SearchPageModule.ɵinj=core.Fb({factory:function(t){return new(t||SearchPageModule)},imports:[[common.b,fesm2015_forms.g,fesm2015_forms.l,ionic_angular.Q,components_module.a,search_routing_module_SearchPageRoutingModule]]}),SearchPageModule})()},j1ZV:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return ComponentsModule}));var _angular_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"ofXK\"),_ionic_angular__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"TEn/\"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"fXoL\");let ComponentsModule=(()=>{class ComponentsModule{}return ComponentsModule.ɵmod=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Gb({type:ComponentsModule}),ComponentsModule.ɵinj=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Fb({factory:function(t){return new(t||ComponentsModule)},imports:[[_angular_common__WEBPACK_IMPORTED_MODULE_0__.b,_ionic_angular__WEBPACK_IMPORTED_MODULE_1__.Q]]}),ComponentsModule})()}}]);","extractedComments":[]}