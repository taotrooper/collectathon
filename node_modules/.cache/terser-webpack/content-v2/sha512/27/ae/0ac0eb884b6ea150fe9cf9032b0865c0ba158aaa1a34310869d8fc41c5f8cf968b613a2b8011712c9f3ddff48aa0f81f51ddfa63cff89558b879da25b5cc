{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{OqGx:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"CollectionPageModule\",(function(){return collection_module_CollectionPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),ionic_angular=__webpack_require__(\"TEn/\"),router=__webpack_require__(\"tyNb\"),tslib_es6=__webpack_require__(\"mrSG\"),add_collection_page=__webpack_require__(\"azo4\"),edit_collection_page=__webpack_require__(\"tCAP\"),core=__webpack_require__(\"fXoL\"),api_rest_service=__webpack_require__(\"Epai\"),edition_list_component=__webpack_require__(\"2bnu\");function CollectionPage_div_10_Template(rf,ctx){if(1&rf){const _r6=core.Mb();core.Lb(0,\"div\",10),core.Lb(1,\"ion-button\",11),core.Tb(\"click\",(function(){return core.ec(_r6),core.Vb().editCollection()})),core.Jb(2,\"ion-icon\",12),core.ic(3,\"Editar\"),core.Kb(),core.Lb(4,\"ion-button\",13),core.Tb(\"click\",(function(){return core.ec(_r6),core.Vb().deleteCollection()})),core.Jb(5,\"ion-icon\",14),core.ic(6,\"Eliminar \"),core.Kb(),core.Kb()}}function CollectionPage_ion_item_11_Template(rf,ctx){1&rf&&(core.Lb(0,\"ion-item\"),core.Lb(1,\"small\"),core.ic(2,\"La colección está vacía.\"),core.Kb(),core.Kb())}function CollectionPage_ion_item_12_Template(rf,ctx){1&rf&&(core.Lb(0,\"ion-item\"),core.Lb(1,\"small\"),core.ic(2,\"Arrastrar a la derecha para ver opciones.\"),core.Kb(),core.Kb())}function CollectionPage_ion_item_sliding_13_ion_item_option_2_Template(rf,ctx){if(1&rf){const _r12=core.Mb();core.Lb(0,\"ion-item-option\",13),core.Tb(\"click\",(function(){core.ec(_r12);const ed_r8=core.Vb().$implicit;return core.Vb().deleteEditionFromCollection(ed_r8.ItemID,ed_r8.EditionID)})),core.Jb(1,\"ion-icon\",14),core.Kb()}}function CollectionPage_ion_item_sliding_13_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-item-sliding\"),core.Lb(1,\"ion-item-options\",15),core.hc(2,CollectionPage_ion_item_sliding_13_ion_item_option_2_Template,2,0,\"ion-item-option\",16),core.Kb(),core.Jb(3,\"app-edition-list\",17),core.Kb()),2&rf){const ed_r8=ctx.$implicit,ctx_r3=core.Vb();core.yb(2),core.Yb(\"ngIf\",ctx_r3.user==ctx_r3.myuser),core.yb(1),core.Yb(\"ed\",ed_r8)}}function CollectionPage_ion_fab_14_Template(rf,ctx){if(1&rf){const _r14=core.Mb();core.Lb(0,\"ion-fab\",18),core.Lb(1,\"ion-fab-button\",1),core.Lb(2,\"ion-icon\",19),core.Tb(\"click\",(function(){return core.ec(_r14),core.Vb().goToAddCollection()})),core.Kb(),core.Kb(),core.Kb()}}const routes=[{path:\"\",component:(()=>{class CollectionPage{constructor(http,navCtrl,alertController,route,router,modalController,changeRef){this.http=http,this.navCtrl=navCtrl,this.alertController=alertController,this.route=route,this.router=router,this.modalController=modalController,this.changeRef=changeRef}ngOnInit(){this.id=this.route.snapshot.params.id,console.log(this.id),this.myuser=this.http.getUserID(),this.getEditionsInCollection(),this.getCollection(),console.log(this.ediciones),this.changeRef.detectChanges()}getEditionsInCollection(){this.ediciones=[],this.http.getEditionsInCollection(this.id).subscribe(res=>{res.body&&(this.ediciones=res.body,this.changeRef.detectChanges()),console.log(\"res: \",this.ediciones)},error=>{console.error(error)})}getCollection(){this.name=null,this.http.getCollection(this.id).subscribe(res=>{this.name=res.CollectionName,this.user=res.UserID},error=>{console.error(error)})}goToEdition(id,type){this.navCtrl.navigateForward(\"/edition/\"+this.http.getItemTypeURL(type)+\"/\"+id)}editCollection(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const modal=yield this.modalController.create({component:edit_collection_page.a,componentProps:{id:this.id}});return modal.onDidDismiss().then(dataReturned=>{this.getCollection(),this.changeRef.detectChanges()}),yield modal.present()}))}goToAddCollection(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){console.log(\"Página modal\");const modal=yield this.modalController.create({component:add_collection_page.a,componentProps:{id:this.id}});return modal.onDidDismiss().then(dataReturned=>{null!=dataReturned&&(this.ediciones=[],this.getEditionsInCollection(),this.changeRef.detectChanges())}),yield modal.present()}))}deleteCollection(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const alert=yield this.alertController.create({header:\"Confirmar\",message:\"¿Estás seguro que deseas eliminar la colección?\",buttons:[{text:\"Cancelar\",role:\"cancelar\",cssClass:\"secondary\",handler:()=>{console.log(\"Confirm Cancel\")}},{text:\"Aceptar\",handler:()=>{console.log(\"Confirm Okay\"),this.http.deleteCollection(this.id).subscribe(data=>{this.http.presentToast(data.body.Message),200==data.status&&this.navCtrl.navigateForward(\"/collections\")},error=>(console.log(error),error))}}]});yield alert.present()}))}deleteEditionFromCollection(itemID,editionID){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const alert=yield this.alertController.create({header:\"Confirmar\",message:\"¿Estás seguro que deseas eliminar edición de la colección?\",buttons:[{text:\"Cancelar\",role:\"cancelar\",cssClass:\"secondary\",handler:()=>{console.log(\"Confirm Cancel\")}},{text:\"Aceptar\",handler:()=>{console.log(\"Confirm Okay\"),this.http.removeEditionFromCollection(this.id,itemID,editionID).subscribe(data=>{this.http.presentToast(data.body.Message),this.ediciones=[],this.getEditionsInCollection(),this.changeRef.detectChanges()},error=>(console.log(error),error))}}]});yield alert.present()}))}}return CollectionPage.ɵfac=function(t){return new(t||CollectionPage)(core.Ib(api_rest_service.a),core.Ib(ionic_angular.U),core.Ib(ionic_angular.b),core.Ib(router.a),core.Ib(router.g),core.Ib(ionic_angular.T),core.Ib(core.h))},CollectionPage.ɵcmp=core.Cb({type:CollectionPage,selectors:[[\"app-collection\"]],decls:15,vars:8,consts:[[3,\"translucent\"],[\"color\",\"primary\"],[\"slot\",\"start\"],[\"defaultHref\",\"collections\"],[\"slot\",\"end\"],[3,\"fullscreen\"],[\"style\",\"text-align: center\",4,\"ngIf\"],[4,\"ngIf\"],[4,\"ngFor\",\"ngForOf\"],[\"horizontal\",\"end\",\"vertical\",\"bottom\",\"slot\",\"fixed\",4,\"ngIf\"],[2,\"text-align\",\"center\"],[3,\"click\"],[\"name\",\"pencil\"],[\"color\",\"danger\",3,\"click\"],[\"name\",\"trash\"],[\"side\",\"start\"],[\"color\",\"danger\",3,\"click\",4,\"ngIf\"],[3,\"ed\"],[\"horizontal\",\"end\",\"vertical\",\"bottom\",\"slot\",\"fixed\"],[\"name\",\"add\",3,\"click\"]],template:function(rf,ctx){1&rf&&(core.Lb(0,\"ion-header\",0),core.Lb(1,\"ion-toolbar\",1),core.Lb(2,\"ion-buttons\",2),core.Jb(3,\"ion-back-button\",3),core.Kb(),core.Lb(4,\"ion-buttons\",4),core.Jb(5,\"ion-menu-button\"),core.Kb(),core.Lb(6,\"ion-title\"),core.ic(7),core.Kb(),core.Kb(),core.Kb(),core.Lb(8,\"ion-content\",5),core.Lb(9,\"ion-list\"),core.hc(10,CollectionPage_div_10_Template,7,0,\"div\",6),core.hc(11,CollectionPage_ion_item_11_Template,3,0,\"ion-item\",7),core.hc(12,CollectionPage_ion_item_12_Template,3,0,\"ion-item\",7),core.hc(13,CollectionPage_ion_item_sliding_13_Template,4,2,\"ion-item-sliding\",8),core.Kb(),core.hc(14,CollectionPage_ion_fab_14_Template,3,0,\"ion-fab\",9),core.Kb()),2&rf&&(core.Yb(\"translucent\",!0),core.yb(7),core.jc(ctx.name),core.yb(1),core.Yb(\"fullscreen\",!0),core.yb(2),core.Yb(\"ngIf\",ctx.user==ctx.myuser),core.yb(1),core.Yb(\"ngIf\",0==ctx.ediciones.length),core.yb(1),core.Yb(\"ngIf\",ctx.ediciones.length>0&&ctx.user==ctx.myuser),core.yb(1),core.Yb(\"ngForOf\",ctx.ediciones),core.yb(1),core.Yb(\"ngIf\",ctx.user==ctx.myuser))},directives:[ionic_angular.q,ionic_angular.P,ionic_angular.i,ionic_angular.f,ionic_angular.g,ionic_angular.C,ionic_angular.N,ionic_angular.m,ionic_angular.A,common.i,common.h,ionic_angular.h,ionic_angular.r,ionic_angular.v,ionic_angular.y,ionic_angular.x,edition_list_component.a,ionic_angular.w,ionic_angular.n,ionic_angular.o],styles:[\"\"]}),CollectionPage})()}];let collection_routing_module_CollectionPageRoutingModule=(()=>{class CollectionPageRoutingModule{}return CollectionPageRoutingModule.ɵmod=core.Gb({type:CollectionPageRoutingModule}),CollectionPageRoutingModule.ɵinj=core.Fb({factory:function(t){return new(t||CollectionPageRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),CollectionPageRoutingModule})();var components_module=__webpack_require__(\"j1ZV\"),add_collection_module=__webpack_require__(\"lVYT\"),edit_collection_module=__webpack_require__(\"ZOHD\");let collection_module_CollectionPageModule=(()=>{class CollectionPageModule{}return CollectionPageModule.ɵmod=core.Gb({type:CollectionPageModule}),CollectionPageModule.ɵinj=core.Fb({factory:function(t){return new(t||CollectionPageModule)},imports:[[common.b,fesm2015_forms.g,ionic_angular.Q,components_module.a,collection_routing_module_CollectionPageRoutingModule,add_collection_module.AddCollectionPageModule,edit_collection_module.EditCollectionPageModule]]}),CollectionPageModule})()},j1ZV:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return ComponentsModule}));var _angular_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"ofXK\"),_ionic_angular__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"TEn/\"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"fXoL\");let ComponentsModule=(()=>{class ComponentsModule{}return ComponentsModule.ɵmod=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Gb({type:ComponentsModule}),ComponentsModule.ɵinj=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Fb({factory:function(t){return new(t||ComponentsModule)},imports:[[_angular_common__WEBPACK_IMPORTED_MODULE_0__.b,_ionic_angular__WEBPACK_IMPORTED_MODULE_1__.Q]]}),ComponentsModule})()}}]);","extractedComments":[]}