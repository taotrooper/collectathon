{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{\"2M5B\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"EditItemPageModule\",(function(){return edit_item_module_EditItemPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),ionic_angular=__webpack_require__(\"TEn/\"),fesm2015_router=__webpack_require__(\"tyNb\"),tslib_es6=__webpack_require__(\"mrSG\"),create_series_page=__webpack_require__(\"lNOt\"),core=__webpack_require__(\"fXoL\"),api_rest_service=__webpack_require__(\"Epai\");function EditItemPage_span_13_Template(rf,ctx){1&rf&&(core.Lb(0,\"span\",17),core.ic(1,\" Campo requerido. \"),core.Kb())}function EditItemPage_ion_select_option_20_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-select-option\",10),core.ic(1),core.Kb()),2&rf){const s_r5=ctx.$implicit;core.Yb(\"value\",s_r5.SeriesID),core.yb(1),core.kc(\" \",s_r5.SeriesName,\" \")}}function EditItemPage_ion_select_option_29_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-select-option\",10),core.ic(1),core.Kb()),2&rf){const g_r6=ctx.$implicit;core.Yb(\"value\",g_r6.GenreID),core.yb(1),core.kc(\" \",g_r6.GenreName,\" \")}}function EditItemPage_ion_select_option_33_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-select-option\",10),core.ic(1),core.Kb()),2&rf){const g_r7=ctx.$implicit;core.Yb(\"value\",g_r7.GenreID),core.yb(1),core.kc(\" \",g_r7.GenreName,\" \")}}function EditItemPage_ion_select_option_37_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"ion-select-option\",10),core.ic(1),core.Kb()),2&rf){const g_r8=ctx.$implicit;core.Yb(\"value\",g_r8.GenreID),core.yb(1),core.kc(\" \",g_r8.GenreName,\" \")}}const routes=[{path:\"\",component:(()=>{class EditItemPage{constructor(http,navCtrl,modalController,route,router,formBuilder){this.http=http,this.navCtrl=navCtrl,this.modalController=modalController,this.route=route,this.router=router,this.formBuilder=formBuilder,this.item=null,this.NewSeries=null,this.isSubmitted=!1,this.ItemID=this.route.snapshot.params.id,this.item=this.formBuilder.group({ItemName:[null,fesm2015_forms.n.required],SeriesID:[null],SeriesName:[null],GenreID1:[null],GenreID2:[null],GenreID3:[null]}),this.getSeriesList(),this.getItem(),console.log(\"type y typename: \",this.type,\" \",this.typeName)}getSeriesList(){this.http.getSeriesList().subscribe(res=>{this.series=res.body,this.series=this.series.filter(o=>o.CreatorUserID>0),console.log(\"Series:\",this.series)},error=>{console.error(error)})}getGenreList(){console.log(\"busco géneros de \",this.type),this.http.getGenreList(this.type).subscribe(res=>{this.genres=res.body,console.log(\"Géneros \",this.genres)},error=>{console.error(error)})}getItem(){this.http.getItem(this.ItemID).subscribe(res=>{this.item=this.formBuilder.group({ItemID:[res.ItemID],ItemName:[res.ItemName],SeriesID:[res.SeriesID],GenreID1:[res.GenreID1],GenreID2:[res.GenreID2],GenreID3:[res.GenreID3]}),this.ItemType=res.ItemType,this.type=this.http.getItemTypeURL(this.ItemType),this.typeName=this.http.getItemTypeName(this.type),console.log(\"todo: \",this.item),console.log(this.type),this.getGenreList()},error=>{console.error(error)})}ngOnInit(){}goToNewSeries(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){console.log(\"Página modal\");const modal=yield this.modalController.create({component:create_series_page.a,componentProps:{paramID:123}});return modal.onDidDismiss().then(dataReturned=>{null!=dataReturned&&(this.series=[],this.NewSeries=dataReturned,console.log(\"New Series: \",this.NewSeries),this.getSeriesList())}),yield modal.present()}))}submitForm(){if(this.isSubmitted=!0,!this.item.valid)return console.log(\"Please provide all the required values!\"),!1;console.log(this.item.value);var res=this.http.updateItem(this.item.value,this.ItemID);console.log(\"Resultado: \",res),this.navCtrl.navigateForward(\"/item/\"+this.type+\"/\"+this.ItemID)}get errorControl(){return this.item.controls}}return EditItemPage.ɵfac=function(t){return new(t||EditItemPage)(core.Ib(api_rest_service.a),core.Ib(ionic_angular.U),core.Ib(ionic_angular.T),core.Ib(fesm2015_router.a),core.Ib(fesm2015_router.g),core.Ib(fesm2015_forms.a))},EditItemPage.ɵcmp=core.Cb({type:EditItemPage,selectors:[[\"app-edit-item\"]],decls:43,vars:18,consts:[[\"color\",\"primary\"],[\"slot\",\"start\"],[3,\"defaultHref\"],[\"padding\",\"\",3,\"fullscreen\"],[\"novalidate\",\"\",3,\"formGroup\",\"ngSubmit\"],[\"lines\",\"full\"],[\"position\",\"stacked\"],[\"placeholder\",\"Nombre\",\"formControlName\",\"ItemName\",\"type\",\"text\",\"required\",\"\",3,\"value\"],[\"class\",\"error ion-padding\",4,\"ngIf\"],[\"okText\",\"Aceptar\",\"cancelText\",\"Cancelar\",\"interface\",\"alert\",\"placeholder\",\"Seleccionar\",\"formControlName\",\"SeriesID\",\"type\",\"text\",3,\"value\"],[3,\"value\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[\"small\",\"\",3,\"click\"],[\"okText\",\"Aceptar\",\"cancelText\",\"Cancelar\",\"interface\",\"alert\",\"placeholder\",\"Seleccionar\",\"formControlName\",\"GenreID1\",\"type\",\"text\",3,\"value\"],[\"okText\",\"Aceptar\",\"cancelText\",\"Cancelar\",\"interface\",\"alert\",\"placeholder\",\"Seleccionar\",\"formControlName\",\"GenreID2\",\"type\",\"text\",3,\"value\"],[\"okText\",\"Aceptar\",\"cancelText\",\"Cancelar\",\"interface\",\"alert\",\"placeholder\",\"Seleccionar\",\"formControlName\",\"GenreID3\",\"type\",\"text\",3,\"value\"],[\"small\",\"\",\"expand\",\"inline\",\"shape\",\"round\",\"color\",\"primary\",\"type\",\"submit\"],[1,\"error\",\"ion-padding\"]],template:function(rf,ctx){1&rf&&(core.Lb(0,\"ion-header\"),core.Lb(1,\"ion-toolbar\",0),core.Lb(2,\"ion-buttons\",1),core.Jb(3,\"ion-back-button\",2),core.Kb(),core.Lb(4,\"ion-title\"),core.ic(5,\"Editar item\"),core.Kb(),core.Kb(),core.Kb(),core.Lb(6,\"ion-content\",3),core.Lb(7,\"form\",4),core.Tb(\"ngSubmit\",(function(){return ctx.submitForm()})),core.Lb(8,\"ion-list\"),core.Lb(9,\"ion-item\",5),core.Lb(10,\"ion-label\",6),core.ic(11,\"Nombre del item\"),core.Kb(),core.Jb(12,\"ion-input\",7),core.hc(13,EditItemPage_span_13_Template,2,0,\"span\",8),core.Kb(),core.Lb(14,\"ion-item\",5),core.Lb(15,\"ion-label\",6),core.ic(16,\"Serie\"),core.Kb(),core.Lb(17,\"ion-select\",9),core.Lb(18,\"ion-select-option\",10),core.ic(19,\"Ninguna\"),core.Kb(),core.hc(20,EditItemPage_ion_select_option_20_Template,2,2,\"ion-select-option\",11),core.Kb(),core.Lb(21,\"ion-button\",12),core.Tb(\"click\",(function(){return ctx.goToNewSeries()})),core.ic(22,\"Nueva serie...\"),core.Kb(),core.Kb(),core.Lb(23,\"ion-item\",5),core.Lb(24,\"ion-label\",6),core.ic(25,\"Géneros (elige hasta 3)\"),core.Kb(),core.Lb(26,\"ion-select\",13),core.Lb(27,\"ion-select-option\",10),core.ic(28,\"Ninguno\"),core.Kb(),core.hc(29,EditItemPage_ion_select_option_29_Template,2,2,\"ion-select-option\",11),core.Kb(),core.Lb(30,\"ion-select\",14),core.Lb(31,\"ion-select-option\",10),core.ic(32,\"Ninguno\"),core.Kb(),core.hc(33,EditItemPage_ion_select_option_33_Template,2,2,\"ion-select-option\",11),core.Kb(),core.Lb(34,\"ion-select\",15),core.Lb(35,\"ion-select-option\",10),core.ic(36,\"Ninguno\"),core.Kb(),core.hc(37,EditItemPage_ion_select_option_37_Template,2,2,\"ion-select-option\",11),core.Kb(),core.Kb(),core.Kb(),core.Lb(38,\"ion-grid\"),core.Lb(39,\"ion-row\"),core.Lb(40,\"ion-col\"),core.Lb(41,\"ion-button\",16),core.ic(42,\"Enviar\"),core.Kb(),core.Kb(),core.Kb(),core.Kb(),core.Kb(),core.Kb()),2&rf&&(core.yb(3),core.bc(\"defaultHref\",\"/item/\",ctx.type,\"/\",ctx.ItemID,\"\"),core.yb(3),core.Yb(\"fullscreen\",!0),core.yb(1),core.Yb(\"formGroup\",ctx.item),core.yb(5),core.Yb(\"value\",ctx.item.ItemName),core.yb(1),core.Yb(\"ngIf\",ctx.isSubmitted&&(null==ctx.errorControl.ItemName.errors?null:ctx.errorControl.ItemName.errors.required)),core.yb(4),core.Zb(\"value\",ctx.item.SeriesID),core.yb(1),core.Yb(\"value\",null),core.yb(2),core.Yb(\"ngForOf\",ctx.series),core.yb(6),core.Zb(\"value\",ctx.item.GenreID1),core.yb(1),core.Yb(\"value\",null),core.yb(2),core.Yb(\"ngForOf\",ctx.genres),core.yb(1),core.Zb(\"value\",ctx.item.GenreID2),core.yb(1),core.Yb(\"value\",null),core.yb(2),core.Yb(\"ngForOf\",ctx.genres),core.yb(1),core.Zb(\"value\",ctx.item.GenreID3),core.yb(1),core.Yb(\"value\",null),core.yb(2),core.Yb(\"ngForOf\",ctx.genres))},directives:[ionic_angular.q,ionic_angular.P,ionic_angular.i,ionic_angular.f,ionic_angular.g,ionic_angular.N,ionic_angular.m,fesm2015_forms.o,fesm2015_forms.k,fesm2015_forms.f,ionic_angular.A,ionic_angular.v,ionic_angular.z,ionic_angular.u,ionic_angular.ab,fesm2015_forms.j,fesm2015_forms.d,fesm2015_forms.m,common.i,ionic_angular.J,ionic_angular.Z,ionic_angular.K,common.h,ionic_angular.h,ionic_angular.p,ionic_angular.F,ionic_angular.l],styles:[\"\"]}),EditItemPage})()}];let edit_item_routing_module_EditItemPageRoutingModule=(()=>{class EditItemPageRoutingModule{}return EditItemPageRoutingModule.ɵmod=core.Gb({type:EditItemPageRoutingModule}),EditItemPageRoutingModule.ɵinj=core.Fb({factory:function(t){return new(t||EditItemPageRoutingModule)},imports:[[fesm2015_router.i.forChild(routes)],fesm2015_router.i]}),EditItemPageRoutingModule})();var create_series_module=__webpack_require__(\"wk2u\");let edit_item_module_EditItemPageModule=(()=>{class EditItemPageModule{}return EditItemPageModule.ɵmod=core.Gb({type:EditItemPageModule}),EditItemPageModule.ɵinj=core.Fb({factory:function(t){return new(t||EditItemPageModule)},imports:[[common.b,fesm2015_forms.g,fesm2015_forms.l,ionic_angular.Q,edit_item_routing_module_EditItemPageRoutingModule,create_series_module.CreateSeriesPageModule]]}),EditItemPageModule})()}}]);","extractedComments":[]}