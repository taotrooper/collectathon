(window.webpackJsonp=window.webpackJsonp||[]).push([[2,43],{"/WS/":function(t,i,e){"use strict";e.d(i,"a",(function(){return K}));var o=e("mrSG"),n=e("fXoL"),s=e("Epai"),r=e("TEn/"),a=e("bE9v"),c=e("ofXK");function b(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"A\xf1o:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Year,"")}}function l(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"EAN13:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.EAN13,"")}}function d(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"ISBN:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.ISBNComic,"")}}function h(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Tipo:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.TipoComic,"")}}function u(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Formato:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.FormatoComic,"")}}function g(t,i){1&t&&(n.Lb(0,"strong"),n.ic(1,"N\xba:"),n.Kb())}function f(t,i){1&t&&(n.Lb(0,"strong"),n.ic(1,"Tomo:"),n.Kb())}function m(t,i){if(1&t&&(n.Lb(0,"span"),n.hc(1,g,2,0,"strong",1),n.hc(2,f,2,0,"strong",1),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(1),n.Yb("ngIf","Grapas"===t.TipoComic),n.yb(1),n.Yb("ngIf","Grapas"!==t.TipoComic),n.yb(1),n.kc(" ",t.NroComic,"")}}function p(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Editorial:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.EditorialComic,"")}}function I(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Origen:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Origen,"")}}function y(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Idioma:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.IdiomaComic,"")}}function C(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",4),n.Tb("click",(function(){return n.ec(t),n.Vb().addEditionToUser()})),n.ic(1,"Agregar a mis items"),n.Kb()}}function E(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",4),n.Tb("click",(function(){return n.ec(t),n.Vb().removeEditionFromUser()})),n.ic(1,"Quitar de mis items"),n.Kb()}}function L(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",4),n.Tb("click",(function(){return n.ec(t),n.Vb().goToEdit()})),n.ic(1,"Editar"),n.Kb()}}function v(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",5),n.Tb("click",(function(){return n.ec(t),n.Vb().deleteEdition()})),n.ic(1,"Eliminar"),n.Kb()}}let K=(()=>{class t{constructor(t,i,e){this.http=t,this.navCtrl=i,this.alertCtrl=e}ngOnInit(){console.log("comic: ",this.id),this.getEdition(),this.getIsEditionOwned(),this.user=this.http.getUserID(),console.log(this.id," creator y user: ",this.CreatorUserID," ",this.user)}getEdition(){this.http.getEdition(this.id,"comic").subscribe(t=>{console.log("detalles: ",t),this.ItemID=t.ItemID,this.Year=t.Year,this.EAN13=t.EAN13,this.ISBNComic=t.ISBNComic,this.TipoComic=t.TipoComic,this.FormatoComic=t.FormatoComic,this.NroComic=t.NroComic,this.EditorialComic=t.EditorialComic,this.Origen=t.Origen,this.IdiomaComic=t.IdiomaComic,this.CreatorUserID=t.CreatorUserID},t=>{console.error(t)})}getIsEditionOwned(){this.http.getEditionOwned(this.id).subscribe(t=>{this.isOwned=t.body?t.body[0].IsOwned:null,console.log("isOwned:",this.isOwned)},t=>{console.error(t)})}goToEdit(){this.navCtrl.navigateForward("/edit-comic/"+this.id)}addEditionToUser(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:"Confirmar",message:"\xbfTienes esta edici\xf3n?",buttons:[{text:"Lo tengo",handler:()=>{this.http.addEditionToUser(this.id,"comic",1)}},{text:"A\xf1adir a lista de deseos",handler:()=>{this.http.addEditionToUser(this.id,"comic",0)}},{text:"Cancelar",role:"cancel",handler:()=>{console.log("Cancelar")}}]});yield t.present(),this.navCtrl.navigateForward("/edition/comic/"+this.id)}))}removeEditionFromUser(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:"Confirmar",message:"\xbfEst\xe1s seguro que deseas borrar la edici\xf3n de tus items? Esto no eliminar\xe1 la edici\xf3n de la base de datos.",buttons:[{text:"Cancelar",role:"cancelar",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Aceptar",handler:()=>{console.log("Confirm Okay"),this.http.removeEditionFromUser(this.id).subscribe(t=>{this.http.presentToast(t.body.Message),200==t.status&&this.getIsEditionOwned()},t=>(console.log(t),t))}}]});yield t.present(),this.navCtrl.navigateForward("/edition/comic/"+this.id)}))}deleteEdition(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:"Confirmar",message:"\xbfSeguro que deseas eliminar permanentemente la edici\xf3n?",buttons:[{text:"Aceptar",handler:()=>{this.http.deleteEdition(this.id,"comic").subscribe(t=>{this.http.presentToast(t.body.Message),200==t.status&&this.navCtrl.navigateForward("/item/comic/"+this.ItemID)},t=>(console.log(t),t))}},{text:"Cancelar",role:"cancel",handler:()=>{console.log("Cancelar")}}]});yield t.present()}))}}return t.\u0275fac=function(i){return new(i||t)(n.Ib(s.a),n.Ib(r.U),n.Ib(r.b))},t.\u0275cmp=n.Cb({type:t,selectors:[["app-detail-comic"]],inputs:{id:"id"},decls:14,vars:15,consts:[[3,"id","isCreator"],[4,"ngIf"],[3,"click",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],[3,"click"],["color","danger",3,"click"]],template:function(t,i){1&t&&(n.Jb(0,"app-image-edition",0),n.hc(1,b,5,1,"span",1),n.hc(2,l,5,1,"span",1),n.hc(3,d,5,1,"span",1),n.hc(4,h,5,1,"span",1),n.hc(5,u,5,1,"span",1),n.hc(6,m,5,3,"span",1),n.hc(7,p,5,1,"span",1),n.hc(8,I,5,1,"span",1),n.hc(9,y,5,1,"span",1),n.hc(10,C,2,0,"ion-button",2),n.hc(11,E,2,0,"ion-button",2),n.hc(12,L,2,0,"ion-button",2),n.hc(13,v,2,0,"ion-button",3)),2&t&&(n.Yb("id",i.id)("isCreator",i.CreatorUserID==i.user),n.yb(1),n.Yb("ngIf",0!=i.Year),n.yb(1),n.Yb("ngIf",i.EAN13),n.yb(1),n.Yb("ngIf",i.ISBNComic),n.yb(1),n.Yb("ngIf",i.TipoComic),n.yb(1),n.Yb("ngIf",i.FormatoComic),n.yb(1),n.Yb("ngIf",i.NroComic),n.yb(1),n.Yb("ngIf",i.EditorialComic),n.yb(1),n.Yb("ngIf",i.Origen),n.yb(1),n.Yb("ngIf",i.IdiomaComic),n.yb(1),n.Yb("ngIf",null==i.isOwned),n.yb(1),n.Yb("ngIf",i.isOwned),n.yb(1),n.Yb("ngIf",i.CreatorUserID==i.user),n.yb(1),n.Yb("ngIf",i.CreatorUserID==i.user))},directives:[a.a,c.i,r.h],styles:[""]}),t})()},"0Gmn":function(t,i,e){"use strict";e.d(i,"a",(function(){return h}));var o=e("mrSG"),n=e("3Pt+"),s=e("fXoL"),r=e("TEn/"),a=e("Epai"),c=e("tyNb"),b=e("ofXK");function l(t,i){1&t&&(s.Lb(0,"span",12),s.ic(1," Campo requerido. "),s.Kb())}function d(t,i){1&t&&(s.Lb(0,"span",12),s.ic(1," Campo requerido. "),s.Kb())}let h=(()=>{class t{constructor(t,i,e,o,s,r,a){this.modalController=t,this.navParams=i,this.http=e,this.navCtrl=o,this.route=s,this.router=r,this.formBuilder=a,this.web=null,this.isSubmitted=!1,this.web=new n.e({URL:new n.b,Text:new n.b})}ngOnInit(){this.id=this.navParams.data.id,this.getWebsite()}getWebsite(){this.http.getWebsite(this.id).subscribe(t=>{this.web=this.formBuilder.group({URL:[t.URL,n.n.required],Text:[t.Text,n.n.required]}),console.log("res: ",t)},t=>{console.error(t)})}submitForm(){if(this.isSubmitted=!0,!this.web.valid)return console.log("Please provide all the required values!"),!1;this.web.value.WebsiteID=this.id,console.log(this.web.value),this.http.updateWebsite(this.web.value).subscribe(t=>{console.log("Web "+t.body),this.WebsiteID=t.body.WebsiteID,console.log("antes de cerrar modal ",this.WebsiteID),this.closeModal()},t=>{console.log(t)})}get errorControl(){return this.web.controls}closeModal(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.modalController.dismiss(this.WebsiteID)}))}}return t.\u0275fac=function(i){return new(i||t)(s.Ib(r.T),s.Ib(r.V),s.Ib(a.a),s.Ib(r.U),s.Ib(c.a),s.Ib(c.g),s.Ib(n.a))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-edit-website"]],decls:30,vars:6,consts:[["color","primary"],["slot","start"],["padding","",3,"fullscreen"],["novalidate","",3,"formGroup","ngSubmit"],["lines","full"],["position","stacked"],[2,"color","red"],["placeholder","http://www.ejemplo.com/pagina","formControlName","URL","type","url","required","",3,"value"],["class","error ion-padding",4,"ngIf"],["placeholder","Ejemplo: Amazon, Wikipedia, IMDB, etc.","formControlName","Text","type","text","required","",3,"value"],["small","","expand","inline","shape","round","color","primary","type","submit"],["small","","expand","inline","shape","round","color","primary",3,"click"],[1,"error","ion-padding"]],template:function(t,i){1&t&&(s.Lb(0,"ion-header"),s.Lb(1,"ion-toolbar",0),s.Jb(2,"ion-buttons",1),s.Lb(3,"ion-title"),s.ic(4,"Editar p\xe1gina web"),s.Kb(),s.Kb(),s.Kb(),s.Lb(5,"ion-content",2),s.Lb(6,"form",3),s.Tb("ngSubmit",(function(){return i.submitForm()})),s.Lb(7,"ion-list"),s.Lb(8,"ion-item",4),s.Lb(9,"ion-label",5),s.Lb(10,"span",6),s.ic(11,"*"),s.Kb(),s.ic(12,"URL/Direcci\xf3n"),s.Kb(),s.Jb(13,"ion-input",7),s.hc(14,l,2,0,"span",8),s.Kb(),s.Lb(15,"ion-item",4),s.Lb(16,"ion-label",5),s.Lb(17,"span",6),s.ic(18,"*"),s.Kb(),s.ic(19,"Texto del enlace"),s.Kb(),s.Jb(20,"ion-input",9),s.hc(21,d,2,0,"span",8),s.Kb(),s.Kb(),s.Lb(22,"ion-grid"),s.Lb(23,"ion-row"),s.Lb(24,"ion-col"),s.Lb(25,"ion-button",10),s.ic(26,"Enviar"),s.Kb(),s.Kb(),s.Lb(27,"ion-col"),s.Lb(28,"ion-button",11),s.Tb("click",(function(){return i.closeModal()})),s.ic(29,"Cancelar"),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb()),2&t&&(s.yb(5),s.Yb("fullscreen",!0),s.yb(1),s.Yb("formGroup",i.web),s.yb(7),s.Yb("value",i.web.URL),s.yb(1),s.Yb("ngIf",i.isSubmitted&&(null==i.errorControl.URL.errors?null:i.errorControl.URL.errors.required)),s.yb(6),s.Yb("value",i.web.Text),s.yb(1),s.Yb("ngIf",i.isSubmitted&&(null==i.errorControl.Text.errors?null:i.errorControl.Text.errors.required)))},directives:[r.q,r.P,r.i,r.N,r.m,n.o,n.k,n.f,r.A,r.v,r.z,r.u,r.ab,n.j,n.d,n.m,b.i,r.p,r.F,r.l,r.h],styles:[""]}),t})()},SXrq:function(t,i,e){"use strict";e.d(i,"a",(function(){return E}));var o=e("mrSG"),n=e("fXoL"),s=e("Epai"),r=e("TEn/"),a=e("bE9v"),c=e("ofXK");function b(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"A\xf1o:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Year,"")}}function l(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"EAN13:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.EAN13,"")}}function d(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"ISBN:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.ISBN,"")}}function h(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"N\xba p\xe1ginas:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.NroPaginas,"")}}function u(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Editorial:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Editorial,"")}}function g(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Edici\xf3n:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Edicion,"\xaa")}}function f(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Idioma:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Idioma,"")}}function m(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Tipo:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Tipo,"")}}function p(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",4),n.Tb("click",(function(){return n.ec(t),n.Vb().addEditionToUser()})),n.ic(1,"Agregar a mis items"),n.Kb()}}function I(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",4),n.Tb("click",(function(){return n.ec(t),n.Vb().removeEditionFromUser()})),n.ic(1,"Quitar de mis items"),n.Kb()}}function y(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",4),n.Tb("click",(function(){return n.ec(t),n.Vb().goToEdit()})),n.ic(1,"Editar"),n.Kb()}}function C(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",5),n.Tb("click",(function(){return n.ec(t),n.Vb().deleteEdition()})),n.ic(1,"Eliminar"),n.Kb()}}let E=(()=>{class t{constructor(t,i,e,o){this.http=t,this.navCtrl=i,this.alertCtrl=e,this.changeRef=o}ngOnInit(){console.log("book: ",this.id),this.getEdition(),this.getIsEditionOwned(),this.user=this.http.getUserID(),console.log(this.id," creator y user: ",this.CreatorUserID," ",this.user)}getEdition(){this.http.getEdition(this.id,"book").subscribe(t=>{console.log("detalles: ",t),this.ItemID=t.ItemID,this.Year=t.Year,this.EAN13=t.EAN13,this.ISBN=t.ISBN,this.NroPaginas=t.NroPaginas,this.Editorial=t.Editorial,this.Edicion=t.Edicion,this.Idioma=t.Idioma,this.Tipo=t.Tipo,this.CreatorUserID=t.CreatorUserID},t=>{console.error(t)})}getIsEditionOwned(){this.http.getEditionOwned(this.id).subscribe(t=>{this.isOwned=t.body?1:null,console.log("isOwned:",this.isOwned)},t=>{console.error(t),this.isOwned=null}),console.log("isOwned:",this.isOwned)}goToEdit(){this.navCtrl.navigateForward("/edit-book/"+this.id)}addEditionToUser(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:"Confirmar",message:"\xbfTienes esta edici\xf3n?",buttons:[{text:"Lo tengo",handler:()=>{console.log(this.isOwned),this.http.addEditionToUser(this.id,"book",1),this.getIsEditionOwned(),console.log(this.isOwned),this.changeRef.detectChanges()}},{text:"A\xf1adir a lista de deseos",handler:()=>{this.http.addEditionToUser(this.id,"book",0),this.getIsEditionOwned(),this.changeRef.detectChanges()}},{text:"Cancelar",role:"cancel",handler:()=>{console.log("Cancelar")}}]});yield t.present(),this.navCtrl.navigateForward("/edition/book/"+this.id)}))}removeEditionFromUser(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:"Confirmar",message:"\xbfEst\xe1s seguro que deseas borrar la edici\xf3n de tus items? Esto no eliminar\xe1 la edici\xf3n de la base de datos.",buttons:[{text:"Cancelar",role:"cancelar",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Aceptar",handler:()=>{console.log("Confirm Okay"),this.http.removeEditionFromUser(this.id).subscribe(t=>{this.http.presentToast(t.body.Message),200==t.status&&(this.getIsEditionOwned(),this.changeRef.detectChanges())},t=>(console.log(t),t))}}]});yield t.present(),this.navCtrl.navigateForward("/edition/book/"+this.id)}))}deleteEdition(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:"Confirmar",message:"\xbfSeguro que deseas eliminar permanentemente la edici\xf3n?",buttons:[{text:"Aceptar",handler:()=>{this.http.deleteEdition(this.id,"book").subscribe(t=>{this.http.presentToast(t.body.Message),200==t.status&&this.navCtrl.navigateForward("/item/book/"+this.ItemID)},t=>(console.log(t),t))}},{text:"Cancelar",role:"cancel",handler:()=>{console.log("Cancelar")}}]});yield t.present()}))}}return t.\u0275fac=function(i){return new(i||t)(n.Ib(s.a),n.Ib(r.U),n.Ib(r.b),n.Ib(n.h))},t.\u0275cmp=n.Cb({type:t,selectors:[["app-detail-book"]],inputs:{id:"id"},decls:13,vars:14,consts:[[3,"id","isCreator"],[4,"ngIf"],[3,"click",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],[3,"click"],["color","danger",3,"click"]],template:function(t,i){1&t&&(n.Jb(0,"app-image-edition",0),n.hc(1,b,5,1,"span",1),n.hc(2,l,5,1,"span",1),n.hc(3,d,5,1,"span",1),n.hc(4,h,5,1,"span",1),n.hc(5,u,5,1,"span",1),n.hc(6,g,5,1,"span",1),n.hc(7,f,5,1,"span",1),n.hc(8,m,5,1,"span",1),n.hc(9,p,2,0,"ion-button",2),n.hc(10,I,2,0,"ion-button",2),n.hc(11,y,2,0,"ion-button",2),n.hc(12,C,2,0,"ion-button",3)),2&t&&(n.Yb("id",i.id)("isCreator",i.CreatorUserID==i.user),n.yb(1),n.Yb("ngIf",0!=i.Year),n.yb(1),n.Yb("ngIf",i.EAN13),n.yb(1),n.Yb("ngIf",i.ISBN),n.yb(1),n.Yb("ngIf",i.NroPaginas),n.yb(1),n.Yb("ngIf",i.Editorial),n.yb(1),n.Yb("ngIf",i.Edicion>0),n.yb(1),n.Yb("ngIf",i.Idioma),n.yb(1),n.Yb("ngIf",i.Tipo),n.yb(1),n.Yb("ngIf",!i.isOwned),n.yb(1),n.Yb("ngIf",i.isOwned),n.yb(1),n.Yb("ngIf",i.CreatorUserID==i.user),n.yb(1),n.Yb("ngIf",i.CreatorUserID==i.user))},directives:[a.a,c.i,r.h],styles:[""]}),t})()},Tjrf:function(t,i,e){"use strict";e.d(i,"a",(function(){return v}));var o=e("mrSG"),n=e("fXoL"),s=e("Epai"),r=e("TEn/"),a=e("bE9v"),c=e("ofXK");function b(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"A\xf1o:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Year,"")}}function l(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"EAN13:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.EAN13,"")}}function d(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Formato:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.FormatoVideo,"")}}function h(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Tipo de V\xeddeo:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.TipoVideo,"")}}function u(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Sistema:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Sistema,"")}}function g(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"N\xba Discos:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.NroDiscosVideo,"")}}function f(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Regi\xf3n:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.RegionVideo,"")}}function m(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Temporada:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Temporada,"")}}function p(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Volumen:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.VolumenVideo,"")}}function I(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"N\xba Ep\xecsodios:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.NroEpisodios,"")}}function y(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",4),n.Tb("click",(function(){return n.ec(t),n.Vb().addEditionToUser()})),n.ic(1,"Agregar a mis items"),n.Kb()}}function C(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",4),n.Tb("click",(function(){return n.ec(t),n.Vb().removeEditionFromUser()})),n.ic(1,"Quitar de mis items"),n.Kb()}}function E(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",4),n.Tb("click",(function(){return n.ec(t),n.Vb().goToEdit()})),n.ic(1,"Editar"),n.Kb()}}function L(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",5),n.Tb("click",(function(){return n.ec(t),n.Vb().deleteEdition()})),n.ic(1,"Eliminar"),n.Kb()}}let v=(()=>{class t{constructor(t,i,e){this.http=t,this.navCtrl=i,this.alertCtrl=e}ngOnInit(){console.log("video: ",this.id),this.getEdition(),this.getIsEditionOwned(),this.user=this.http.getUserID(),console.log(this.id," creator y user: ",this.CreatorUserID," ",this.user)}getEdition(){this.http.getEdition(this.id,"video").subscribe(t=>{console.log("detalles: ",t),this.ItemID=t.ItemID,this.Year=t.Year,this.EAN13=t.EAN13,this.FormatoVideo=t.FormatoVideo,this.TipoVideo=t.TipoVideo,this.Sistema=t.Sistema,this.NroDiscosVideo=t.NroDiscosVideo,this.RegionVideo=t.RegionVideo,this.Temporada=t.Temporada,this.VolumenVideo=t.VolumenVideo,this.NroEpisodios=t.NroEpisodios,this.CreatorUserID=t.CreatorUserID},t=>{console.error(t)})}getIsEditionOwned(){this.http.getEditionOwned(this.id).subscribe(t=>{this.isOwned=t.body?t.body[0].IsOwned:null,console.log("isOwned:",this.isOwned)},t=>{console.error(t)})}goToEdit(){this.navCtrl.navigateForward("/edit-video/"+this.id)}addEditionToUser(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:"Confirmar",message:"\xbfTienes esta edici\xf3n?",buttons:[{text:"Lo tengo",handler:()=>{this.http.addEditionToUser(this.id,"video",1)}},{text:"A\xf1adir a lista de deseos",handler:()=>{this.http.addEditionToUser(this.id,"video",0)}},{text:"Cancelar",role:"cancel",handler:()=>{console.log("Cancelar")}}]});yield t.present(),this.navCtrl.navigateForward("/edition/video/"+this.id)}))}removeEditionFromUser(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:"Confirmar",message:"\xbfEst\xe1s seguro que deseas borrar la edici\xf3n de tus items? Esto no eliminar\xe1 la edici\xf3n de la base de datos.",buttons:[{text:"Cancelar",role:"cancelar",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Aceptar",handler:()=>{console.log("Confirm Okay"),this.http.removeEditionFromUser(this.id).subscribe(t=>{this.http.presentToast(t.body.Message),200==t.status&&this.getIsEditionOwned()},t=>(console.log(t),t))}}]});yield t.present(),this.navCtrl.navigateForward("/edition/video/"+this.id)}))}deleteEdition(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:"Confirmar",message:"\xbfSeguro que deseas eliminar permanentemente la edici\xf3n?",buttons:[{text:"Aceptar",handler:()=>{this.http.deleteEdition(this.id,"video").subscribe(t=>{this.http.presentToast(t.body.Message),200==t.status&&this.navCtrl.navigateForward("/item/video/"+this.ItemID)},t=>(console.log(t),t))}},{text:"Cancelar",role:"cancel",handler:()=>{console.log("Cancelar")}}]});yield t.present()}))}}return t.\u0275fac=function(i){return new(i||t)(n.Ib(s.a),n.Ib(r.U),n.Ib(r.b))},t.\u0275cmp=n.Cb({type:t,selectors:[["app-detail-video"]],inputs:{id:"id"},decls:15,vars:16,consts:[[3,"id","isCreator"],[4,"ngIf"],[3,"click",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],[3,"click"],["color","danger",3,"click"]],template:function(t,i){1&t&&(n.Jb(0,"app-image-edition",0),n.hc(1,b,5,1,"span",1),n.hc(2,l,5,1,"span",1),n.hc(3,d,5,1,"span",1),n.hc(4,h,5,1,"span",1),n.hc(5,u,5,1,"span",1),n.hc(6,g,5,1,"span",1),n.hc(7,f,5,1,"span",1),n.hc(8,m,5,1,"span",1),n.hc(9,p,5,1,"span",1),n.hc(10,I,5,1,"span",1),n.hc(11,y,2,0,"ion-button",2),n.hc(12,C,2,0,"ion-button",2),n.hc(13,E,2,0,"ion-button",2),n.hc(14,L,2,0,"ion-button",3)),2&t&&(n.Yb("id",i.id)("isCreator",i.CreatorUserID==i.user),n.yb(1),n.Yb("ngIf",0!=i.Year),n.yb(1),n.Yb("ngIf",i.EAN13),n.yb(1),n.Yb("ngIf",i.FormatoVideo),n.yb(1),n.Yb("ngIf",i.TipoVideo),n.yb(1),n.Yb("ngIf",i.Sistema),n.yb(1),n.Yb("ngIf",i.NroDiscosVideo>0),n.yb(1),n.Yb("ngIf",i.RegionVideo),n.yb(1),n.Yb("ngIf",i.Temporada>0),n.yb(1),n.Yb("ngIf",i.VolumenVideo>0),n.yb(1),n.Yb("ngIf",i.NroEpisodios>0),n.yb(1),n.Yb("ngIf",null==i.isOwned),n.yb(1),n.Yb("ngIf",i.isOwned),n.yb(1),n.Yb("ngIf",i.CreatorUserID==i.user),n.yb(1),n.Yb("ngIf",i.CreatorUserID==i.user))},directives:[a.a,c.i,r.h],styles:[""]}),t})()},bE9v:function(t,i,e){"use strict";e.d(i,"a",(function(){return I}));var o=e("mrSG"),n=e("nYR2"),s=e("fXoL"),r=e("tyNb"),a=e("TEn/"),c=e("KqBo"),b=e("B7Vy"),l=e("Epai"),d=e("eHpL"),h=e("e8h1"),u=e("G769"),g=e("ofXK");function f(t,i){if(1&t&&(s.Lb(0,"a",4),s.Lb(1,"ion-thumbnail",5),s.Jb(2,"img",6),s.Kb(),s.Kb()),2&t){const t=s.Vb();s.Zb("href",t.imageurl,s.fc),s.yb(2),s.Zb("src",t.thumburl,s.fc)}}function m(t,i){if(1&t&&(s.Lb(0,"ion-thumbnail",5),s.Jb(1,"img",6),s.Kb()),2&t){const t=s.Vb();s.yb(1),s.Zb("src",t.thumburl,s.fc)}}function p(t,i){if(1&t){const t=s.Mb();s.Lb(0,"ion-button",7),s.Tb("click",(function(){return s.ec(t),s.Vb().selectImage()})),s.Jb(1,"ion-icon",8),s.Kb()}}let I=(()=>{class t{constructor(t,i,e,o,n,s,r,a,c,b,l,d,h){this.route=t,this.navCtrl=i,this.camera=e,this.file=o,this.http=n,this.webview=s,this.actionSheetController=r,this.toastController=a,this.storage=c,this.plt=b,this.loadingController=l,this.ref=d,this.filePath=h,this.imageurl=null,this.thumburl=null,this.imgserver="http://www.mercury-retrograde.net/tfm/collectathon/uploads/",this.thumbdir="http://www.mercury-retrograde.net/tfm/collectathon/uploads/thumb/"}ngOnInit(){this.http.findEditionImage(this.id).subscribe(t=>{console.log(t.found),1==t.found?(console.log("Found!"),this.imageurl=this.imgserver+t.filename,this.thumburl=this.thumbdir+t.filename):(console.log(this.id," not found!"),this.imageurl=null,this.thumburl="../../assets/noimage.jpg")},t=>{console.error(t)}),console.log(this.imageurl)}presentToast(t){return Object(o.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:t,position:"bottom",duration:3e3})).present()}))}pathForImage(t){return null===t?"":this.webview.convertFileSrc(t)}selectImage(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.actionSheetController.create({header:"Seleccionar fuente",buttons:[{text:"Cargar imagen",handler:()=>{this.takePicture(this.camera.PictureSourceType.PHOTOLIBRARY)}},{text:"Tomar foto",handler:()=>{this.takePicture(this.camera.PictureSourceType.CAMERA)}},{text:"Cancelar",role:"cancel"}]});yield t.present()}))}takePicture(t){this.camera.getPicture({quality:100,sourceType:t,saveToPhotoAlbum:!1,correctOrientation:!0}).then(i=>{if(this.plt.is("android")&&t===this.camera.PictureSourceType.PHOTOLIBRARY)this.filePath.resolveNativePath(i).then(t=>{let e=t.substr(0,t.lastIndexOf("/")+1),o=i.substring(i.lastIndexOf("/")+1,i.lastIndexOf("?"));this.copyFileToLocalDir(e,o,this.createFileName())});else{var e=i.substr(i.lastIndexOf("/")+1),o=i.substr(0,i.lastIndexOf("/")+1);this.copyFileToLocalDir(o,e,this.createFileName())}})}updateStoredImage(t){this.storage.get("my_images").then(i=>{let e=JSON.parse(i);e?(e.push(t),this.storage.set("my_images",JSON.stringify(e))):this.storage.set("my_images",JSON.stringify([t]));let o=this.file.dataDirectory+t,n=this.pathForImage(o);this.images={name:t,path:n,filePath:o},this.ref.detectChanges()})}createFileName(){return this.id+".jpg"}copyFileToLocalDir(t,i,e){this.file.copyFile(t,i,this.file.dataDirectory,e).then(t=>{this.updateStoredImage(e),this.startUpload(this.images)},t=>{this.presentToast("Error guardando la imagen.")})}startUpload(t){this.file.resolveLocalFilesystemUrl(t.filePath).then(t=>{t.file(t=>this.readFile(t))}).catch(t=>{this.presentToast("Error leyendo el fichero.")})}readFile(t){const i=new FileReader;i.onload=()=>{const e=new FormData,o=new Blob([i.result],{type:t.type});e.append("file",o,t.name),this.uploadImageData(e)},i.readAsArrayBuffer(t)}uploadImageData(t){return Object(o.a)(this,void 0,void 0,(function*(){const i=yield this.loadingController.create({message:"Subiendo imagen..."});yield i.present(),this.http.uploadEditionImage(t).pipe(Object(n.a)(()=>{i.dismiss()})).subscribe(t=>{t.success?(this.presentToast("La imagen se subi\xf3 con \xe9xito."),this.http.findEditionImage(this.id)):this.presentToast("Error en la carga al servidor.")})}))}}return t.\u0275fac=function(i){return new(i||t)(s.Ib(r.a),s.Ib(a.U),s.Ib(c.a),s.Ib(b.a),s.Ib(l.a),s.Ib(d.a),s.Ib(a.a),s.Ib(a.bb),s.Ib(h.b),s.Ib(a.X),s.Ib(a.S),s.Ib(s.h),s.Ib(u.a))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-image-edition"]],inputs:{id:"id",isCreator:"isCreator"},decls:4,vars:3,consts:[[2,"float","right","vertical-align","top","margin-right","10px"],[3,"href",4,"ngIf"],["slot","end",4,"ngIf"],[3,"click",4,"ngIf"],[3,"href"],["slot","end"],[2,"border","1px solid #c3c3c3","padding","2px",3,"src"],[3,"click"],["slot","icon-only","name","camera"]],template:function(t,i){1&t&&(s.Lb(0,"div",0),s.hc(1,f,3,2,"a",1),s.hc(2,m,2,1,"ion-thumbnail",2),s.hc(3,p,2,0,"ion-button",3),s.Kb()),2&t&&(s.yb(1),s.Yb("ngIf",i.imageurl),s.yb(1),s.Yb("ngIf",!i.imageurl),s.yb(1),s.Yb("ngIf",i.isCreator))},directives:[g.i,a.M,a.h,a.r],styles:[""]}),t})()},cLkV:function(t,i,e){"use strict";e.d(i,"a",(function(){return b}));var o=e("fXoL"),n=e("ofXK");function s(t,i){if(1&t&&(o.Lb(0,"strong"),o.ic(1),o.Kb()),2&t){const t=o.Vb();o.yb(1),o.kc("",t.Role,": ")}}function r(t,i){if(1&t&&(o.Lb(0,"span"),o.ic(1),o.Kb()),2&t){const t=o.Vb();o.yb(1),o.jc(t.LastNames)}}function a(t,i){1&t&&(o.Lb(0,"span"),o.ic(1,", "),o.Kb())}function c(t,i){if(1&t&&(o.Lb(0,"span"),o.ic(1),o.Kb()),2&t){const t=o.Vb();o.yb(1),o.jc(t.Names)}}let b=(()=>{class t{constructor(){"Principal"!==this.Role&&"Secundario"!==this.Role||(this.Role="Actor "+this.Role.toLowerCase())}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=o.Cb({type:t,selectors:[["app-persona"]],inputs:{Names:"Names",LastNames:"LastNames",Role:"Role"},decls:4,vars:4,consts:[[4,"ngIf"]],template:function(t,i){1&t&&(o.hc(0,s,2,1,"strong",0),o.hc(1,r,2,1,"span",0),o.hc(2,a,2,0,"span",0),o.hc(3,c,2,1,"span",0)),2&t&&(o.Yb("ngIf",i.Role),o.yb(1),o.Yb("ngIf",i.LastNames),o.yb(1),o.Yb("ngIf",i.LastNames&&i.Names),o.yb(1),o.Yb("ngIf",i.Names))},directives:[n.i],styles:[""]}),t})()},j1ZV:function(t,i,e){"use strict";e.d(i,"a",(function(){return r}));var o=e("ofXK"),n=e("TEn/"),s=e("fXoL");let r=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(i){return new(i||t)},imports:[[o.b,n.Q]]}),t})()},qKCK:function(t,i,e){"use strict";e.d(i,"a",(function(){return C}));var o=e("mrSG"),n=e("fXoL"),s=e("Epai"),r=e("TEn/"),a=e("bE9v"),c=e("ofXK");function b(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"A\xf1o:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Year,"")}}function l(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"EAN13:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.EAN13,"")}}function d(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Formato:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Formato,"")}}function h(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"N\xba pistas:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.NroPistas,"")}}function u(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"N\xba discos:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.NroDiscos,"")}}function g(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Sello:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Sello,"")}}function f(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Notas Versi\xf3n:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.NotasVersion,"")}}function m(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",4),n.Tb("click",(function(){return n.ec(t),n.Vb().addEditionToUser()})),n.ic(1,"Agregar a mis items"),n.Kb()}}function p(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",4),n.Tb("click",(function(){return n.ec(t),n.Vb().removeEditionFromUser()})),n.ic(1,"Quitar de mis items"),n.Kb()}}function I(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",4),n.Tb("click",(function(){return n.ec(t),n.Vb().goToEdit()})),n.ic(1,"Editar"),n.Kb()}}function y(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",5),n.Tb("click",(function(){return n.ec(t),n.Vb().deleteEdition()})),n.ic(1,"Eliminar"),n.Kb()}}let C=(()=>{class t{constructor(t,i,e){this.http=t,this.navCtrl=i,this.alertCtrl=e}ngOnInit(){console.log("music: ",this.id),this.getEdition(),this.getIsEditionOwned(),this.user=this.http.getUserID(),console.log(this.id," creator y user: ",this.CreatorUserID," ",this.user)}getEdition(){this.http.getEdition(this.id,"music").subscribe(t=>{console.log("detalles: ",t),this.ItemID=t.ItemID,this.Year=t.Year,this.EAN13=t.EAN13,this.Formato=t.Formato,this.NroPistas=t.NroPistas,this.NroDiscos=t.NroDiscos,this.Sello=t.Sello,this.NotasVersion=t.NotasVersion,this.CreatorUserID=t.CreatorUserID},t=>{console.error(t)})}getIsEditionOwned(){this.http.getEditionOwned(this.id).subscribe(t=>{this.isOwned=t.body?t.body[0].IsOwned:null,console.log("isOwned:",this.isOwned)},t=>{console.error(t)})}goToEdit(){this.navCtrl.navigateForward("/edit-music/"+this.id)}addEditionToUser(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:"Confirmar",message:"\xbfTienes esta edici\xf3n?",buttons:[{text:"Lo tengo",handler:()=>{this.http.addEditionToUser(this.id,"music",1)}},{text:"A\xf1adir a lista de deseos",handler:()=>{this.http.addEditionToUser(this.id,"music",0)}},{text:"Cancelar",role:"cancel",handler:()=>{console.log("Cancelar")}}]});yield t.present(),this.navCtrl.navigateForward("/edition/music/"+this.id)}))}removeEditionFromUser(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:"Confirmar",message:"\xbfEst\xe1s seguro que deseas borrar la edici\xf3n de tus items? Esto no eliminar\xe1 la edici\xf3n de la base de datos.",buttons:[{text:"Cancelar",role:"cancelar",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Aceptar",handler:()=>{console.log("Confirm Okay"),this.http.removeEditionFromUser(this.id).subscribe(t=>{this.http.presentToast(t.body.Message),200==t.status&&this.getIsEditionOwned()},t=>(console.log(t),t))}}]});yield t.present(),this.navCtrl.navigateForward("/edition/music/"+this.id)}))}deleteEdition(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:"Confirmar",message:"\xbfSeguro que deseas eliminar permanentemente la edici\xf3n?",buttons:[{text:"Aceptar",handler:()=>{this.http.deleteEdition(this.id,"music").subscribe(t=>{this.http.presentToast(t.body.Message),200==t.status&&this.navCtrl.navigateForward("/item/music/"+this.ItemID)},t=>(console.log(t),t))}},{text:"Cancelar",role:"cancel",handler:()=>{console.log("Cancelar")}}]});yield t.present()}))}}return t.\u0275fac=function(i){return new(i||t)(n.Ib(s.a),n.Ib(r.U),n.Ib(r.b))},t.\u0275cmp=n.Cb({type:t,selectors:[["app-detail-music"]],inputs:{id:"id"},decls:12,vars:13,consts:[[3,"id","isCreator"],[4,"ngIf"],[3,"click",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],[3,"click"],["color","danger",3,"click"]],template:function(t,i){1&t&&(n.Jb(0,"app-image-edition",0),n.hc(1,b,5,1,"span",1),n.hc(2,l,5,1,"span",1),n.hc(3,d,5,1,"span",1),n.hc(4,h,5,1,"span",1),n.hc(5,u,5,1,"span",1),n.hc(6,g,5,1,"span",1),n.hc(7,f,5,1,"span",1),n.hc(8,m,2,0,"ion-button",2),n.hc(9,p,2,0,"ion-button",2),n.hc(10,I,2,0,"ion-button",2),n.hc(11,y,2,0,"ion-button",3)),2&t&&(n.Yb("id",i.id)("isCreator",i.CreatorUserID==i.user),n.yb(1),n.Yb("ngIf",0!=i.Year),n.yb(1),n.Yb("ngIf",i.EAN13),n.yb(1),n.Yb("ngIf",i.Formato),n.yb(1),n.Yb("ngIf",i.NroPistas>0),n.yb(1),n.Yb("ngIf",i.NroDiscos>0),n.yb(1),n.Yb("ngIf",i.Sello),n.yb(1),n.Yb("ngIf",i.NotasVersion),n.yb(1),n.Yb("ngIf",null==i.isOwned),n.yb(1),n.Yb("ngIf",i.isOwned),n.yb(1),n.Yb("ngIf",i.CreatorUserID==i.user),n.yb(1),n.Yb("ngIf",i.CreatorUserID==i.user))},directives:[a.a,c.i,r.h],styles:[""]}),t})()},rgD0:function(t,i,e){"use strict";e.d(i,"a",(function(){return u}));var o=e("mrSG"),n=e("xM1R"),s=e("0Gmn"),r=e("fXoL"),a=e("Epai"),c=e("TEn/"),b=e("tyNb"),l=e("ofXK");function d(t,i){if(1&t){const t=r.Mb();r.Lb(0,"div"),r.Lb(1,"ion-icon",6),r.Tb("click",(function(){r.ec(t);const i=r.Vb().$implicit;return r.Vb().goToEditWebsite(i.WebsiteID)})),r.Kb(),r.Lb(2,"ion-icon",7),r.Tb("click",(function(){r.ec(t);const i=r.Vb().$implicit;return r.Vb().deleteWebsite(i.WebsiteID)})),r.Kb(),r.Kb()}}function h(t,i){if(1&t&&(r.Lb(0,"ion-chip"),r.Jb(1,"ion-icon",3),r.Lb(2,"ion-label"),r.Lb(3,"a",4),r.ic(4),r.Kb(),r.Kb(),r.hc(5,d,3,0,"div",5),r.Kb()),2&t){const t=i.$implicit,e=r.Vb();r.yb(1),r.Yb("name",e.getIcon(t.URL)),r.yb(2),r.Zb("href",t.URL,r.fc),r.yb(1),r.jc(t.Text),r.yb(1),r.Yb("ngIf",t.CreatorUserID==e.user)}}let u=(()=>{class t{constructor(t,i,e,o,n,s){this.http=t,this.navCtrl=i,this.route=e,this.router=o,this.alertCtrl=n,this.modalController=s}ngOnInit(){this.getWebsites(),this.user=this.http.getUserID(),console.log("user: ",this.user)}getWebsites(){this.webs=[],this.http.getWebsitesForObject(this.id,this.type).subscribe(t=>{this.webs=t.body,console.log("webs ",this.webs)},t=>{console.error(t)})}goToNewWebsite(){return Object(o.a)(this,void 0,void 0,(function*(){console.log("P\xe1gina modal");const t=yield this.modalController.create({component:n.a,componentProps:{id:this.id,type:this.type}});return t.onDidDismiss().then(t=>{null!=t&&(this.webs=[],this.newWeb=t,console.log("New Web: ",this.newWeb),this.getWebsites())}),yield t.present()}))}deleteWebsite(t){return Object(o.a)(this,void 0,void 0,(function*(){const i=yield this.alertCtrl.create({header:"Confirmar",message:"\xbfSeguro que deseas eliminar permanentemente la p\xe1gina web?",buttons:[{text:"Aceptar",handler:()=>{this.http.deleteWebsite(t),this.webs=[],this.getWebsites()}},{text:"Cancelar",role:"cancel",handler:()=>{console.log("Cancelar")}}]});yield i.present()}))}goToEditWebsite(t){return Object(o.a)(this,void 0,void 0,(function*(){console.log("Edit website ",t);const i=yield this.modalController.create({component:s.a,componentProps:{id:t}});return i.onDidDismiss().then(t=>{null!=t&&(this.webs=[],console.log("Edit Web: ",t),this.getWebsites())}),yield i.present()}))}getIcon(t){var i="compass-outline";return t.indexOf("amazon.")>0?i="logo-amazon":t.indexOf("facebook.com")>0?i="logo-facebook":t.indexOf("twitter.com")>0?i="logo-twitter":t.indexOf("instagram.com")>0?i="logo-instagram":t.indexOf("playstation.com")>0?i="logo-playstation":t.indexOf("steampowered.com")>0?i="icon-steam":t.indexOf("xbox.com")>0?i="logo-xbox":t.indexOf("youtube.com")>0&&(i="logo-youtube"),i}}return t.\u0275fac=function(i){return new(i||t)(r.Ib(a.a),r.Ib(c.U),r.Ib(b.a),r.Ib(b.g),r.Ib(c.b),r.Ib(c.T))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-website-list"]],inputs:{id:"id",type:"type"},decls:5,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"click"],["name","add"],[3,"name"],[1,"chiplink",3,"href"],[4,"ngIf"],["name","pencil",3,"click"],["name","close",3,"click"]],template:function(t,i){1&t&&(r.hc(0,h,6,4,"ion-chip",0),r.Lb(1,"ion-chip",1),r.Tb("click",(function(){return i.goToNewWebsite()})),r.Jb(2,"ion-icon",2),r.Lb(3,"ion-label"),r.ic(4,"web"),r.Kb(),r.Kb()),2&t&&r.Yb("ngForOf",i.webs)},directives:[l.h,c.k,c.r,c.z,l.i],styles:[""]}),t})()},xM1R:function(t,i,e){"use strict";e.d(i,"a",(function(){return h}));var o=e("mrSG"),n=e("3Pt+"),s=e("fXoL"),r=e("TEn/"),a=e("Epai"),c=e("tyNb"),b=e("ofXK");function l(t,i){1&t&&(s.Lb(0,"span",12),s.ic(1," Campo requerido. "),s.Kb())}function d(t,i){1&t&&(s.Lb(0,"span",12),s.ic(1," Campo requerido. "),s.Kb())}let h=(()=>{class t{constructor(t,i,e,o,s,r,a){this.modalController=t,this.navParams=i,this.http=e,this.navCtrl=o,this.route=s,this.router=r,this.formBuilder=a,this.isSubmitted=!1,this.newweb=new n.e({URL:new n.b,Text:new n.b})}ngOnInit(){this.id=this.navParams.data.id,this.type=this.navParams.data.type,this.newweb=this.formBuilder.group({URL:[null,n.n.compose([n.n.required,n.n.pattern("(?:(?:(?:ht|f)tp)s?://)?[\\w_-]+(?:\\.[\\w_-]+)+([\\w.,@?^=%&:/~+#-]*[\\w@?^=%&/~+#-])?")])],Text:[null,n.n.required]})}submitForm(){if(this.isSubmitted=!0,!this.newweb.valid)return console.log("Please provide all the required values!"),!1;console.log(this.newweb.value),this.http.createWebsite(this.newweb.value,this.id,this.type).subscribe(t=>{console.log("Web "+t.body),this.WebsiteID=t.body.WebsiteID,console.log("antes de cerrar modal ",this.WebsiteID),this.closeModal()},t=>{console.log(t)})}get errorControl(){return this.newweb.controls}closeModal(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.modalController.dismiss(this.WebsiteID)}))}}return t.\u0275fac=function(i){return new(i||t)(s.Ib(r.T),s.Ib(r.V),s.Ib(a.a),s.Ib(r.U),s.Ib(c.a),s.Ib(c.g),s.Ib(n.a))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-create-website"]],decls:30,vars:4,consts:[["color","primary"],["slot","start"],["padding","",3,"fullscreen"],["novalidate","",3,"formGroup","ngSubmit"],["lines","full"],["position","stacked"],[2,"color","red"],["placeholder","http://www.ejemplo.com/pagina","formControlName","URL","type","text","required",""],["class","error ion-padding",4,"ngIf"],["placeholder","Ejemplo: Amazon, Wikipedia, IMDB, etc.","formControlName","Text","type","text","required",""],["small","","expand","inline","shape","round","color","primary","type","submit"],["small","","expand","inline","shape","round","color","primary",3,"click"],[1,"error","ion-padding"]],template:function(t,i){1&t&&(s.Lb(0,"ion-header"),s.Lb(1,"ion-toolbar",0),s.Jb(2,"ion-buttons",1),s.Lb(3,"ion-title"),s.ic(4,"Crear p\xe1gina web"),s.Kb(),s.Kb(),s.Kb(),s.Lb(5,"ion-content",2),s.Lb(6,"form",3),s.Tb("ngSubmit",(function(){return i.submitForm()})),s.Lb(7,"ion-list"),s.Lb(8,"ion-item",4),s.Lb(9,"ion-label",5),s.Lb(10,"span",6),s.ic(11,"*"),s.Kb(),s.ic(12,"URL/Direcci\xf3n"),s.Kb(),s.Jb(13,"ion-input",7),s.hc(14,l,2,0,"span",8),s.Kb(),s.Lb(15,"ion-item",4),s.Lb(16,"ion-label",5),s.Lb(17,"span",6),s.ic(18,"*"),s.Kb(),s.ic(19,"Texto del enlace"),s.Kb(),s.Jb(20,"ion-input",9),s.hc(21,d,2,0,"span",8),s.Kb(),s.Kb(),s.Lb(22,"ion-grid"),s.Lb(23,"ion-row"),s.Lb(24,"ion-col"),s.Lb(25,"ion-button",10),s.ic(26,"Enviar"),s.Kb(),s.Kb(),s.Lb(27,"ion-col"),s.Lb(28,"ion-button",11),s.Tb("click",(function(){return i.closeModal()})),s.ic(29,"Cancelar"),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb()),2&t&&(s.yb(5),s.Yb("fullscreen",!0),s.yb(1),s.Yb("formGroup",i.newweb),s.yb(8),s.Yb("ngIf",i.isSubmitted&&(null==i.errorControl.URL.errors?null:i.errorControl.URL.errors.required)),s.yb(7),s.Yb("ngIf",i.isSubmitted&&(null==i.errorControl.Text.errors?null:i.errorControl.Text.errors.required)))},directives:[r.q,r.P,r.i,r.N,r.m,n.o,n.k,n.f,r.A,r.v,r.z,r.u,r.ab,n.j,n.d,n.m,b.i,r.p,r.F,r.l,r.h],styles:[""]}),t})()},z0C6:function(t,i,e){"use strict";e.d(i,"a",(function(){return E}));var o=e("mrSG"),n=e("fXoL"),s=e("Epai"),r=e("TEn/"),a=e("bE9v"),c=e("ofXK");function b(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"A\xf1o:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Year,"")}}function l(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"EAN13:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.EAN13,"")}}function d(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Plataforma:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Plataforma,"")}}function h(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Formato:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.FormatoJuego,"")}}function u(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Regi\xf3n:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.RegionJuego,"")}}function g(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Distribuidora:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Distribuidora,"")}}function f(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Estudio:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.Estudio,"")}}function m(t,i){if(1&t&&(n.Lb(0,"span"),n.Lb(1,"strong"),n.ic(2,"Notas Edici\xf3n:"),n.Kb(),n.ic(3),n.Jb(4,"br"),n.Kb()),2&t){const t=n.Vb();n.yb(3),n.kc(" ",t.NotasEdJuego,"")}}function p(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",4),n.Tb("click",(function(){return n.ec(t),n.Vb().addEditionToUser()})),n.ic(1,"Agregar a mis items"),n.Kb()}}function I(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",4),n.Tb("click",(function(){return n.ec(t),n.Vb().removeEditionFromUser()})),n.ic(1,"Quitar de mis items"),n.Kb()}}function y(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",4),n.Tb("click",(function(){return n.ec(t),n.Vb().goToEdit()})),n.ic(1,"Editar"),n.Kb()}}function C(t,i){if(1&t){const t=n.Mb();n.Lb(0,"ion-button",5),n.Tb("click",(function(){return n.ec(t),n.Vb().deleteEdition()})),n.ic(1,"Eliminar"),n.Kb()}}let E=(()=>{class t{constructor(t,i,e){this.http=t,this.navCtrl=i,this.alertCtrl=e}ngOnInit(){console.log("game: ",this.id),this.getEdition(),this.getIsEditionOwned(),this.user=this.http.getUserID(),console.log(this.id," creator y user: ",this.CreatorUserID," ",this.user)}getEdition(){this.http.getEdition(this.id,"game").subscribe(t=>{console.log("detalles: ",t),this.ItemID=t.ItemID,this.Year=t.Year,this.EAN13=t.EAN13,this.Plataforma=t.Plataforma,this.FormatoJuego=t.FormatoJuego,this.RegionJuego=t.RegionJuego,this.Distribuidora=t.Distribuidora,this.Estudio=t.Estudio,this.NotasEdJuego=t.NotasEdJuego,this.CreatorUserID=t.CreatorUserID},t=>{console.error(t)})}getIsEditionOwned(){this.http.getEditionOwned(this.id).subscribe(t=>{this.isOwned=t.body?t.body[0].IsOwned:null,console.log("isOwned:",this.isOwned)},t=>{console.error(t)})}goToEdit(){this.navCtrl.navigateForward("/edit-game/"+this.id)}addEditionToUser(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:"Confirmar",message:"\xbfTienes esta edici\xf3n?",buttons:[{text:"Lo tengo",handler:()=>{this.http.addEditionToUser(this.id,"game",1)}},{text:"A\xf1adir a lista de deseos",handler:()=>{this.http.addEditionToUser(this.id,"game",0)}},{text:"Cancelar",role:"cancel",handler:()=>{console.log("Cancelar")}}]});yield t.present(),this.navCtrl.navigateForward("/edition/game/"+this.id)}))}removeEditionFromUser(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:"Confirmar",message:"\xbfEst\xe1s seguro que deseas borrar la edici\xf3n de tus items? Esto no eliminar\xe1 la edici\xf3n de la base de datos.",buttons:[{text:"Cancelar",role:"cancelar",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Aceptar",handler:()=>{console.log("Confirm Okay"),this.http.removeEditionFromUser(this.id).subscribe(t=>{this.http.presentToast(t.body.Message),200==t.status&&this.getIsEditionOwned()},t=>(console.log(t),t))}}]});yield t.present(),this.navCtrl.navigateForward("/edition/game/"+this.id)}))}deleteEdition(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:"Confirmar",message:"\xbfSeguro que deseas eliminar permanentemente la edici\xf3n?",buttons:[{text:"Aceptar",handler:()=>{this.http.deleteEdition(this.id,"game").subscribe(t=>{this.http.presentToast(t.body.Message),200==t.status&&this.navCtrl.navigateForward("/item/game/"+this.ItemID)},t=>(console.log(t),t))}},{text:"Cancelar",role:"cancel",handler:()=>{console.log("Cancelar")}}]});yield t.present()}))}}return t.\u0275fac=function(i){return new(i||t)(n.Ib(s.a),n.Ib(r.U),n.Ib(r.b))},t.\u0275cmp=n.Cb({type:t,selectors:[["app-detail-game"]],inputs:{id:"id"},decls:13,vars:14,consts:[[3,"id","isCreator"],[4,"ngIf"],[3,"click",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],[3,"click"],["color","danger",3,"click"]],template:function(t,i){1&t&&(n.Jb(0,"app-image-edition",0),n.hc(1,b,5,1,"span",1),n.hc(2,l,5,1,"span",1),n.hc(3,d,5,1,"span",1),n.hc(4,h,5,1,"span",1),n.hc(5,u,5,1,"span",1),n.hc(6,g,5,1,"span",1),n.hc(7,f,5,1,"span",1),n.hc(8,m,5,1,"span",1),n.hc(9,p,2,0,"ion-button",2),n.hc(10,I,2,0,"ion-button",2),n.hc(11,y,2,0,"ion-button",2),n.hc(12,C,2,0,"ion-button",3)),2&t&&(n.Yb("id",i.id)("isCreator",i.CreatorUserID==i.user),n.yb(1),n.Yb("ngIf",0!=i.Year),n.yb(1),n.Yb("ngIf",i.EAN13),n.yb(1),n.Yb("ngIf",i.Plataforma),n.yb(1),n.Yb("ngIf",i.FormatoJuego),n.yb(1),n.Yb("ngIf",i.RegionJuego),n.yb(1),n.Yb("ngIf",i.Distribuidora),n.yb(1),n.Yb("ngIf",i.Estudio),n.yb(1),n.Yb("ngIf",i.NotasEdJuego),n.yb(1),n.Yb("ngIf",null==i.isOwned),n.yb(1),n.Yb("ngIf",i.isOwned),n.yb(1),n.Yb("ngIf",i.CreatorUserID==i.user),n.yb(1),n.Yb("ngIf",i.CreatorUserID==i.user))},directives:[a.a,c.i,r.h],styles:[""]}),t})()}}]);