{"version":3,"sources":["webpack:///src/app/collections/collections.page.html","webpack:///src/app/collections/collections-routing.module.ts","webpack:///src/app/collections/collections.module.ts","webpack:///src/app/collections/collections.page.scss","webpack:///src/app/collections/collections.page.ts"],"names":["routes","path","component","CollectionsPageRoutingModule","imports","forChild","exports","CollectionsPageModule","declarations","CollectionsPage","http","navCtrl","modalController","route","router","alertController","changeRef","getCollections","colecciones","subscribe","res","console","log","error","id","navigateForward","create","modal","onDidDismiss","then","dataReturned","newCol","detectChanges","present","header","message","buttons","text","role","cssClass","handler","deleteCollection","data","presentToast","status","alert","selector","template","providers"],"mappings":"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","file":"collections-collections-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"home\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n      Mis colecciones\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n\\n  <ion-list>\\n    <ion-item *ngIf=\\\"this.colecciones.length == 0\\\"><small>Aún no tienes colecciones. Añade alguna presionando\\n       el ícono de la parte inferior.</small></ion-item>\\n    <ion-item *ngIf=\\\"this.colecciones.length > 0 && user==myuser\\\">\\n      <small>Arrastrar a la derecha para ver opciones.</small>\\n    </ion-item>\\n    <ion-item detail button (click)='goToWishlist()'>\\n      <ion-icon name=\\\"heart-outline\\\"></ion-icon>\\n      <div style=\\\"margin-left: 5px;\\\">Lista de deseos</div>\\n    </ion-item>\\n    <ion-item-sliding *ngFor=\\\"let col of colecciones\\\">\\n      <ion-item-options side=\\\"start\\\">\\n        <ion-item-option color=\\\"danger\\\" (click)=\\\"deleteCollection(col.CollectionID)\\\">\\n          <ion-icon name=\\\"trash\\\"></ion-icon>\\n        </ion-item-option>\\n      </ion-item-options>\\n      <ion-item detail button (click)='goToCollection(col.CollectionID)'>\\n        <ion-icon name=\\\"albums\\\"></ion-icon> \\n        <div style=\\\"margin-left: 5px;\\\" class=\\\"ion-text-wrap\\\">{{ col.CollectionName }}</div>\\n      </ion-item>\\n    </ion-item-sliding>\\n  </ion-list>\\n\\n  <ion-fab horizontal=\\\"end\\\" vertical=\\\"bottom\\\" slot=\\\"fixed\\\">\\n    <ion-fab-button color=\\\"primary\\\">\\n      <ion-icon name=\\\"add\\\" (click)=\\\"goToNewCollection()\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CollectionsPage } from './collections.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CollectionsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CollectionsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CollectionsPageRoutingModule } from './collections-routing.module';\n\nimport { CollectionsPage } from './collections.page';\nimport { CreateCollectionPageModule } from '../create-collection/create-collection.module';\nimport { ComponentsModule } from '../components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    CollectionsPageRoutingModule,\n    CreateCollectionPageModule\n  ],\n  declarations: [CollectionsPage]\n})\nexport class CollectionsPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbGxlY3Rpb25zL2NvbGxlY3Rpb25zLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute, NavigationExtras } from '@angular/router';\nimport { NavController, ModalController, AlertController } from '@ionic/angular';\nimport { ApiRestService } from '../api-rest.service';\nimport { ChangeDetectorRef } from '@angular/core';\nimport { CreateCollectionPage } from '../create-collection/create-collection.page';\n\n@Component({\n  selector: 'app-collections',\n  templateUrl: './collections.page.html',\n  styleUrls: ['./collections.page.scss'],\n  providers: [ApiRestService],\n})\nexport class CollectionsPage implements OnInit {\n\n  colecciones : any[];\n  newCol: any;\n\n  constructor(public http: ApiRestService, private navCtrl: NavController, public modalController: ModalController,\n     private route: ActivatedRoute, private router: Router, private alertController: AlertController,\n     private changeRef: ChangeDetectorRef) {\n    this.getCollections();\n  }\n\n  getCollections(){\n    this.colecciones = [];\n    this.http.getCollections().subscribe(\n      (res) => { \n        this.colecciones = res['body'];\n        console.log(\"colecciones: \",this.colecciones);\n      },\n      (error) =>{\n        console.error(error);\n      }\n    )\n    console.log(this.colecciones);\n  }\n\n  goToCollection(id: string) {\n    console.log('id ', id);\n    this.navCtrl.navigateForward(\"/collection/\"+id);\n  }\n\n  goToWishlist() {\n    this.navCtrl.navigateForward(\"/wishlist\");\n  }\n\n  ngOnInit() {\n  }\n\n  async goToNewCollection() {\n    console.log(\"Página modal\");\n    const modal = await this.modalController.create({\n      component: CreateCollectionPage\n    });\n\n    modal.onDidDismiss().then((dataReturned) => {\n      if (dataReturned != null) {\n        this.colecciones = [];\n        this.newCol = dataReturned;\n        console.log(\"New Collection: \",this.newCol);\n        this.getCollections();\n        this.changeRef.detectChanges();\n      }\n    });\n\n    return await modal.present();\n  }\n\n  async deleteCollection(id: number) {\n    const alert = await this.alertController.create({\n      header: 'Confirmar',\n      message: '¿Estás seguro que deseas eliminar la colección?',\n      buttons: [\n        {\n          text: 'Cancelar',\n          role: 'cancelar',\n          cssClass: 'secondary',\n          handler: () => {\n            console.log('Confirm Cancel');\n          }\n        }, {\n          text: 'Aceptar',\n          handler: () => {\n            console.log('Confirm Okay');\n            this.http.deleteCollection(id).subscribe(data => {\n              this.http.presentToast(data['body']['Message']);\n              if (data.status == 200) {\n                this.getCollections();\n              }\n            }, error => {\n              console.log(error);\n              return error;\n            });\n          }\n        }\n      ]\n    });\n  \n    await alert.present();\n  }\n\n}\n"]}