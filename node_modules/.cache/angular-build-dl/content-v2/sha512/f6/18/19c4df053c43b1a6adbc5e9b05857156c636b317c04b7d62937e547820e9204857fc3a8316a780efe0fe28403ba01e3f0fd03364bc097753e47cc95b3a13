{"version":3,"sources":["webpack:///src/app/item/item.page.html","webpack:///src/app/item/item-routing.module.ts","webpack:///src/app/item/item.module.ts","webpack:///src/app/item/item.page.scss","webpack:///src/app/item/item.page.ts"],"names":["routes","path","component","ItemPageRoutingModule","imports","forChild","exports","ItemPageModule","declarations","ItemPage","http","navCtrl","route","router","alertCtrl","modalController","id","snapshot","params","type","userID","getUserID","getItem","getEditions","console","log","subscribe","res","item","typeName","getItemTypeName","typeIcon","getItemTypeIcon","itemName","series","seriesName","genreID1","genreName1","genreID2","genreName2","genreID3","genreName3","people","creatorUser","error","ediciones","getEditionsOfItem","itemCount","navigateForward","ed","create","header","message","buttons","text","handler","deleteItem","role","alert","present","person","removePersonToItem","data","presentToast","status","selector","template"],"mappings":"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","file":"item-item-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/myitems\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>{{itemName}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <ion-list>\\n    <ion-item-sliding>\\n      <ion-item class=\\\"ion-card\\\"><ion-grid><ion-row>\\n        <ion-label style=\\\"margin-left: 5px;\\\" class=\\\"ion-text-wrap\\\">\\n          <h1><ion-icon name=\\\"{{typeIcon}}\\\" style=\\\"margin: 0 5px;\\\"></ion-icon>\\n            <strong>{{itemName}}</strong></h1>\\n            <div>\\n              <ion-button *ngIf=\\\"userID==creatorUser\\\" top expand=\\\"inline\\\" (click)=\\\"goToEditItem()\\\">Editar</ion-button>\\n              <ion-button *ngIf=\\\"userID==creatorUser\\\" top expand=\\\"inline\\\" color=\\\"danger\\\" (click)=\\\"deleteItem()\\\">Eliminar</ion-button>\\n            </div>\\n        </ion-label>\\n      </ion-row>\\n      <ion-row>\\n        <ion-chip *ngFor=\\\"let p of people\\\">\\n          <ion-icon name=\\\"person\\\"></ion-icon>\\n          <a href=\\\"/person/{{p.PersonID}}\\\" class=\\\"chiplink\\\">\\n          <app-persona Names=\\\"{{p.Names}}\\\" LastNames=\\\"{{p.LastNames}}\\\" Role=\\\"{{p.Role}}\\\"></app-persona>\\n          </a>\\n          <ion-icon name=\\\"close\\\" (click)=\\\"removePerson(p.PersonID, p.Role)\\\"></ion-icon>\\n        </ion-chip>\\n        <ion-chip (click)=\\\"addPerson()\\\">\\n          <ion-icon name=\\\"person-add\\\"></ion-icon><ion-label>Agregar</ion-label>\\n        </ion-chip>\\n      </ion-row>\\n      <ion-row>\\n      <ion-chip *ngIf=\\\"series>0\\\">\\n        <ion-icon name=\\\"pricetag\\\"></ion-icon>\\n        <ion-label>\\n          <strong>Serie: </strong> \\n          <a href=\\\"/series/{{series}}\\\" class=\\\"chiplink\\\">{{seriesName}}</a>\\n        </ion-label>\\n      </ion-chip>\\n      <ion-chip *ngIf=\\\"genreID1>0\\\">\\n        <ion-icon name=\\\"bookmark\\\"></ion-icon>\\n        <ion-label>\\n          <strong></strong> \\n          <a href=\\\"/genre/{{genreID1}}\\\" class=\\\"chiplink\\\">{{genreName1}}</a>\\n        </ion-label>\\n      </ion-chip>\\n      <ion-chip *ngIf=\\\"genreID2>0\\\">\\n        <ion-icon name=\\\"bookmark\\\"></ion-icon>\\n        <ion-label>\\n          <strong></strong> \\n          <a href=\\\"/genre/{{genreID2}}\\\" class=\\\"chiplink\\\">{{genreName2}}</a>\\n        </ion-label>\\n      </ion-chip>\\n      <ion-chip *ngIf=\\\"genreID3>0\\\">\\n        <ion-icon name=\\\"bookmark\\\"></ion-icon>\\n        <ion-label>\\n          <strong></strong> \\n          <a href=\\\"/genre/{{genreID3}}\\\" class=\\\"chiplink\\\">{{genreName3}}</a>\\n        </ion-label>\\n      </ion-chip>\\n      </ion-row>\\n      <ion-row>\\n        <app-website-list [id]=\\\"id\\\" type=\\\"item\\\"></app-website-list>\\n      </ion-row>\\n    </ion-grid>\\n  </ion-item>\\n  </ion-item-sliding>\\n  <ion-item-sliding *ngIf=\\\"itemCount <= 0\\\">\\n    <ion-label>No existen ediciones para este ítem.</ion-label>\\n  </ion-item-sliding>\\n    <ion-item-sliding *ngFor=\\\"let ed of ediciones\\\">\\n      <ion-item class=\\\"ion-card\\\">\\n        <ion-grid>\\n          <ion-row>\\n            <ion-col *ngIf=\\\"type === 'book'\\\">\\n              <div><ion-button href=\\\"/edition/book/{{ed.EditionID}}\\\">Ver detalle</ion-button></div>\\n              <app-detail-book [id]=\\\"ed.EditionID\\\"></app-detail-book>\\n            </ion-col>\\n            <ion-col *ngIf=\\\"type === 'music'\\\">\\n              <div><ion-button href=\\\"/edition/music/{{ed.EditionID}}\\\">Ver detalle</ion-button></div>\\n              <app-detail-music [id]=\\\"ed.EditionID\\\"></app-detail-music>\\n            </ion-col>\\n            <ion-col *ngIf=\\\"type === 'video'\\\">\\n              <div><ion-button href=\\\"/edition/video/{{ed.EditionID}}\\\">Ver detalle</ion-button></div>\\n              <app-detail-video [id]=\\\"ed.EditionID\\\"></app-detail-video>\\n            </ion-col>\\n            <ion-col *ngIf=\\\"type === 'game'\\\">\\n              <div><ion-button href=\\\"/edition/game/{{ed.EditionID}}\\\">Ver detalle</ion-button></div>\\n              <app-detail-game [id]=\\\"ed.EditionID\\\"></app-detail-game>\\n            </ion-col>\\n            <ion-col *ngIf=\\\"type === 'comic'\\\">\\n              <div><ion-button href=\\\"/edition/comic/{{ed.EditionID}}\\\">Ver detalle</ion-button></div>\\n              <app-detail-comic [id]=\\\"ed.EditionID\\\"></app-detail-comic>\\n            </ion-col>\\n          </ion-row>\\n        </ion-grid>\\n      </ion-item>\\n    </ion-item-sliding>\\n    <ion-item-sliding>\\n      <ion-button expand=\\\"full\\\" (click)=\\\"goToNewEdition()\\\">Nueva edición</ion-button>\\n    </ion-item-sliding>\\n  </ion-list>\\n  \\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ItemPage } from './item.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ItemPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ItemPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ItemPageRoutingModule } from './item-routing.module';\n\nimport { ItemPage } from './item.page';\nimport { CreateWebsitePageModule } from '../create-website/create-website.module';\nimport { ComponentsModule } from '../components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ItemPageRoutingModule,\n    CreateWebsitePageModule,\n    ComponentsModule\n  ],\n  declarations: [ItemPage],\n})\nexport class ItemPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2l0ZW0vaXRlbS5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute, NavigationExtras } from '@angular/router';\nimport { NavController, AlertController, ModalController } from '@ionic/angular';\nimport { ApiRestService } from '../api-rest.service';\n\n@Component({\n  selector: 'app-item',\n  templateUrl: './item.page.html',\n  styleUrls: ['./item.page.scss'],\n})\nexport class ItemPage implements OnInit {\n\n  id: any;\n  type: any;\n  typeName: any;\n  typeIcon: any;\n  itemCount: number;\n  item: any;\n  itemName: any;\n  series: any;\n  seriesName: any;\n  genreID1: any;\n  genreID2: any;\n  genreID3: any;\n  genreName1: any;\n  genreName2: any;\n  genreName3: any;\n  people: any[];\n  creatorUser: any;\n  userID: any;\n  ediciones: any[];\n\n  constructor(public http: ApiRestService, private navCtrl: NavController, private route: ActivatedRoute, \n    private router: Router, private alertCtrl: AlertController, public modalController: ModalController) {\n      this.id = this.route.snapshot.params.id;\n      this.type = this.route.snapshot.params.type;\n      this.userID = http.getUserID();\n      this.getItem();\n      this.getEditions();\n      console.log(\"id: \"+this.id+\", type: \"+this.type+\", userID: \"+this.userID);\n     }\n\n     getItem() {\n      this.http.getItem(this.id).subscribe(\n        (res) => { \n          this.item = res;\n          console.log(this.item);\n          this.typeName = this.http.getItemTypeName(this.type);\n          this.typeIcon = this.http.getItemTypeIcon(res['ItemType']);\n          console.log(this.typeIcon);\n          this.itemName = res['ItemName'];\n          this.series = res['SeriesID'];\n          this.seriesName = res['SeriesName'];\n          this.genreID1 = res['GenreID1'];\n          this.genreName1 = res['GenreName1'];\n          this.genreID2 = res['GenreID2'];\n          this.genreName2 = res['GenreName2'];\n          this.genreID3 = res['GenreID3'];\n          this.genreName3 = res['GenreName3'];\n          this.people = res['People'];\n          this.creatorUser = res['CreatorUserID'];\n          console.log(\"creator user:\", this.creatorUser);\n        },\n        (error) =>{\n          console.error(error);\n        }\n      )\n     }\n  \n     getEditions() {\n      this.ediciones = [];\n      this.http.getEditionsOfItem(this.id, this.type).subscribe(\n        (res) => { \n          this.ediciones = res['body'];\n          this.itemCount = res['itemCount'];\n          console.log('ediciones ', this.ediciones);\n        },\n        (error) =>{\n          console.error(error);\n          this.itemCount = 0;\n        }\n      )\n    }\n\n  goToEditItem() {\n    this.navCtrl.navigateForward(\"/edit-item/\"+this.id);\n  }\n\n  goToEditEdition(ed: any) {\n    this.navCtrl.navigateForward(\"/edit-\"+this.type+\"/\"+ed);\n  }\n  \n  goToNewEdition() {\n    this.navCtrl.navigateForward(\"/create-\"+this.type+\"/\"+this.id);\n  }\n\n  async deleteItem() {\n    const alert = await this.alertCtrl.create({\n      header: 'Confirmar',\n      message: '¿Seguro que deseas eliminar permanentemente el item y todas sus ediciones?',\n      buttons: [\n        {\n          text: 'Aceptar',\n          handler: () => {\n            this.http.deleteItem(this.id, this.type);\n          }\n        }, {\n          text: 'Cancelar',\n          role: 'cancel',\n          handler: () => {\n            console.log('Cancelar');\n          }\n        }\n      ]\n    });\n  \n    await alert.present();\n    /*let result = await alert.onDidDismiss();*/\n  }\n\n  addPerson() {\n    console.log(\"Añadir persona\");\n    this.navCtrl.navigateForward(\"/add-person/\"+this.type+\"/\"+this.id);\n  }\n\n  removePerson(person: number, role: string) {\n    console.log(\"Borrar persona \", person);\n    this.http.removePersonToItem(person, this.id, role).subscribe(data => {\n      this.http.presentToast(data['body']['Message']);\n      if (data.status == 200) {\n        this.people = [];\n        this.getItem();\n      }\n    }, error => {\n      console.log(error);\n      return error;\n    });\n  }\n\n  ngOnInit() {\n  }\n\n}\n"]}