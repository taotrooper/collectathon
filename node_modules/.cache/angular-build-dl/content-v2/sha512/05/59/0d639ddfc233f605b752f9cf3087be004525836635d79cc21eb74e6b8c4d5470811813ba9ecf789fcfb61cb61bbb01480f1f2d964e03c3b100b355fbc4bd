(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{OqGx:function(t,e,n){"use strict";n.r(e),n.d(e,"CollectionPageModule",(function(){return E}));var o=n("ofXK"),i=n("3Pt+"),s=n("TEn/"),c=n("tyNb"),l=n("mrSG"),r=n("azo4"),a=n("tCAP"),b=n("fXoL"),d=n("Epai"),h=n("2bnu");function u(t,e){if(1&t){const t=b.Mb();b.Lb(0,"div",10),b.Lb(1,"ion-button",11),b.Tb("click",(function(){return b.ec(t),b.Vb().editCollection()})),b.Jb(2,"ion-icon",12),b.ic(3,"Editar"),b.Kb(),b.Lb(4,"ion-button",13),b.Tb("click",(function(){return b.ec(t),b.Vb().deleteCollection()})),b.Jb(5,"ion-icon",14),b.ic(6,"Eliminar "),b.Kb(),b.Kb()}}function g(t,e){1&t&&(b.Lb(0,"ion-item"),b.Lb(1,"small"),b.ic(2,"La colecci\xf3n est\xe1 vac\xeda."),b.Kb(),b.Kb())}function f(t,e){1&t&&(b.Lb(0,"ion-item"),b.Lb(1,"small"),b.ic(2,"Arrastrar a la derecha para ver opciones."),b.Kb(),b.Kb())}function m(t,e){if(1&t){const t=b.Mb();b.Lb(0,"ion-item-option",13),b.Tb("click",(function(){b.ec(t);const e=b.Vb().$implicit;return b.Vb().deleteEditionFromCollection(e.ItemID,e.EditionID)})),b.Jb(1,"ion-icon",14),b.Kb()}}function p(t,e){if(1&t&&(b.Lb(0,"ion-item-sliding"),b.Lb(1,"ion-item-options",15),b.hc(2,m,2,0,"ion-item-option",16),b.Kb(),b.Jb(3,"app-edition-list",17),b.Kb()),2&t){const t=e.$implicit,n=b.Vb();b.yb(2),b.Yb("ngIf",n.user==n.myuser),b.yb(1),b.Yb("ed",t)}}function C(t,e){if(1&t){const t=b.Mb();b.Lb(0,"ion-fab",18),b.Lb(1,"ion-fab-button",1),b.Lb(2,"ion-icon",19),b.Tb("click",(function(){return b.ec(t),b.Vb().goToAddCollection()})),b.Kb(),b.Kb(),b.Kb()}}const y=[{path:"",component:(()=>{class t{constructor(t,e,n,o,i,s,c){this.http=t,this.navCtrl=e,this.alertController=n,this.route=o,this.router=i,this.modalController=s,this.changeRef=c}ngOnInit(){this.id=this.route.snapshot.params.id,console.log(this.id),this.myuser=this.http.getUserID(),this.getEditionsInCollection(),this.getCollection(),console.log(this.ediciones),this.changeRef.detectChanges()}getEditionsInCollection(){this.ediciones=[],this.http.getEditionsInCollection(this.id).subscribe(t=>{t.body&&(this.ediciones=t.body,this.changeRef.detectChanges()),console.log("res: ",this.ediciones)},t=>{console.error(t)})}getCollection(){this.name=null,this.http.getCollection(this.id).subscribe(t=>{this.name=t.CollectionName,this.user=t.UserID},t=>{console.error(t)})}goToEdition(t,e){this.navCtrl.navigateForward("/edition/"+this.http.getItemTypeURL(e)+"/"+t)}editCollection(){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:a.a,componentProps:{id:this.id}});return t.onDidDismiss().then(t=>{this.getCollection(),this.changeRef.detectChanges()}),yield t.present()}))}goToAddCollection(){return Object(l.a)(this,void 0,void 0,(function*(){console.log("P\xe1gina modal");const t=yield this.modalController.create({component:r.a,componentProps:{id:this.id}});return t.onDidDismiss().then(t=>{null!=t&&(this.ediciones=[],this.getEditionsInCollection(),this.changeRef.detectChanges())}),yield t.present()}))}deleteCollection(){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({header:"Confirmar",message:"\xbfEst\xe1s seguro que deseas eliminar la colecci\xf3n?",buttons:[{text:"Cancelar",role:"cancelar",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Aceptar",handler:()=>{console.log("Confirm Okay"),this.http.deleteCollection(this.id).subscribe(t=>{this.http.presentToast(t.body.Message),200==t.status&&this.navCtrl.navigateForward("/collections")},t=>(console.log(t),t))}}]});yield t.present()}))}deleteEditionFromCollection(t,e){return Object(l.a)(this,void 0,void 0,(function*(){const n=yield this.alertController.create({header:"Confirmar",message:"\xbfEst\xe1s seguro que deseas eliminar edici\xf3n de la colecci\xf3n?",buttons:[{text:"Cancelar",role:"cancelar",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Aceptar",handler:()=>{console.log("Confirm Okay"),this.http.removeEditionFromCollection(this.id,t,e).subscribe(t=>{this.http.presentToast(t.body.Message),this.ediciones=[],this.getEditionsInCollection(),this.changeRef.detectChanges()},t=>(console.log(t),t))}}]});yield n.present()}))}}return t.\u0275fac=function(e){return new(e||t)(b.Ib(d.a),b.Ib(s.U),b.Ib(s.b),b.Ib(c.a),b.Ib(c.g),b.Ib(s.T),b.Ib(b.h))},t.\u0275cmp=b.Cb({type:t,selectors:[["app-collection"]],decls:15,vars:8,consts:[[3,"translucent"],["color","primary"],["slot","start"],["defaultHref","collections"],["slot","end"],[3,"fullscreen"],["style","text-align: center",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["horizontal","end","vertical","bottom","slot","fixed",4,"ngIf"],[2,"text-align","center"],[3,"click"],["name","pencil"],["color","danger",3,"click"],["name","trash"],["side","start"],["color","danger",3,"click",4,"ngIf"],[3,"ed"],["horizontal","end","vertical","bottom","slot","fixed"],["name","add",3,"click"]],template:function(t,e){1&t&&(b.Lb(0,"ion-header",0),b.Lb(1,"ion-toolbar",1),b.Lb(2,"ion-buttons",2),b.Jb(3,"ion-back-button",3),b.Kb(),b.Lb(4,"ion-buttons",4),b.Jb(5,"ion-menu-button"),b.Kb(),b.Lb(6,"ion-title"),b.ic(7),b.Kb(),b.Kb(),b.Kb(),b.Lb(8,"ion-content",5),b.Lb(9,"ion-list"),b.hc(10,u,7,0,"div",6),b.hc(11,g,3,0,"ion-item",7),b.hc(12,f,3,0,"ion-item",7),b.hc(13,p,4,2,"ion-item-sliding",8),b.Kb(),b.hc(14,C,3,0,"ion-fab",9),b.Kb()),2&t&&(b.Yb("translucent",!0),b.yb(7),b.jc(e.name),b.yb(1),b.Yb("fullscreen",!0),b.yb(2),b.Yb("ngIf",e.user==e.myuser),b.yb(1),b.Yb("ngIf",0==e.ediciones.length),b.yb(1),b.Yb("ngIf",e.ediciones.length>0&&e.user==e.myuser),b.yb(1),b.Yb("ngForOf",e.ediciones),b.yb(1),b.Yb("ngIf",e.user==e.myuser))},directives:[s.q,s.P,s.i,s.f,s.g,s.C,s.N,s.m,s.A,o.i,o.h,s.h,s.r,s.v,s.y,s.x,h.a,s.w,s.n,s.o],styles:[""]}),t})()}];let I=(()=>{class t{}return t.\u0275mod=b.Gb({type:t}),t.\u0275inj=b.Fb({factory:function(e){return new(e||t)},imports:[[c.i.forChild(y)],c.i]}),t})();var v=n("j1ZV"),L=n("lVYT"),K=n("ZOHD");let E=(()=>{class t{}return t.\u0275mod=b.Gb({type:t}),t.\u0275inj=b.Fb({factory:function(e){return new(e||t)},imports:[[o.b,i.g,s.Q,v.a,I,L.AddCollectionPageModule,K.EditCollectionPageModule]]}),t})()},j1ZV:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n("ofXK"),i=n("TEn/"),s=n("fXoL");let c=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(e){return new(e||t)},imports:[[o.b,i.Q]]}),t})()}}]);